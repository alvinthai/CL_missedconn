
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After deciding to focus on my Github portfolio, I made a mini-project to demonstrate the skills we learned for the week. This week, we covered web scraping (BeautifulSoup and MongoDB), natural language processing (NLP), time series, and clustering.</p>
<p>So, I decided to have some fun with Craigslist's Missed Connections to practice:</p>
<ul>
<li>web scraping</li>
<li>database management</li>
<li>data visualization</li>
<li>NLP</li>
<li>clustering</li>
</ul>
<p>I didn't do any time series analysis since that would require a pretty healthy dataset to play with, and my script is only a week old...</p>
<p>To start off- let's talk about scraping Craigslist. I didn't think Missed Connections would be too difficult to scrape because I assumed the spam content to be relatively low compared to other Craigslist categories. This was my first time building a scraper, and I learned a ton in the process:</p>
<ol>
<li><p><strong>Get used to iterating.</strong> I'm not sure how long I thought it would take to scrape and curate my own dataset, but it definitely took longer than I expected. My process seemed it would be simple: build a scraping script, build a database to store info, then add some functionality to the scraper to retrieve only new posts that aren't in the database. Each step required lots of iterating, and of course, there's always room for improvement and more iterations...</p>
</li>
<li><p><strong>Building a "friendly" scraper.</strong> To avoid getting caught and banned for overloading Craigslist's server, I put a delay between each request to view the next page. I used the <code>sleep</code> function from python's <code>time</code> module to emulate a person spending 10-13 seconds on each page with <code>sleep(10 + 3*np.random.random())</code>. It might be a bit on the conservative side, but I've managed to store 1153 posts so far without getting kicked off!</p>
</li>
<li><p><strong>Figuring out your database needs.</strong> Even though we had learned about MongoDB this week, it felt like overkill for my needs. I wasn't going to be storing much, and my table schema was pretty straight-forward, so I went with Postgres. My friend shared some helpful resources to help me make these decisions again in the future:</p>
<p><a href="https://dzone.com/articles/when-use-mongodb-rather-mysql">When to Use MongoDB Rather than MySQL (or Other RDBMS): The Billing Example</a><br><br></p>
<figure><img src='http://i.stack.imgur.com/iMkdg.png'><figcaption><i><a href='http://i.stack.imgur.com/iMkdg.png'>Visual Guide to NoSQL Systems</a></i></figcaption></figure><p>I also learned that Python's <code>sqlalchemy</code> module is much nicer to use than <code>psycopg2</code>. Good god. Goodbye rollbacks and commits!</p>
</li>
</ol>
<hr>
<p>I'll give a small demonstration of my project, but you can check out my code here: <a href="https://github.com/stong1108/CL_missedconn">https://github.com/stong1108/CL_missedconn</a></p>
<p>First, importing things:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">from</span> <span class="nn">MissedConn</span> <span class="kn">import</span> <span class="n">MissedConn</span>
<span class="kn">from</span> <span class="nn">maps</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">manage_db</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, we create a MissedConn object- I'm initializing it for just the 'sfc' subcategory of sfbay's missed connections for minimal scraping during this demonstration.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">mc</span> <span class="o">=</span> <span class="n">MissedConn</span><span class="p">(</span><span class="s">&#39;https://sfbay.craigslist.org/search/sfc/mis&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">get_df</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then, we can make an interactive Folium Map to visualize and read the Missed Connection posts that included latitude &amp; longitude data (posts that contain maps).</p>
<p>I haven't decided if/how to represent the remaining posts- some include a neighborhood, and some don't or provide a location that's not super helpful. There's another function <code>make_heat_map(df)</code> in <code>maps.py</code> for making heat maps that is pretty similar to <code>make_pinned_map(df)</code> for now. The pinned map is more fun to me (and I'm especially proud of the markers).</p>
<p>Click on the pins to read the posts!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">m</span> <span class="o">=</span> <span class="n">make_pinned_map</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">m</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[52]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCA9IEwubWFwKCdtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3MDk3NCwtMTIyLjQxNzY1XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IDEyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4Qm91bmRzOiBib3VuZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcnM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzA2NTgzYTdmMGQ3NTQ1NGNhOGNhZjZmYmU3NzY3NjVjID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9jYXJ0b2RiLWJhc2VtYXBzLXtzfS5nbG9iYWwuc3NsLmZhc3RseS5uZXQvbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJyhjKSA8YSBocmVmPSJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzIChjKSA8YSBocmVmPSJodHRwOi8vY2FydG9kYi5jb20vYXR0cmlidXRpb25zIj5DYXJ0b0RCPC9hPiwgQ2FydG9EQiA8YSBocmVmID0iaHR0cDovL2NhcnRvZGIuY29tL2F0dHJpYnV0aW9ucyI+YXR0cmlidXRpb25zPC9hPicsCiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0UmV0aW5hOiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9lODQ0YjE3YjFlMDg0ZWI2YTg0Y2I2NWMzNzNiMWZjNyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjgwNTQ5NywtMTIyLjQyMjAwN10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2M5ODEyMTVmNzgzYzRkYTA5ZmExNjgzYzQyZDc4ZjdkID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9lODQ0YjE3YjFlMDg0ZWI2YTg0Y2I2NWMzNzNiMWZjNy5zZXRJY29uKGljb25fYzk4MTIxNWY3ODNjNGRhMDlmYTE2ODNjNDJkNzhmN2QpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kOGI2YWFiNmUxMGU0NDVlYmI3YjhmZjMxYzViMGZhYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85NWE3N2Y4ZGQ4NGU0Yzk1OGMyMjA4NzhhMDY4Y2NkMyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOTVhNzdmOGRkODRlNGM5NThjMjIwODc4YTA2OGNjZDMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEdoaXJhZGVsbGkgNi8yMyBQb2xpc2ggQ2FzaGllcjogIAlJJiMzOTt2ZSBuZXZlciBkb25lIHRoaXMgYmVmb3JlIGFuZCBpdCYjMzk7cyBwcm9iYWJseSBhIGxvbmcgc2hvdCB0aGF0IGhlJiMzOTtsbCBldmVyIHJlYWQgdGhpcyBidXQgaXQmIzM5O3Mgd29ydGggYSBzaG90LiBPbiA2LzIzIGF0IGFyb3VuZCA4OjUwIHBtIEkgdmlzaXRlZCBHaGlyYWRlbGxpIHdpdGggbXkgYXVudCBhbmQgYW4gb2xkZXIgZ2VudGxlbWFuIGZyaWVuZC4gT3VyIGNhc2hpZXImIzM5O3MgbmFtZSB3YXMgTWljaGFsIGFuZCBoZSB3YXMgUG9saXNoIHdpdGggYW4gYWNjZW50LiBXaGlsZSBteSBhdW50IGFuZCBmcmllbmQgd2VyZSBiaWNrZXJpbmcgb3ZlciB3aGF0IHRoZXkgd2VyZSBnb2luZyB0byBvcmRlciwgd2Uga2VwdCBnaXZpbmcgZWFjaCBvdGhlciBhIGxvb2sgYW5kIHRoZW4gaGUgbm90aWNlZCBteSB0YXR0b28gb24gbXkgY2hlc3Qgd2hpY2ggaXMgaW4gUG9saXNoLiBIZSB0aGVuIGFza2VkIG1lIGEgY291cGxlIHF1ZXN0aW9ucyBhYm91dCBpdC4gQWZ0ZXIgd2UgcGFpZCBoZSBnYXZlIG1lIHRoZSBzd2VldGVzdCBzbWlsZSBhbmQgSSByZWdyZXQgbm90IGZ1cnRoZXJpbmcgb3VyIGNvbnZlcnNhdGlvbiBtb3JlLiBJIHdhcyB2aXNpdGluZyBmcm9tIG91dCBvZiBzdGF0ZSBidXQgdGhhdCYjMzk7cyB3aGF0IEZCIGlzIGZvciwgcmlnaHQ/IT8gSWYgeW91IGhhcHBlbiB0byBydW4gYWNyb3NzIHRoaXMgYW5kIHJlbWVtYmVyIG1lIG9yIGlmIGFueW9uZSBrbm93cyBoaW0sIHBsZWFzZSByZXNwb25kLiA7KTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kOGI2YWFiNmUxMGU0NDVlYmI3YjhmZjMxYzViMGZhYy5zZXRDb250ZW50KGh0bWxfOTVhNzdmOGRkODRlNGM5NThjMjIwODc4YTA2OGNjZDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9lODQ0YjE3YjFlMDg0ZWI2YTg0Y2I2NWMzNzNiMWZjNy5iaW5kUG9wdXAocG9wdXBfZDhiNmFhYjZlMTBlNDQ1ZWJiN2I4ZmYzMWM1YjBmYWMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9iYzgxNGY5YWE4MmM0Nzg3YTgzYzlmZWEyYWIwNDYwMSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MzEzNiwtMTIyLjQ2MDEzN10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2MxZDE0NzMyMGI1NzQ0N2Y5Y2RiZDRlOTg5NzJjMmVjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9iYzgxNGY5YWE4MmM0Nzg3YTgzYzlmZWEyYWIwNDYwMS5zZXRJY29uKGljb25fYzFkMTQ3MzIwYjU3NDQ3ZjljZGJkNGU5ODk3MmMyZWMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hNjQxNDkxY2VjNTI0ODQzOGJlZjc0YzNjMGE4NzQ3YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zNWJiM2FlNWNiODg0MThmOGJmZjM0MTJhMGM4MTI0NyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMzViYjNhZTVjYjg4NDE4ZjhiZmYzNDEyYTBjODEyNDciICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIExhbmQmIzM5O3MgRW5kIEhvb2t1cCBZb3UgJmFtcDsgWW91ciBCb3k6ICAJTG9va2luZyB0byBzZWUgaWYgd2UgY2FuIG1lZXQgdXAgYWdhaW4uIFlvdSBzYWx0ICZhbXA7IHBlcHBlciBjbG9zZSBzaGF2ZWQgaGFpciwgc3RlZWwgZXllcywgYmVhdXRpZnVsIGxvbmcgZ3JleSBiZWFyZCwgbG90cyBvZiB0YXR0b29zLCBtdXNjbGUgZGFkZHkuIFlvdSB3ZXJlIHdpdGggeW91ciBib3kgcmVkL29yYW5nZSBoYWlyLCBoYWlyeSwgYmVhdXRpZnVsIGFzcywgdW5jdXQsIHdlYXJpbmcgYm94ZXJzLCBidWlsdC4gV291bGQgbGlrZSB0byBtZWV0IHVwIHdpdGggdGhlIGRhZGR5IGFuZCBib3kgYWdhaW4gd2hlbiB5b3UgaGF2ZSB0aW1lLiBBbHdheXMgbG9va2luZyBmb3IgRldCLiBNZSwgdGhpY2ssIGRhZGR5LCBpbiBjYW1vIHNob3J0cywgYmxhY2sgam9jaywgY29ja3JpbmcsIGZsaXBmbG9wcywgR0FQIGhvb2RpZSwgc3VuZ2xhc3NlcywgYmVpZ2UgaGF0LiBXb3VsZCBsaWtlIHRvIGhhdmUgc29tZSBtb3JlIGJlYWNoIG9yIGFkdmVudHVyZXMgd2l0aCB5b3UgdHdvIGFzIHRpbWUgYWxsb3dzLiBBbHdheXMgbG9va2luZyB0byBhZGQgRldCLiBIb3BlIHRvIHNlZSB5b3UgYXQgdGhlIGJlYWNoIGFnYWluIHRoaXMgd2Vla2VuZCBhdCBMYW5kJiMzOTtzIEVuZCBpbiB0aGUgc2FtZSBzcG90LiBDb250YWN0IG1lIGJveXMgaWYgeW91IHdhbnQgdG8gaGF2ZSBzb21lIG1vcmUgZnVuLiEhITwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hNjQxNDkxY2VjNTI0ODQzOGJlZjc0YzNjMGE4NzQ3Yi5zZXRDb250ZW50KGh0bWxfMzViYjNhZTVjYjg4NDE4ZjhiZmYzNDEyYTBjODEyNDcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iYzgxNGY5YWE4MmM0Nzg3YTgzYzlmZWEyYWIwNDYwMS5iaW5kUG9wdXAocG9wdXBfYTY0MTQ5MWNlYzUyNDg0MzhiZWY3NGMzYzBhODc0N2IpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85ZTE5MDJhMzE1ODA0MGNiODM0MWYwNGUyOGJkMjQxNCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MzEzNiwtMTIyLjQ2MDEzN10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzg1M2ZmODg1ZmVhYjRiZWE5ODAxYTE0MTliMThjZTJjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl85ZTE5MDJhMzE1ODA0MGNiODM0MWYwNGUyOGJkMjQxNC5zZXRJY29uKGljb25fODUzZmY4ODVmZWFiNGJlYTk4MDFhMTQxOWIxOGNlMmMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84ZjE1YTYxOWZhZmM0ODQ0YTUyMzlkMWRjMzQ3NGUyOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lNzFjZjhmYjgyYzY0YWVlYmNlZDY2NWRiODczZTJmMyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZTcxY2Y4ZmI4MmM2NGFlZWJjZWQ2NjVkYjg3M2UyZjMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIE1ldCBhdCBMYW5kJiMzOTtzIEVuZCBMYXRlIEFmdGVybm9vbiBUaGlzIFBhc3QgU3VuZGF5OiAgCUkgd2FzIGxheWluZyBvdXQgYXQgTGFuZCYjMzk7cyBFbmQgYW5kIHlvdSBjYW1lIHVwIHRvIG1lIGFuZCB3ZSBob29rZWQgdXAuIEkgd2FzIG9uIHdoaXRlIHNoZWV0IHdpdGggY29sb3JmdWwgdG93ZWwuIFlvdSB5b3VuZ2VyIGdvb2QgbG9va2luZyBndXkgd2l0aCBibG9uZGUgYmVhcmQuIFNob3dlZCB5b3UgbXkgdGFsZW50cy4gWW91IGFza2VkIG1lIGhvdyB5b3UgdGFzdGVkLiBZb3UmIzM5O3JlIGN1dGUgaW4gYmxhY2sgd29ya291dCBwYW50cyBhbmQgZ3JheSBzcGVja2xlZCB0b3AsIHN1bmdsYXNzZXMsIGhhdCwgYmxhY2sgdW5kZXJ3ZWFyLiBNZSBuYWtlZCwgc3VubmluZywgd2l0aCBzdW5nbGFzc2VzIGFuZCBiZWlnZSBoYXQuIFdvdWxkIGxpa2UgdG8gc2VlIHlvdSBhZ2FpbiBvciBiZSBhIEZXQi4gTm90aGluZyBzZXJpb3VzIGp1c3QgYXMgbmVlZGVkLiBUaGluZ3MgeW91IGNhbiBsZWFybiBmcm9tIGFuIG9sZGVyIGd1eS4gTG92ZSB0byBob29rIHVwIGFnYWluLiBTZWUgeW91IGF0IHRoZSBiZWFjaC48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGYxNWE2MTlmYWZjNDg0NGE1MjM5ZDFkYzM0NzRlMjkuc2V0Q29udGVudChodG1sX2U3MWNmOGZiODJjNjRhZWViY2VkNjY1ZGI4NzNlMmYzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfOWUxOTAyYTMxNTgwNDBjYjgzNDFmMDRlMjhiZDI0MTQuYmluZFBvcHVwKHBvcHVwXzhmMTVhNjE5ZmFmYzQ4NDRhNTIzOWQxZGMzNDc0ZTI5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfOTM0MDczMzliNWFjNGVjOTk0MmIzOTQ0MzU3OWQyODkgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43MTk1LC0xMjIuNDQxMV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2YxNzM1NGUzNTNhNjRhYTY5ZDQzODdiNTE1ODZhODA2ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl85MzQwNzMzOWI1YWM0ZWM5OTQyYjM5NDQzNTc5ZDI4OS5zZXRJY29uKGljb25fZjE3MzU0ZTM1M2E2NGFhNjlkNDM4N2I1MTU4NmE4MDYpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jNWJhMWNhMTBiZGY0Zjk4OTU4YjVmNzg3NmY2OTBhZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83YTljYjAyMTcwMzk0Nzg5OTllMDM3MWEyNWJjOTUwMyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfN2E5Y2IwMjE3MDM5NDc4OTk5ZTAzNzFhMjViYzk1MDMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDI5IEJ1cyBUb25pZ2h0IHdlIHNhdCBuZXh0IHRvIGVhY2ggb3RoZXI6ICAJU29ycnkgSSYjMzk7bSBzdXBlciBzaHkgYW5kIHNvZnQgc3Bva2VuLCBJJiMzOTttIGFsd2F5cyBhIGJpdCBuZXJ2b3VzIHdoZW4gSSBtZWV0IHNvbWVvbmUgbmV3LiBJIHNhdCBuZWFyIHlvdSBhcyBJIGdvdCBvbiB0aGUgYnVzIHlvdSB3ZXJlIHRyeWluZyB0byBpbml0aWF0ZSBhIGNvbnZlcnNhdGlvbiB3aXRoIHRoZSBNY0RvbmFsZCYjMzk7cyBJIGhhZCBqdXN0IGJvdWdodC4gSSB3YXMgdGhpbmtpbmcgSSBzaG91bGQgaGF2ZSBzYWlkIG1vcmUgdG8geW91LiBJdCB3YXMganVzdCBhZnRlciA5cG0gSnVseSAxMnRoIG9yIGp1c3QgdHVybmVkIDEwcG0uIFlvdTogQXNpYW4gZmVtYWxlIHlvdSB3ZXJlIHdlYXJpbmcgYSBiYWNrcGFjayBNZTogQmxhY2sgbWFsZSB3ZWFyaW5nIHRhbiBzd2VhdGVyIGFuZCBraGFraSYjMzk7cy4gSXQmIzM5O3MgYSBiaXQgZWFzaWVyIHRvIHdyaXRlIHlvdSBoZXJlLCBJIHdhcyBob3Bpbmcgd2UgY2FuIHRhbGsgbW9yZSBpZiB0aGF0JiMzOTtzIG9rYXkgd2l0aCB5b3U/IEkgcmVhbGx5IGhvcGUgeW91IHNlZSB0aGlzLjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jNWJhMWNhMTBiZGY0Zjk4OTU4YjVmNzg3NmY2OTBhZS5zZXRDb250ZW50KGh0bWxfN2E5Y2IwMjE3MDM5NDc4OTk5ZTAzNzFhMjViYzk1MDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl85MzQwNzMzOWI1YWM0ZWM5OTQyYjM5NDQzNTc5ZDI4OS5iaW5kUG9wdXAocG9wdXBfYzViYTFjYTEwYmRmNGY5ODk1OGI1Zjc4NzZmNjkwYWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9hZmU1NWE0MjM0ZDA0ODA2YmFiOTc1MDQwNGNkMDA0YyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTMsLTEyMi40MTY3XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMjIzNmQyMzAyODhlNGM3OGIwNWU5YzkyNGUwZjQyMWMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2FmZTU1YTQyMzRkMDQ4MDZiYWI5NzUwNDA0Y2QwMDRjLnNldEljb24oaWNvbl8yMjM2ZDIzMDI4OGU0Yzc4YjA1ZTljOTI0ZTBmNDIxYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI5NmMxYTlkYTRkNDQ0YzRiOWY2MzBhYWFkMzgyYTkxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzRkMGViZTk2ZWIzNTRjNjBiOGQ1MDE3NDczNzcyOTc5ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF80ZDBlYmU5NmViMzU0YzYwYjhkNTAxNzQ3Mzc3Mjk3OSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgRGVudmVyIEdpcmwgd2UgbWV0IG9uIHRoZSBlbGV2YXRvciB0byB0aGUgU3RhcmxpZ2h0IFJvb20gdzR3IG13NHc6ICAJWW91IHdlcmUgdGhlIHNleHkgZ2lybCBvbiB0aGUgZWxldmF0b3Igd2l0aCB1cyBnb2luZyB1cCB0byB0aGUgdGhlIFN0YXJsaWdodCBMb3VuZ2UgYXQgdGhlIFNpciBGcmFuY2lzIERyYWtlIEhvdGVsIG9uIFNhdHVyZGF5IEp1bHkgOXRoLiBZb3Ugc2FpZCB5b3Ugd2VyZSBmcm9tIENoZXJyeSBDcmVlayBhZnRlciB3ZSB0b2xkIHlvdSB3ZSB3ZXJlIGZyb20gQ29sb3JhZG8gYW5kIHRoYXQgeW91IHdvcmtlZCBmb3IgYSBjZXJ0YWluIGhvdGVsIGNoYWluIGFuZCB3ZXJlIHRoZXJlIGFsb25lLiBJIHdhcyB0YXR0b29lZCB3aXRoIHNsaWNrZWQgYmFjayBoYWlyIGFuZCBteSB3aWZlIHdhcyBhIHJlZGhlYWQgaW4gYSBzaG9ydCBibGFjayBkcmVzcy4gWW91IGNvbW1lbnRlZCBvbiBoZXIgc3RvY2tpbmdzIGFuZCBob3cgc21hcnQgc2hlIHdhcyB0byB3ZWFyIHRoZW0gaW4gdGhlIGNvbGQuIFdlIGNvdWxkbnQgZmluZCB5b3UgYmVmb3JlIHdlIGxlZnQgYnV0IGZhbnRhc2l6ZWQgYWJvdXQgeW91IGFsbCBuaWdodC4gV291bGQgbGl2ZSB0byBzZWUgeW91IGFnYWluLiBtNHcgdzR3IG13NHc8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjk2YzFhOWRhNGQ0NDRjNGI5ZjYzMGFhYWQzODJhOTEuc2V0Q29udGVudChodG1sXzRkMGViZTk2ZWIzNTRjNjBiOGQ1MDE3NDczNzcyOTc5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYWZlNTVhNDIzNGQwNDgwNmJhYjk3NTA0MDRjZDAwNGMuYmluZFBvcHVwKHBvcHVwXzI5NmMxYTlkYTRkNDQ0YzRiOWY2MzBhYWFkMzgyYTkxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMzkzZmU5NzYwZjUwNGQ5MmJkNWEyYzU0ZTBiZDExYTMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43OTczMzQsLTEyMi40MTg2NzJdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85N2QzMGRkNTk3NTY0MjZmYWJiMTNkNDg2Y2Q5YmY0MiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMzkzZmU5NzYwZjUwNGQ5MmJkNWEyYzU0ZTBiZDExYTMuc2V0SWNvbihpY29uXzk3ZDMwZGQ1OTc1NjQyNmZhYmIxM2Q0ODZjZDliZjQyKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjI3MWYwMDY0MjJjNGRhMThlY2MyZTBhZTNhMTdjZjAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzU0MzY4NmQyY2E0NGIyM2FjNmFlZDAyNzI3NTNiYjUgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2M1NDM2ODZkMmNhNDRiMjNhYzZhZWQwMjcyNzUzYmI1IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBPaCBNYWxjb2xtOiAgCVNvIHRpcmVkIG9mIGRlYWxpbmcgd2l0aCB1ciBicy4uIGJlZW4gMTEgeWVhcnMgbm93Li4gSSBsZWZ0IHlvdSA2IHllYXJzIGFnbyBhbmQgdGhlIGRyYW1hIGlzIHN0aWxsIG9uLi4gTGV0IG1lIGhhdmUgYSBsaWZlLi4gaSBhbSBub3QgZ2V0dGluZyB5b3VuZ2VyLi4gSSBoYXZlIGVuZW1pZXMgd2hvIHRyZWF0IG1lIGJldHRlciB0aGFuIHlvdSBkby4gSSB3aWxsIGFsd2F5cyBsb3ZlIHlvdSwgYnV0IHlvdSBkb250IGhhdmUgcmVzcGVjdCBmb3IgbWUuIEkgY2FudCBldmVuIGJlIGZyaWVuZHMgd2l0aCB1LiBKdXN0IGZ1Y2tpbmcgbXkgYnJhaW4gZm9yIDExIHllYXJzIHRvIGdldCBhdHRlbnRpb24gaXMgc28gbG93LiBpIGhhdGUgbXlzZWxmIGZvciBub3QgYmVpbmcgYWJsZSB0byBoYW5kbGUgdS48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjI3MWYwMDY0MjJjNGRhMThlY2MyZTBhZTNhMTdjZjAuc2V0Q29udGVudChodG1sX2M1NDM2ODZkMmNhNDRiMjNhYzZhZWQwMjcyNzUzYmI1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMzkzZmU5NzYwZjUwNGQ5MmJkNWEyYzU0ZTBiZDExYTMuYmluZFBvcHVwKHBvcHVwX2IyNzFmMDA2NDIyYzRkYTE4ZWNjMmUwYWUzYTE3Y2YwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNjI3ZDdhNzdlZGMyNDEyMTkzYjRiOTI0M2Y3NTdmMzIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzA3NDgsLTEyMi40MjQ4NTNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85OTQzZjcxZDlhMzk0NjZkYWY0NTQ3YWEwMjhkMWViZSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNjI3ZDdhNzdlZGMyNDEyMTkzYjRiOTI0M2Y3NTdmMzIuc2V0SWNvbihpY29uXzk5NDNmNzFkOWEzOTQ2NmRhZjQ1NDdhYTAyOGQxZWJlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTc4YTk1YWE4OGY0NDM1NWExZmVlZDY5N2MxNzhmMDEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzU2YzYyNmU0YTM0NDZhYjg4MGJjNzY3ZjAyMTI1Y2UgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2M1NmM2MjZlNGEzNDQ2YWI4ODBiYzc2N2YwMjEyNWNlIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBDeWNsaXN0IHNlZWtpbmcgY3ljbGlzdCBvbiBtYXJrZXQ6ICAJV2hpbGUgcmlkaW5nIHVwIE1hcmtldCBTdHJlZXQgZWFybGllciB0aGlzIGV2ZW5pbmcsIHdlIHN0b3BwZWQgYXQgdGhlIGxpZ2h0IGF0IExhZ3VuYSAoSSBwdWxsZWQgdXAgdG8geW91KS4gWW91IHNtaWxlZCBhdCBtZSBhbmQgd2UgaGFkIGEgc2hvcnQgY2hhdC4gWW91IGFza2VkIG1lIGFib3V0IHNvbWV0aGluZyBub3RpY2VhYmxlIG9uIG15IGJpa2UuIFlvdSYjMzk7cmUgbG92ZWx5LCBhbmQgYW4gYWRtaXJhYmx5IHN0cm9uZyBjeWNsaXN0LiBXaGF0IGRpZCB3ZSB0YWxrIGFib3V0IGJyaWVmbHk/IFNlbmQgbWUgYSBtZXNzYWdlLCB0aGVuIGxldCYjMzk7cyBjaGF0IGFuZCBnZXQgdG9nZXRoZXIuIFVudGlsIHdlIG1lZXQgYWdhaW4hPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzk3OGE5NWFhODhmNDQzNTVhMWZlZWQ2OTdjMTc4ZjAxLnNldENvbnRlbnQoaHRtbF9jNTZjNjI2ZTRhMzQ0NmFiODgwYmM3NjdmMDIxMjVjZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzYyN2Q3YTc3ZWRjMjQxMjE5M2I0YjkyNDNmNzU3ZjMyLmJpbmRQb3B1cChwb3B1cF85NzhhOTVhYTg4ZjQ0MzU1YTFmZWVkNjk3YzE3OGYwMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2I1Y2FkNmI4MjMzNjQ3ZjdhMzA3MjEzOWMxYmYzZTczID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzkzMjg3LC0xMjIuMzk1NzJdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8zZmIyYTZjN2RkZDQ0N2I3OThhNzQ5NjIxNDYwOTIzNiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYjVjYWQ2YjgyMzM2NDdmN2EzMDcyMTM5YzFiZjNlNzMuc2V0SWNvbihpY29uXzNmYjJhNmM3ZGRkNDQ3Yjc5OGE3NDk2MjE0NjA5MjM2KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTg2NzQ1OTA5MjA0NGRlZDhlNDQwYzBlODRhNmZmYmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTA2NzA5NzdiZGFmNGJmYWJjNjcxYzlmYmY4NDBjMjMgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzUwNjcwOTc3YmRhZjRiZmFiYzY3MWM5ZmJmODQwYzIzIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBPbmUgTWFya2V0IEZvb2QgQ291cnQ6ICAJSGkgdGhlcmUuIFdlIHdlcmUgYm90aCBlYXRpbmcgbHVuY2ggdG9kYXksIGVhY2ggd2l0aCBhIGNvLXdvcmtlciBvciBmcmllbmQuIFlvdSBjYXVnaHQgbWUgZ2xhbmNpbmcgYXQgeW91IGEgZmV3IHRpbWVzIGFuZCBtYXliZSBJIGNhdWdodCB5b3UgZ2xhbmNpbmcgYmFjay4gSWYgeW91IHdlcmUgYnkgeW91cnNlbGYgSSB3b3VsZCBoYXZlIHNhaWQgaGVsbG8uIEkgZmVlbCBhIGxpdHRsZSBzaWxseSBidXQgdGhlcmUgZGVmaW5pdGVseSBzZWVtZWQgdG8gYmUgc29tZSBlbGVjdHJpY2l0eSB0aGVyZS4gRG9lcyB0aGlzIHNvdW5kIGxpa2UgeW91PyBJIGFtIHVzdWFsbHkgdGhlcmUgMSBvciAyIHRpbWVzIGEgd2Vlay4gSG9wZSB0byBzZWUgeW91IGFnYWluITwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hODY3NDU5MDkyMDQ0ZGVkOGU0NDBjMGU4NGE2ZmZiZS5zZXRDb250ZW50KGh0bWxfNTA2NzA5NzdiZGFmNGJmYWJjNjcxYzlmYmY4NDBjMjMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iNWNhZDZiODIzMzY0N2Y3YTMwNzIxMzljMWJmM2U3My5iaW5kUG9wdXAocG9wdXBfYTg2NzQ1OTA5MjA0NGRlZDhlNDQwYzBlODRhNmZmYmUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85YWE2YzcxYzg0Mjg0ODI3OTQ1MmY5YjQxNTlmMDk1MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4Mzc4NSwtMTIyLjM5ODkzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOGU0ZTQ1NzIyODc1NDI4ZThmNDY5ZDJhN2Y2ZWVhZGUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzlhYTZjNzFjODQyODQ4Mjc5NDUyZjliNDE1OWYwOTUzLnNldEljb24oaWNvbl84ZTRlNDU3MjI4NzU0MjhlOGY0NjlkMmE3ZjZlZWFkZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I1ZjY2N2M0ZjI5ZjRkODBiNjQ1MjVkYjRjNTdlYzdjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JjMDlhNzY3ZjZiNjQzYzE4ZGM1NzlmOGEyMTJjYzllID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9iYzA5YTc2N2Y2YjY0M2MxOGRjNTc5ZjhhMjEyY2M5ZSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSW5kaWFuIFJlc3RhdXJhbnQgM3JkIFN0IC0gVHVlc2RheSBwbTogIAlZb3UgY2FtZSBpbiBieSB5b3Vyc2VsZiBvbiBUdWVzZGF5IGFmdGVybm9vbi4gSSB3YXMgYWxyZWFkeSB0aGVyZSB3aXRoIHR3byAmIzM5O2NvbXBhbmlvbnMmIzM5Oy4gWW91IGFyZSBzbyBiZWF1dGlmdWwsIHZlcnkgZ3JhY2VmdWwgYW5kIGhhdmUgYSBsb3ZlbHkgc21pbGUuIEkgY2FuJiMzOTt0IHN0b3AgdGhpbmtpbmcgYWJvdXQgeW91LjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iNWY2NjdjNGYyOWY0ZDgwYjY0NTI1ZGI0YzU3ZWM3Yy5zZXRDb250ZW50KGh0bWxfYmMwOWE3NjdmNmI2NDNjMThkYzU3OWY4YTIxMmNjOWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl85YWE2YzcxYzg0Mjg0ODI3OTQ1MmY5YjQxNTlmMDk1My5iaW5kUG9wdXAocG9wdXBfYjVmNjY3YzRmMjlmNGQ4MGI2NDUyNWRiNGM1N2VjN2MpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85ZTM1ZTFlYmQ2MTY0ZDY0YmU4MDMzMDcwNWZmZGM4MiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NzY3NCwtMTIyLjQwMzQ0NV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzJlMzFkYTVhMTVjNzQ3ODViOTIwMjExNjhjMGI0MDU4ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl85ZTM1ZTFlYmQ2MTY0ZDY0YmU4MDMzMDcwNWZmZGM4Mi5zZXRJY29uKGljb25fMmUzMWRhNWExNWM3NDc4NWI5MjAyMTE2OGMwYjQwNTgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85MTNmMzdmMjI3Y2E0MzczYTJlM2MwOTQyYzQzM2ZjNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85MDU4MjAyMDYxMTY0NTExOWNjMTgxZmEwYjM0N2RjNiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOTA1ODIwMjA2MTE2NDUxMTljYzE4MWZhMGIzNDdkYzYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFlvdSBpbnRlcnZpZXdlZCBtZSB0b2RheS4uLjogIAlUaGlzIGlzIGEgdG90YWwgc2hvdCBpbiB0aGUgZGFyaywgYnV0IHlvdSBpbnRlcnZpZXdlZCBtZSB0b2RheSBmb3IgYSBwcm9qZWN0LiBJIHdhbnRlZCB0byBzYXkgaXQgd2FzIGdyZWF0IHRhbGtpbmcgd2l0aCB5b3UhIEkgcmVhbGl6ZSB5b3UganVzdCBuZWVkZWQgc29tZW9uZSB0byBpbnRlcnZpZXcsIGJ1dCBJIHdhbnRlZCB0byBrbm93IGlmIHlvdSB3YW50ZWQgdG8gdGFsayBtb3JlIG92ZXIgc29tZSBjb2ZmZWUuIEkmIzM5O20gaW4gdG93biBmb3Igb25lIG1vcmUgZGF5LCBpdCB3b3VsZCBiZSBncmVhdCB0byBnZXQgdG8ga25vdyB5b3UgYSBsaXR0bGUgYmV0dGVyLCBhbmQgaGVhciBhYm91dCB3aGF0IHlvdXIgZnV0dXJlIHBsYW5zIGFyZSBub3cgdGhhdCB5b3UgZ3JhZHVhdGVkIDopPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzkxM2YzN2YyMjdjYTQzNzNhMmUzYzA5NDJjNDMzZmM3LnNldENvbnRlbnQoaHRtbF85MDU4MjAyMDYxMTY0NTExOWNjMTgxZmEwYjM0N2RjNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzllMzVlMWViZDYxNjRkNjRiZTgwMzMwNzA1ZmZkYzgyLmJpbmRQb3B1cChwb3B1cF85MTNmMzdmMjI3Y2E0MzczYTJlM2MwOTQyYzQzM2ZjNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2RlNDJkMzM3MTFjOTRhNGE4NzViYzA4YWY1OTYxODZlID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzYyMSwtMTIyLjM5NzFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9lNDA3MzAxYzE3YTE0YWQyYmEyZmYwYWRmNTQ3ZmFlMiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZGU0MmQzMzcxMWM5NGE0YTg3NWJjMDhhZjU5NjE4NmUuc2V0SWNvbihpY29uX2U0MDczMDFjMTdhMTRhZDJiYTJmZjBhZGY1NDdmYWUyKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDAwMjZkMDdkZGE2NDY3YmEwMGE3YTQ3NjU1Mzg1NDEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjA0MzI4ZTE1N2Q3NDI2MDhmM2VkZmQyNWEzNGZiOGEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2YwNDMyOGUxNTdkNzQyNjA4ZjNlZGZkMjVhMzRmYjhhIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAqQVNJQU4gV09NQU4gRk9SIE1VVFVBTCBQQU1QRVJJTkc6ICAJUGxlYXNlIHB1dCBQQU1QRVIgaW4gdGhlIFN1YmplY3QgTGluZSB0byB3ZWVkIG91dCB0aGUgU1BBTSwgdGhhbmtzIFdpbGwgbm90IHJlc3BvbmQgdG8gZ2VlIG1hbGUgYWNjb3VudHMsIGxpbmtzIHRvIG90aGVyIHNpdGVzIG9yIHJlc3BvbnNlcyB3aXRob3V0IHBob3RvcyBJJiMzOTttIGxvb2tpbmcgZm9yIGFuIGF0dHJhY3RpdmUsIGZpdCwgeW91dGhmdWwgYXNpYW4gd29tYW4sIGFwcHJveGltYXRlbHkgMjEtNDBpc2gpIGZvciBvY2Nhc2lvbmFsIGdldCB0b2dldGhlcnMsIGludGltYXRlIGFuZCBzb2NpYWwuIEEgZnJpZW5kcyB3aXRoIGJlbmVmaXRzLCBOU0EgYXJyYW5nZW1lbnQgdGhhdCBzaG91bGQgYmVuZWZpdCB1cyBib3RoLiBNZTogVGFsbCwgZml0LCBhdHRyYWN0aXZlLCBsZWFuLCBzbW9vdGgsIG1hdHVyZSwgZW5lcmdldGljIG1hbiA6KSBQTEVBU0UgUFVUICYjMzQ7UGFtcGVyJiMzNDsgSU4gVEhFIFNVQkpFQ1QgTElORSBUTyBHRVQgQSBSRVNQT05TRS4gQ2FuIHRyYXZlbCBvciBob3N0IGZvciB0aGUgcmlnaHQgcGVyc29uLiBQSE9UTyBhbmQgU1RBVFMgYSBtdXN0LiAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIE5PVCBMT09LSU5HIEZPUiBBIFBSTywgVEhBTksgWU9VLCBhbmQgU1BBTU1FUlMgQVNLSU5HIE1FIFRPIFdSSVRFIFRPIFRIRUlSIFBFUlNPTkFMIEUtTUFJTFMgV0lMTCBHRVQgREVMRVRFRC48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDAwMjZkMDdkZGE2NDY3YmEwMGE3YTQ3NjU1Mzg1NDEuc2V0Q29udGVudChodG1sX2YwNDMyOGUxNTdkNzQyNjA4ZjNlZGZkMjVhMzRmYjhhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfZGU0MmQzMzcxMWM5NGE0YTg3NWJjMDhhZjU5NjE4NmUuYmluZFBvcHVwKHBvcHVwX2QwMDI2ZDA3ZGRhNjQ2N2JhMDBhN2E0NzY1NTM4NTQxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYTc0N2EzNjMwMWY2NDk0NWFiNzU3ZTMyYmJiMDFmMTggPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NjM5MywtMTIyLjQ2NjMxNl0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzc4NWNmYzM5NzhjOTQ2Mzg5NTllYTMxMzI1OGJhZDYzID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9hNzQ3YTM2MzAxZjY0OTQ1YWI3NTdlMzJiYmIwMWYxOC5zZXRJY29uKGljb25fNzg1Y2ZjMzk3OGM5NDYzODk1OWVhMzEzMjU4YmFkNjMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zOGJiNWIzZTY5Mjg0NGQ3YTM5N2ViNTY1MDM2YTZiMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82MzQ5NzlkYzViMzg0OTA2ODFiNjM0MjMyMmI1MGJlZCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNjM0OTc5ZGM1YjM4NDkwNjgxYjYzNDIzMjJiNTBiZWQiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFN0YXJidWNrcyBhdCBJcnZpbmcvOXRoIC0gU3VuZGF5IDcvMTA6ICAJRXhjaGFuZ2VkIG11bHRpcGxlIGxvb2tzIHdpdGggeW91IGF0IFN0YXJidWNrcyBvbiBJcnZpbmcgb24gU3VuZGF5IGFmdGVybm9vbi4gSG93IGNhbiBJIG5vdCBsb29rIC0geW91JiMzOTtyZSB2ZXJ5IGhhbmRzb21lLiBJIGhvcGUgeW91IHdlcmUgbG9va2luZyBhdCBtZSB0b28sIGFuZCBub3QganVzdCB3b25kZXJpbmcgd2hhdCB3YXMgZ29pbmcgb24hPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM4YmI1YjNlNjkyODQ0ZDdhMzk3ZWI1NjUwMzZhNmIyLnNldENvbnRlbnQoaHRtbF82MzQ5NzlkYzViMzg0OTA2ODFiNjM0MjMyMmI1MGJlZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2E3NDdhMzYzMDFmNjQ5NDVhYjc1N2UzMmJiYjAxZjE4LmJpbmRQb3B1cChwb3B1cF8zOGJiNWIzZTY5Mjg0NGQ3YTM5N2ViNTY1MDM2YTZiMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzFiNzgwYTU0MjUyZDQ1N2RhODFjNmI2MzYwYjI1OWQ0ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzU4NywtMTIyLjQzM10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzRlOTAzNzkwY2MzZjQxMzBhYWJiNjljODUwYzEyODhkID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xYjc4MGE1NDI1MmQ0NTdkYTgxYzZiNjM2MGIyNTlkNC5zZXRJY29uKGljb25fNGU5MDM3OTBjYzNmNDEzMGFhYmI2OWM4NTBjMTI4OGQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85ZTIzNjFmOWFlYzQ0MTY5OTE2ZTRhNzA3NTI2YzUyYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yMWZlYmZmMjJlNjI0NDllYmYzMTA2ZGYwYTMxYWZhMiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMjFmZWJmZjIyZTYyNDQ5ZWJmMzEwNmRmMGEzMWFmYTIiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIE10LiBIYW1pbHRvbjogIAlCbHVlIC0gSSB3YXMgc28gYXR0cmFjdGVkIHRvIHlvdSEgU3VuZGF5IE1heSAyOSAyMDE2IEkgZG9uJiMzOTt0IGNhcmUgYWJvdXQgYW55dGhpbmcgZWxzZSBpZiB5b3UgY2FuIG1ha2UgdGltZSB0byByaWRlIG9uY2UgaW4gYSB3aGlsZS4gSXQgY291bGQgYmUgZnVuLjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85ZTIzNjFmOWFlYzQ0MTY5OTE2ZTRhNzA3NTI2YzUyYS5zZXRDb250ZW50KGh0bWxfMjFmZWJmZjIyZTYyNDQ5ZWJmMzEwNmRmMGEzMWFmYTIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8xYjc4MGE1NDI1MmQ0NTdkYTgxYzZiNjM2MGIyNTlkNC5iaW5kUG9wdXAocG9wdXBfOWUyMzYxZjlhZWM0NDE2OTkxNmU0YTcwNzUyNmM1MmEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl84NWNhZjY0MTczZjg0NzRkOTc3NTViZTNhYmFmMTdkYSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc2NjAzMywtMTIyLjQzMTI5N10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzg4NWE2OTkzZjFkOTRiMDJiYzUwYmNjOWFhYjNiNTlhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl84NWNhZjY0MTczZjg0NzRkOTc3NTViZTNhYmFmMTdkYS5zZXRJY29uKGljb25fODg1YTY5OTNmMWQ5NGIwMmJjNTBiY2M5YWFiM2I1OWEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wMDI3MTdhZjBmN2E0YTQzYTk1MDE3MzNmMzc2NmE4NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mYTI5MGE1NWYzZGY0NzkzOGU4Mjk2MWFkYWFmNjRkMyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZmEyOTBhNTVmM2RmNDc5MzhlODI5NjFhZGFhZjY0ZDMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEtpbmRsZSByZWFkZXIgYXQgQnJld2NhZGU6ICAJSSYjMzk7bSBzdXJlIHlvdSB3b24mIzM5O3QgcmVhZCB0aGlzLiBZb3Ugd2VyZSByZWFkaW5nIGEgS2luZGxlIGF0IEJyZXdjYWRlLiBZb3UgZmluaXNoZWQgb25lIGJvb2sgYW5kIHN0YXJ0ZWQgYW5vdGhlci4gSSBhbSBmdWxsIHRvIHRoZSBicmltIHdpdGggcXVlc3Rpb25zLiBEaWQgdGhlIDIxIHllYXIgb2xkIGV2ZXIgZmluZCBoaXMgdGVxdWlsYSBzaG90cz8gQWxzbyBLaW5kbGUgaXMgYSBoaWxhcmlvdXMgbmFtZSBmb3IgYSBkZXZpY2UgY29udGFpbmluZyBib29rcy48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMDAyNzE3YWYwZjdhNGE0M2E5NTAxNzMzZjM3NjZhODYuc2V0Q29udGVudChodG1sX2ZhMjkwYTU1ZjNkZjQ3OTM4ZTgyOTYxYWRhYWY2NGQzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfODVjYWY2NDE3M2Y4NDc0ZDk3NzU1YmUzYWJhZjE3ZGEuYmluZFBvcHVwKHBvcHVwXzAwMjcxN2FmMGY3YTRhNDNhOTUwMTczM2YzNzY2YTg2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfODFhNzBlYjA2ZDQ4NGMxY2EwOTQwZDhlZjZkZGNjNjEgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NTA5LC0xMjIuNDE1M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzY4NzFiZTE2ZjlmYzQyNmFiMDUyZmYxYjg2NjhlNGVjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl84MWE3MGViMDZkNDg0YzFjYTA5NDBkOGVmNmRkY2M2MS5zZXRJY29uKGljb25fNjg3MWJlMTZmOWZjNDI2YWIwNTJmZjFiODY2OGU0ZWMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yYzcxNDk1OTQ0ODQ0NDNmODEyMjZhN2FhZGMxOTg4MCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOTM3YjM1ZmJmZGQ0MDY2OGIxMTQwZjNiYzBiNWFhZiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMjkzN2IzNWZiZmRkNDA2NjhiMTE0MGYzYmMwYjVhYWYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICM2IGJ1cy0ycG0tbW9uLWFsbCBibGsgY2xvdGhlcy11Y3NmOiAgCXUgdGFsbCBicm8gaW4gYWxsIGJsYWNrIGNsb3RoZXMgc2l0dGluZyBuZWFyIGV4aXQgZG9vciBsb29raW5nIGF0IG1lIHdlYXJpbmcgcmVkL2JsYWNrIHdpdGggYmFja3BhY2suIFRlbGwgbWUgdGhlIGxvZ28gb24gYmFja3BhY2sgc28gSSBrbm93IGl0cyB1Li4uLmhtdTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yYzcxNDk1OTQ0ODQ0NDNmODEyMjZhN2FhZGMxOTg4MC5zZXRDb250ZW50KGh0bWxfMjkzN2IzNWZiZmRkNDA2NjhiMTE0MGYzYmMwYjVhYWYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl84MWE3MGViMDZkNDg0YzFjYTA5NDBkOGVmNmRkY2M2MS5iaW5kUG9wdXAocG9wdXBfMmM3MTQ5NTk0NDg0NDQzZjgxMjI2YTdhYWRjMTk4ODApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9kN2RiYWZjMzY1MTY0ZjI0YjQ1ODViNmIwYmQ4MzhkOCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc1MDksLTEyMi40MTUzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMWNiZjZjM2JjYjg1NGQxZmJkNzhmMGEzNmQzMTlkMTggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Q3ZGJhZmMzNjUxNjRmMjRiNDU4NWI2YjBiZDgzOGQ4LnNldEljb24oaWNvbl8xY2JmNmMzYmNiODU0ZDFmYmQ3OGYwYTM2ZDMxOWQxOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNhYTJmYjlhMmMwNDRjZjZhMTJjNTlmYTk5MjE4YzAzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzZkZjhhYmM3M2Y5ODQ4ZWI5NzkzMzhkNTNmMjU3YzU5ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF82ZGY4YWJjNzNmOTg0OGViOTc5MzM4ZDUzZjI1N2M1OSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgQ3V0ZSBndXkgd2l0aCB0aGUgc2hpdC1lYXRpbmcgZ3JpbjogIAlJJiMzOTt2ZSBzZWVuIHlvdSBhIGZldyB0aW1lcyBhdCBab2UmIzM5O3MuIFlvdSYjMzk7cmUgY3V0ZSBhbmQgZmFtaWxpYXIgaW4gYSB3YXkgYW5kIHlvdSBzYXkgam9rZXMsIEkgdGhpbmsuIEkgY29tZSBpbiBhbG9uZSBsaWtlIGEgd2VpcmQgc3RhbGtlciBidXQgdGhhdCYjMzk7cyBqdXN0IGJlY2F1c2UgSSBkb24mIzM5O3QgaGF2ZSBhbnkgZnJpZW5kcy4gU2F5IGhpIG5leHQgdGltZSA6KSBPaCBhbmQgSSYjMzk7bSBhIGdpcmwgYW5kIEkgaGF2ZSByZWQgaGFpci48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfM2FhMmZiOWEyYzA0NGNmNmExMmM1OWZhOTkyMThjMDMuc2V0Q29udGVudChodG1sXzZkZjhhYmM3M2Y5ODQ4ZWI5NzkzMzhkNTNmMjU3YzU5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfZDdkYmFmYzM2NTE2NGYyNGI0NTg1YjZiMGJkODM4ZDguYmluZFBvcHVwKHBvcHVwXzNhYTJmYjlhMmMwNDRjZjZhMTJjNTlmYTk5MjE4YzAzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMjYwNTZiMTFlOTUxNGI2ZjhjMDI0OTczNDhjOGY0ZjMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NTA5LC0xMjIuNDE1M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2RiOGI0OGM2ZWNjZTQ2NjRhYmIyNmQ0Y2U3ODQxNzhkID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8yNjA1NmIxMWU5NTE0YjZmOGMwMjQ5NzM0OGM4ZjRmMy5zZXRJY29uKGljb25fZGI4YjQ4YzZlY2NlNDY2NGFiYjI2ZDRjZTc4NDE3OGQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zYjJiY2QxYmEyNzM0ZjZiOWZiOTEwYTJjMTc4NDZhMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yYWVlZjcxMmRlZmQ0ZDIwOTAyZWY1ZjU0ZmIxODE2OCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMmFlZWY3MTJkZWZkNGQyMDkwMmVmNWY1NGZiMTgxNjgiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFRhbGwgd2hpdGUgbG9va2luZyBKb2huIGZyb20gTmljYXJhZ3VhL0Nvc3RhIFJpY2EgYXQgQ0NTRjogIAlEZWFyIEpvaG4sIEkgbWV0IHlvdSAyIG1vbnRocyBhdCB0aGUgaGFsbHdheSBvZiB0aGUgVmFsZW5jaWEgY2l0eSBjb2xsZWdlLiBJIGdvdCBzdXBlciBuZXJ2b3VzIGNhdXNlIHlvdSB3ZXJlIHNvIGN1dGUgYW5kIEkgcmFuIG9mZiB3aGVuIHlvdSBhc2tlZCBmb3IgbXkgbnVtYmVyLiBJIGtpbmQgb2Ygd2lzaCBJIGdvdCB5b3VyIGxhc3QgbmFtZSBvciBudW1iZXIgb3Igc29tZXRoaW5nIGluc3RlYWQgY2F1c2UgSSB0aG91Z2h0IGl0IHdhcyByZWFsbHkgZnVubnkgaG93IHlvdSBzYWlkIHBlb3BsZSBmcmVhayBvdXQgd2hlbiB5b3Ugc3BlYWsgU3BhbmlzaCBmbHVlbnRseS4gSSBsaWtlIHRoZSBmdW5uaWVzIGFuZCB0aGUgam9rZXMuIEFuZCBJJiMzOTttIHRyeWluZyB0byBnbyBiYWNrIHRvIE5pY2FyYWd1YSBmb3IgMiB3ZWVrcyB0aGlzIHN1bW1lci4gSSBob3BlIHlvdSBmaW5kIHRoaXMgc29tZWhvdy4gLUFuZ2VsYSBEb3JreSBBc2lhbiBnaXJsIHRha2luZyBTcGFuaXNoPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNiMmJjZDFiYTI3MzRmNmI5ZmI5MTBhMmMxNzg0NmEyLnNldENvbnRlbnQoaHRtbF8yYWVlZjcxMmRlZmQ0ZDIwOTAyZWY1ZjU0ZmIxODE2OCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzI2MDU2YjExZTk1MTRiNmY4YzAyNDk3MzQ4YzhmNGYzLmJpbmRQb3B1cChwb3B1cF8zYjJiY2QxYmEyNzM0ZjZiOWZiOTEwYTJjMTc4NDZhMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzU5N2ExZDQ3MjA0ZTQ2OWE5ZWRiNWE0MDdhMGIzNTMyID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzkxNywtMTIyLjQxODZdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl84YzUyZjM4MGU0OGM0NWYwYTkxNzYzZDhjM2NlN2FhZCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNTk3YTFkNDcyMDRlNDY5YTllZGI1YTQwN2EwYjM1MzIuc2V0SWNvbihpY29uXzhjNTJmMzgwZTQ4YzQ1ZjBhOTE3NjNkOGMzY2U3YWFkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZGVmYjhhMzBhM2M3NDBhYmJkZjYxODMzMmI0ZDMwOGYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzMzODBkYmUzYTA0NDljMTkyNWZlOTliN2RjOGY4MjkgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzczMzgwZGJlM2EwNDQ5YzE5MjVmZTk5YjdkYzhmODI5IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBIeWRlIGFuZCBTYWNyYW1lbnRvLCA5OjEwIHBtLjogIAlXZSBjcm9zc2VkIHRoZSBpbnRlcnNlY3Rpb24gdG9nZXRoZXIgYW5kIHlvdSBhc2tlZCBob3cgbXkgbmlnaHQgd2FzIGdvaW5nIGFuZCBpZiBJIGxpdmVkIGluIHRoZSBuZWlnaGJvcmhvb2QuIFdlIG91Z2h0YSBtYXliZSBjb250aW51ZSB0aGUgY29udmVyc2F0aW9uIGF0IGdyZWF0ZXIgbGVuZ3RoIGlzIHdoYXQgSSYjMzk7bSB0aGlua2luZy48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGVmYjhhMzBhM2M3NDBhYmJkZjYxODMzMmI0ZDMwOGYuc2V0Q29udGVudChodG1sXzczMzgwZGJlM2EwNDQ5YzE5MjVmZTk5YjdkYzhmODI5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNTk3YTFkNDcyMDRlNDY5YTllZGI1YTQwN2EwYjM1MzIuYmluZFBvcHVwKHBvcHVwX2RlZmI4YTMwYTNjNzQwYWJiZGY2MTgzMzJiNGQzMDhmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMzdiOTA1NTBkM2E0NDgwYjkwMGEzNzlmYjhjYjFhYmUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODE5NDIsLTEyMi40NDY5MThdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85Zjc5YzgwMmZmMDU0YWZhYjQyMTgyMDJmYjQ3YmFhOCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMzdiOTA1NTBkM2E0NDgwYjkwMGEzNzlmYjhjYjFhYmUuc2V0SWNvbihpY29uXzlmNzljODAyZmYwNTRhZmFiNDIxODIwMmZiNDdiYWE4KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzg4ZTU2NmFkNTdlNGYyOGEwZjM4NTEyNzY2ZWM2MTggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2Q0ZTZmMjc1OTRkNDBkZGI2MmZjZWZhMjIwYTI1ZjggPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzdkNGU2ZjI3NTk0ZDQwZGRiNjJmY2VmYTIyMGEyNWY4IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBUYXJnZXQgZ2FtZSBpc2xlOiAgCVlvdSBhbG1vc3QgcmFuIGludG8gbWUgYSBUYXJnZXQgd2hpbGUgSSB3YXMgc2VhcmNoaW5nIGZvciBCb2dnbGUuIFlvdSB0aGVuIHByb2NlZWRlZCB0byBtb2NrIHRoZSBsYWR5IHdobyBjb3VsZG4mIzM5O3Qgc2VlbSB0byBzdG9wIHRhbGtpbmcuIEkgZGlnIHlvdXIgc3R5bGUuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzc4OGU1NjZhZDU3ZTRmMjhhMGYzODUxMjc2NmVjNjE4LnNldENvbnRlbnQoaHRtbF83ZDRlNmYyNzU5NGQ0MGRkYjYyZmNlZmEyMjBhMjVmOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzM3YjkwNTUwZDNhNDQ4MGI5MDBhMzc5ZmI4Y2IxYWJlLmJpbmRQb3B1cChwb3B1cF83ODhlNTY2YWQ1N2U0ZjI4YTBmMzg1MTI3NjZlYzYxOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzkzYmM4NmQzNjhhNzQ2NDc5MWY4ODEwMmVmYTViMjg4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzUwOSwtMTIyLjQxNTNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9iZjM5YmNmNWRmMjI0ZTAxYjkxMDA5ZTY3NjBiNGZmZiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfOTNiYzg2ZDM2OGE3NDY0NzkxZjg4MTAyZWZhNWIyODguc2V0SWNvbihpY29uX2JmMzliY2Y1ZGYyMjRlMDFiOTEwMDllNjc2MGI0ZmZmKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfM2FhNDM4ZWNhZGRhNDZiNzg5ZGViZGMyMGE3YTI4ZDQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODQ0YTVjMWZlYTFhNDE3MThmOGU2ODdjZjYxMWM2ZWMgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzg0NGE1YzFmZWExYTQxNzE4ZjhlNjg3Y2Y2MTFjNmVjIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBNaXNzaW9uIENsaWZmcyAtIEd1eSB3aXRoIHRoZSBIZWFydCBUYXR0b286ICAJSGV5IHRoZXJlLiBXZSBtZXQgdXAgaW4gdGhlIHN0ZWFtIHJvb20gYXQgTWlzc2lvbiBDbGlmZnMuIEkgaGF2ZSB0aGUgJiMzNDtpbmNoJiMzNDsgdGF0dG9vIGFuZCB5b3UgaGF2ZSB0aGUgJiMzNDtoZWFydCYjMzQ7LiBXZSBjb25uZWN0ZWQgaW4gdGhlIHNob3dlcnMgYW5kIGRhbW4gd2FzIHRoYXQgZnVuLiBIaXQgbWUgdXAgaWYgeW91IHdhbm5hIGNsaW1iIHRvZ2V0aGVyIG9yIGhhbmcuICYjMzQ7PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNhYTQzOGVjYWRkYTQ2Yjc4OWRlYmRjMjBhN2EyOGQ0LnNldENvbnRlbnQoaHRtbF84NDRhNWMxZmVhMWE0MTcxOGY4ZTY4N2NmNjExYzZlYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzkzYmM4NmQzNjhhNzQ2NDc5MWY4ODEwMmVmYTViMjg4LmJpbmRQb3B1cChwb3B1cF8zYWE0MzhlY2FkZGE0NmI3ODlkZWJkYzIwYTdhMjhkNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2JhYmU2NmJmYTQ4YzRkMjRhMjdlMTM0ZmQzMjFkNzIwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzQ1LC0xMjIuNDM4M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2M4YTBkZjJhMDY2OTRjYzlhNTIxYzEyNDBiOTNiZmY2ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9iYWJlNjZiZmE0OGM0ZDI0YTI3ZTEzNGZkMzIxZDcyMC5zZXRJY29uKGljb25fYzhhMGRmMmEwNjY5NGNjOWE1MjFjMTI0MGI5M2JmZjYpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yNDZkNGNhZmQ3M2U0YmEyODRlN2UyZWI3ZWNmM2ZiMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iMGNhN2QwYmU0Njk0MWU2YWI3MDhkN2VlMzA4ZDdkYyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYjBjYTdkMGJlNDY5NDFlNmFiNzA4ZDdlZTMwOGQ3ZGMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEN1dGUgZ3V5IG9uIDI0IGRpdmlzYWRlcm8gYnVzOiAgCUhleSBJIHdhcyBsb29raW5nIGF0IHlvdSwgeW91IG1pZ2h0IGhhdmUgYmVlbiBsb29raW5nIGF0IG1lLCBsaWNraW5nIHlvdXIgbGlwcywgZXRjLiB0ZWxsIG1lIHdoYXQgSSBsb29rZWQgbGlrZS4gVGhpcyB3YXMgYWJvdXQgNzowMCBQTSBvbiBNb25kYXkuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzI0NmQ0Y2FmZDczZTRiYTI4NGU3ZTJlYjdlY2YzZmIzLnNldENvbnRlbnQoaHRtbF9iMGNhN2QwYmU0Njk0MWU2YWI3MDhkN2VlMzA4ZDdkYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2JhYmU2NmJmYTQ4YzRkMjRhMjdlMTM0ZmQzMjFkNzIwLmJpbmRQb3B1cChwb3B1cF8yNDZkNGNhZmQ3M2U0YmEyODRlN2UyZWI3ZWNmM2ZiMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzQ1NmQ2OGIwYzBjNDQ5ZjQ4ZDdlNGJhYWQzNGM2MzY1ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuMzg5MywtMTIyLjA3ODNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl81NDUyYmIzYjVkMTc0MmMxYmIxMmUwYjIzZjgxOTBkYiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNDU2ZDY4YjBjMGM0NDlmNDhkN2U0YmFhZDM0YzYzNjUuc2V0SWNvbihpY29uXzU0NTJiYjNiNWQxNzQyYzFiYjEyZTBiMjNmODE5MGRiKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmMyZWE5NzEwNWIzNGNiMDgwZmY4MDkwZjk3YWMzOWQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmVjMTllYjUxMjFkNGE1MjgxODdjNzMxOWM1NTE2NDEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzJlYzE5ZWI1MTIxZDRhNTI4MTg3YzczMTljNTUxNjQxIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBQYWNpZmljYSAyNCBIUiBGaXRuZXNzOiAgCUhleSBoYW5kc29tZSBndXksIFlvdSB3ZXJlIHdvcmtpbmcgb3V0IHllc3RlcmRheSBhcm91bmQgNDo0NSBwLm0uIG9uIHRoZSBjaGluIHVwIG1hY2hpbmUgYW5kIHdvcmtpbmcgb3V0IG9uIHRoZSBncm91bmQgZG9pbmcgc29tZSBwdWxsIHVwIHB1c2ggdXBzIHdpdGggd2VpZ2h0cy4gWW91IHdlcmUgdmVyeSBob3QgYW5kIGhhbmRzb21lLiBJIHdhbnRlZCB0byBhc2sgaWYgeW91IHdlcmUgd2FudGluZyBzb21lIGhlbHAgd2l0aCB0aG9zZSB3ZWlnaHMuIExvbC4gWW91IGFyZSBidWlsdCB2ZXJ5IHdlbGwsIHlvdSBoYXZlIGJsYWNrIGhhaXIgdmVyeSBoYW5kc29tZSBleWVzLCBJIGhhcmRseSBldmVyIHBvc3Qgb24gaGVyZS4gQnV0IGlmIHlvdSByZW1lbWJlciBtZSBpJiMzOTtkIGJlIGRvd24gdG8gbWVldCBhbmQgZ3JlZXQuIDopJmFtcDtndDs8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmMyZWE5NzEwNWIzNGNiMDgwZmY4MDkwZjk3YWMzOWQuc2V0Q29udGVudChodG1sXzJlYzE5ZWI1MTIxZDRhNTI4MTg3YzczMTljNTUxNjQxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNDU2ZDY4YjBjMGM0NDlmNDhkN2U0YmFhZDM0YzYzNjUuYmluZFBvcHVwKHBvcHVwX2ZjMmVhOTcxMDViMzRjYjA4MGZmODA5MGY5N2FjMzlkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfOWY1ZmVlZjE5NTcyNDgyNmE5NWY2NThkYTAxYTM1OGMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43OTE4NzEsLTEyMi40MDE3ODJdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl83MDA1NDE1Y2EzNWY0M2E5YmNlNzdjNmJhZTc2ZWVmYyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfOWY1ZmVlZjE5NTcyNDgyNmE5NWY2NThkYTAxYTM1OGMuc2V0SWNvbihpY29uXzcwMDU0MTVjYTM1ZjQzYTliY2U3N2M2YmFlNzZlZWZjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfY2UyYTEzZDFmNTg0NGMwYTlkYmVjMTg1NzljMWQ5N2IgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmM2ZDczNzA4NzRmNDYzNjg1ZjMzMjRiZGRhYWZlNzYgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzJjNmQ3MzcwODc0ZjQ2MzY4NWYzMzI0YmRkYWFmZTc2IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBXZSBib3RoIHNhdyBhIG1hbiByZWxpZXZpbmcgaGltc2VsZiBvbiBhIGNvcm5lciBuZWFyIFNwZWNpYWx0eSYjMzk7cy4uLjogIAlQcmV0dHkgc2VsZiBleHBsYW5hdG9yeSwgcHJvYmFibHkgdW5mb3J0dW5hdGVseSBub3QgYSByYXJlIHRoaW5nIGluIHMuZi4gbm93YWRheXMgYnV0IEkgc3RpbGwgY291bGRuJiMzOTt0IGJlbGlldmUgaXQgYW5kIGhhZCB0byB0cnkgYW5kIHJlYXNzdXJlIG15c2VsZiB0aGlzIHdhcyBhbiBhYnN1cmQgZXhwZXJpZW5jZS4gRHVkZSBvbiBhIGJpa2UgaGFkIGhlYWRwaG9uZXMgaW4gYW5kIHBhc3NlZCBtZSwgdGhlbiBJIHNhdyB5b3UuIEkgc2xvd2VkIHVwIGZvciBhIHNlYyBhbmQganVhdCBjb21tZW50ZWQgdGhhdCB0aGlzIHdhcyBwcm9iYWJseSBhIHNpZ24gdGhlIGNpdHkmIzM5O3MgZ29pbmcgZG93biBoaWxsLiBZb3Ugc21pbGVkIGFuZCBzYWlkIHNvbWV0aGluZyBhbG9uZyB0aGUgbGluZXMgb2YgJiMzNDt0aGF0JiMzOTtzIGp1c3Qgd2hhdCBJIHdhcyB0aGlua2luZyYjMzQ7LCBhbmQgd2lzaGVkIG1lIGEgZ29vZCBkYXkgYXMgeW91IHR1cm5lZCBpbnRvIHlvdXIgYnVpbGRpbmcgSSBndWVzcyEgSWYgeW91JiMzOTtkIHdhbm5hIGdyYWIgY29mZmVlIG9yIGEgZHJpbmsgc29tZXRpbWUgSSYjMzk7ZCBiZSB0aHJpbGxlZCB0byBidXkgb25lIGZvciB5b3UuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2NlMmExM2QxZjU4NDRjMGE5ZGJlYzE4NTc5YzFkOTdiLnNldENvbnRlbnQoaHRtbF8yYzZkNzM3MDg3NGY0NjM2ODVmMzMyNGJkZGFhZmU3Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzlmNWZlZWYxOTU3MjQ4MjZhOTVmNjU4ZGEwMWEzNThjLmJpbmRQb3B1cChwb3B1cF9jZTJhMTNkMWY1ODQ0YzBhOWRiZWMxODU3OWMxZDk3Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2I1NDJmOWJlMzYyYTQwMjdiZWI0NGY0YjRmZjZlYWQzID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzU4NywtMTIyLjQzM10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzZmMDk1Njc4OGRjNTQ4YjdhOWVjNmJlOWVhM2U3Y2QzID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9iNTQyZjliZTM2MmE0MDI3YmViNDRmNGI0ZmY2ZWFkMy5zZXRJY29uKGljb25fNmYwOTU2Nzg4ZGM1NDhiN2E5ZWM2YmU5ZWEzZTdjZDMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mNjU0YWExYWI1ZTU0YWU5YWEzOTQyZDJkM2UzY2UyNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wNDVmMzNlN2QyNjQ0ODNhYjI2YzZiYTg3ZDg4OGVhNSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMDQ1ZjMzZTdkMjY0NDgzYWIyNmM2YmE4N2Q4ODhlYTUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEkgdGhpbmsgYWJvdXQgeW91IGFsbCB0aGUgdGltZS46ICAJSXQmIzM5O3MgYmVlbiBvdmVyIDExIG1vbnRoc28gbm93IHNpbmNlIEkmIzM5O3ZlIGhlYXJkIGFueXRoaW5nIGZyb20geW91LiBUaGUgd2F5IHlvdSBlbmRlZCB0aGluZ3Mgd2FzIHdyb25nIGFuZCBjb21wbGV0ZWx5IHNlbGZpc2ggb2YgeW91LiBJIHRob3VnaHQgYmV0dGVyIG9mIHlvdSBhbmQgZXZlbiB0aG91Z2ggSSBrbm93IHdoYXQga2luZCBvZiBwZXJzb24geW91IGFyZSBJIHN0aWxsIG1pc3MgeW91IHNvIG11Y2guIFdlIGRpZG4mIzM5O3Qgc3BlbmQgYSBncmVhdCBkZWFsIG9mIHRpbWUgdG9nZXRoZXIgYnV0IHdoZW4gSSB3YXMgd2l0aCB5b3UgSSBmZWx0IGNvbm5lY3RlZCB0byB5b3UgYW5kIHNhdyBhIGRpZmZlcmVudCBwZXJzb24gdGhhbiB0aGUgb25lIHlvdXIgYWN0aW9ucyBhbmQgbGFjayB0aGVyZW9mIGxlZnQgbWUgdGhpbmtpbmcgeW91IGFyZS4gSSYjMzk7dmUgdHJpZWQgdG8gZ2V0IG92ZXIgeW91LiBJdCYjMzk7cyBiZWVuIHRoZSBoYXJkZXN0IHRoaW5nIEkmIzM5O3ZlIGV2ZXIgdHJpZWQgdG8gZG8uIEl0IGZlZWxzIGxpa2UgSSYjMzk7bSBsb3NpbmcgYSBwYXJ0IG9mIG15c2VsZi4gSSBleHRyZW1lbHkgc2FkIHdoZW4gSSB0aGluayBhYm91dCBob3cgdGhpbmdzIHdlbnQgZG93biBhbmQgbm90IGJlaW5nIHdpdGggeW91LiBJIGNhbiYjMzk7dCBzdG9wIHRoaW5raW5nIGFib3V0IHlvdS4gSSBrbm93IHlvdSBkb24mIzM5O3QgY2FyZS4gWW91ciBvbmxpbmUganVzdCBsaWtlIG5vdGhpbmcmIzM5O3MgY2hhbmdlZCBhbmQgSSYjMzk7dmUgZXZlbiBtZXQgc29tZW9uZSB5b3UgbWV0IHVwIHdpdGggcmVjZW50bHkgYW5kIHRoZXkgc2FpZCB5b3VyIGRvaW5nIGZpbmUsIGJhY2sgdG8geW91ciBvbGQgc2VsZi4gSSBndWVzcyBoYXZpbmcgc2V4IHdpdGggY291bnRsZXNzIG51bWJlcnMgb2YgbWVuIGlzIHdoYXQgeW91IHdhbnQgbW9yZSB0aGFuIGFueXRoaW5nIGVsc2Ugd2hpbGUgbG92ZSwgaW50aW1hY3ksIHRydWUgY29ubmVjdGVkbmVzcywgYW5kIHBhc3Npb24gaGF2ZSBubyBwbGFjZSBpbiB5b3VyIGxpZmUgZXhjZXB0IHdoZXJlIGl0IGVuYWJsZXMgeW91IHRvIGZ1Y2sgYW5vdGhlciBhc3Mgb3Igc3VjayBhbm90aGVyIGRpY2suIEkgZG9uJiMzOTt0IGtub3cgd2h5IEkmIzM5O20gc2F5aW5nIGFueSBvZiB0aGlzIGhlcmUgZXhjZXB0IHRvIHNheSBJIGp1c3QgbmVlZCB0byBnZXQgdGhpcyBvdXQgb2YgbXkgaGVhZC4gSSBzaG91bGQgaGF2ZSBzYXcgdGhlIHNpZ25zIGFuZCBub3QgbGlzdGVuZWQgdG8gdGhlIHRoaW5ncyB5b3Ugc2FpZCB0aGF0IHdlcmVuJiMzOTt0IHRydWUuIEkgd2FudGVkIHRvIHRydXN0IHlvdSBhbmQgSSBibGFtZSBteXNlbGYgZm9yIGFsbG93aW5nIHlvdSB0byBodXJ0IG1lLiBJIGxvdmUgeW91IGFuZCBJIGhhdGUgeW91IGJ1dCBtb3N0IG9mIGFsbCBJJiMzOTttIHNhZCBhbmQgZGVwcmVzc2VkIGFsbCB0aGUgdGltZS4gSSBzaG91bGQganVzdCBzaG9vdCBteXNlbGYgdG8gcHV0IG15c2VsZiBhbmQgdGhvc2UgYXJvdW5kIG1lIG91dCBvZiB0aGUgbWlzZXJ5IHRoYXQgSSYjMzk7dmUgYmVjb21lIGJlY2F1c2Ugb2YgeW91LiBJIGtub3cgdGhlcmUgY291bGQgbmV2ZXIgYmUgYW55IGZ1dHVyZSBmb3IgeW91IGFuZCBJLiBZb3UgbWFkZSBzdXJlIG9mIHRoYXQgYW5kIEkgaG9wZSBzb21lZGF5IHRoYXQgeW91IGdldCB0byBleHBlcmllbmNlIGFsbCB0aGUgaHVydCwgc2FkbmVzcyBhbmQgZGlzYXBwb2ludG1lbnIgdGhhdCBJIGhhdmUgc3VmZmVyZWQgdGhyb3VnaCBiZWNhdXNlIG9mIHlvdS4gWW91IGRvbiYjMzk7dCBkZXNlcnZlIGxvdmUsIGV2ZXIgZXhjZXB0IGZvciB0aGUgbG92ZSB0aGF0IHlvdSBoYXZlIGZvciB5b3Vyc2VsZiB0aGF0IG1ha2VzIHlvdSBzdWNoIGEgc2VsZmlzaCBpbmNvbnNpZGVyYXRlIHByaWNrLjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mNjU0YWExYWI1ZTU0YWU5YWEzOTQyZDJkM2UzY2UyNS5zZXRDb250ZW50KGh0bWxfMDQ1ZjMzZTdkMjY0NDgzYWIyNmM2YmE4N2Q4ODhlYTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iNTQyZjliZTM2MmE0MDI3YmViNDRmNGI0ZmY2ZWFkMy5iaW5kUG9wdXAocG9wdXBfZjY1NGFhMWFiNWU1NGFlOWFhMzk0MmQyZDNlM2NlMjUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8yOGU2OGFhNjI1NjY0YWE5OWZiZWIxNTA5MmU1Yjc5MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NTM4NCwtMTIyLjQ0MzczNV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2IxODNmZDk0MGIxZDQ1ZWQ5ODU2YzE2NjY4MTJjOWQzID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8yOGU2OGFhNjI1NjY0YWE5OWZiZWIxNTA5MmU1Yjc5My5zZXRJY29uKGljb25fYjE4M2ZkOTQwYjFkNDVlZDk4NTZjMTY2NjgxMmM5ZDMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83YWEwYTllNDkzMjk0YjcwODljYjFlN2I0Nzk0ZDI4YyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80ZDRhMzFmZDc0MWY0Nzg0YTczNDhjNzE1Mzc2NGFjMyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNGQ0YTMxZmQ3NDFmNDc4NGE3MzQ4YzcxNTM3NjRhYzMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFR3byB5ZWFycyBhZ28gd2UgbWV0IHVwIG9mZiBhIHBvc3QgSSBkaWQgb24gY3JhaWdzbGlzdCAtIG00dDogIAlZb3UgcmVzcG9uZGVkIHRvIG15IHBvc3Qgd2l0aCB5b3UgbnVtYmVyLiBJIGdvdCBhbiBVYmVyIHRvIHlvdXIgYXBhcnRtZW50IGFuZCB5b3UgZ3JlZXRlZCBtZSBidWNrIG5ha2VkIHdlYXIgbm90aGluZyBidXQgdGhlIG1vc3QgbG92ZWx5IHNtaWxlIGFuZCBsb25nIGJsb25kZSBoYWlyIFdlIHBsYXllZCBhIGJpdCBpbiB5b3VyIHJvb20gYmVmb3JlIEkgaGFkIHRvIGdvLiBJdCB3YXMgYnkgZmFyIHRoZSBtb3N0IGZ1biBJIGhhdmUgaGFkIHdpdGggb3Igd2l0aG91dCBjbG90aGVzIG9uLiBJIHdhcyB2aXNpdGluZyBmcm9tIG91dCBvZiB0b3duIChDb2xvcmFkbykgYW5kIHlvdSBhc2tlZCB0byBUYXkgaW4gdG91Y2ggbmV4dCB0aW1lIEkgd2FzIGluIHRvd24uIEkgbG9zdCB5b3VyIGVtYWlsIGFuZCBwaG9uZSBudW1iZXIgYW5kIEkgd291bGQgbG92ZSB0byBjb21lIHNlZSB5b3UgYWdhaW4uIEkgaG9wZSB5b3Ugc2VlIHRoaXMuIDIgeWVhcnMgbGF0ZXIgYW5kIEkgc3RpbGwgY2FuJiMzOTt0IHN0b3AgdGhpbmtpbmcgYWJvdXQgaXQuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdhYTBhOWU0OTMyOTRiNzA4OWNiMWU3YjQ3OTRkMjhjLnNldENvbnRlbnQoaHRtbF80ZDRhMzFmZDc0MWY0Nzg0YTczNDhjNzE1Mzc2NGFjMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzI4ZTY4YWE2MjU2NjRhYTk5ZmJlYjE1MDkyZTViNzkzLmJpbmRQb3B1cChwb3B1cF83YWEwYTllNDkzMjk0YjcwODljYjFlN2I0Nzk0ZDI4Yyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2YyNjc2N2ZlMjY3YzQ4NmZhZWQ3YTMxZDE2NmZjYjMxID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzE5NSwtMTIyLjQ0MTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl83MWU3MWFjZTc4YjE0MzQ3ODgwNTJhMTE5NmRiN2RkYyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZjI2NzY3ZmUyNjdjNDg2ZmFlZDdhMzFkMTY2ZmNiMzEuc2V0SWNvbihpY29uXzcxZTcxYWNlNzhiMTQzNDc4ODA1MmExMTk2ZGI3ZGRjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNmU1NjIzZTdmOWYxNGYyZmJhODE3OGJlNmNjNTcyMmQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2FjMzU5OGVlN2ZjNDdiZWJjYTBmYzU5MmNjMjgxMTAgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2NhYzM1OThlZTdmYzQ3YmViY2EwZmM1OTJjYzI4MTEwIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBFbW8gTmlnaHQgYXQgVGhlIEtub2Nrb3V0OiAgCVlvdSB3ZXJlIHRoZSBzdXBlciBob3QgREogd2l0aCB0aGUgYWNjZW50ICZhbXA7YW1wOyBub3NlIHJpbmcgJmFtcDthbXA7IHRoZSByZWQgd2Fnb24uIFlvdSBuZXZlciBwbGF5ZWQgbXkgZmF2b3JpdGUgQnJhbmQgTmV3IHNvbmcgYnV0IHlvdSYjMzk7cmUgc3RpbGwgYSBiYWJlLiBEcmlua3MgYXQgRWwgUmlvIHNvb24/PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZlNTYyM2U3ZjlmMTRmMmZiYTgxNzhiZTZjYzU3MjJkLnNldENvbnRlbnQoaHRtbF9jYWMzNTk4ZWU3ZmM0N2JlYmNhMGZjNTkyY2MyODExMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2YyNjc2N2ZlMjY3YzQ4NmZhZWQ3YTMxZDE2NmZjYjMxLmJpbmRQb3B1cChwb3B1cF82ZTU2MjNlN2Y5ZjE0ZjJmYmE4MTc4YmU2Y2M1NzIyZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzc4ZDdkMTg5NmQ1YTQ2ZTQ5NzdhMzM3N2ExNjM5MTI2ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNjIxNiwtMTIyLjM5MjldLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9jZGIwYjNjYWI4Mzk0NzYzOWViZGRlNTlhMDExMzhlOSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNzhkN2QxODk2ZDVhNDZlNDk3N2EzMzc3YTE2MzkxMjYuc2V0SWNvbihpY29uX2NkYjBiM2NhYjgzOTQ3NjM5ZWJkZGU1OWEwMTEzOGU5KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjMxYjk3NGJhNzUwNGVkNmE0NTNmOGRjY2M0N2YwM2UgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNDEwNTUwNGU4YWU1NGEyMTg5OGU1MzEzNTljODkyZTggPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzQxMDU1MDRlOGFlNTRhMjE4OThlNTMxMzU5Yzg5MmU4IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBVbml0ZWQgRmxpZ2h0IERlbnZlciB0byBTRiwgNy8xMDogIAlUbyB0aGUgbmljZSBndXkgSSB3YXMgc2l0dGluZyBuZXh0IHRvIGR1cmluZyB0aGUgZmxpZ2h0IGRlbGF5IGZyb20gaGVsbCwgSSYjMzk7bSBzb3JyeSBJIG5ldmVyIGdvdCB5b3VyIG5hbWUuIEp1c3Qgd2FudGVkIHRvIHNheSB0aGF0IGxlYXZpbmcgMyBob3VycyBsYXRlLCB0byBhcnJpdmUgaW4gdGhlIHdlZSBob3VycyBvZiB0aGUgbW9ybmluZyB3YXMgbWFkZSBtb3JlIGJlYXJhYmxlIGNoYXR0aW5nIHdpdGggeW91LiBXb3VsZCB5b3UgbGlrZSB0byBoYW5nIG91dCBzb21ldGltZSB0byBjaGF0IGFib3V0IHNvbWV0aGluZyBvdGhlciB0aGFuIHN1Y2t5IGFpcmxpbmUgZXhwZXJpZW5jZXM/PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2YzMWI5NzRiYTc1MDRlZDZhNDUzZjhkY2NjNDdmMDNlLnNldENvbnRlbnQoaHRtbF80MTA1NTA0ZThhZTU0YTIxODk4ZTUzMTM1OWM4OTJlOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzc4ZDdkMTg5NmQ1YTQ2ZTQ5NzdhMzM3N2ExNjM5MTI2LmJpbmRQb3B1cChwb3B1cF9mMzFiOTc0YmE3NTA0ZWQ2YTQ1M2Y4ZGNjYzQ3ZjAzZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2E4M2FkNjM4YTEyMTQ0ZDY4NzhlOGU4YzcxZGFlY2U3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzcxMiwtMTIyLjQ0MTNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8wMGE3N2NjZTUyNTE0YzVlOWYxZGU2ODhjYTFjMTFjYSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYTgzYWQ2MzhhMTIxNDRkNjg3OGU4ZThjNzFkYWVjZTcuc2V0SWNvbihpY29uXzAwYTc3Y2NlNTI1MTRjNWU5ZjFkZTY4OGNhMWMxMWNhKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWVlZDc4NjJjNDQ4NGI5MjllNTJkNmQ1MmQzNmNjN2YgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjNhMzAwNTU0ZjM4NDlmZTk2NGY5ZDdhYWU1ZTE1Y2IgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzIzYTMwMDU1NGYzODQ5ZmU5NjRmOWQ3YWFlNWUxNWNiIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBSeWFubjogIAlZaWtlcy4gSXQgaGFzIGJlZW4ganVzdCBvdmVyIGEgeWVhciwgYW5kIGl0IHdhcyBtb250aHMgYmVmb3JlIHRoYXQuIEFsbCBpdCB0b29rIHdhcyBhbiBBdGxhbnRpYyBhcnRpY2xlIGFib3V0IGJhY2sgYnVybmVyIHJlbGF0aW9uc2hpcHMuIEkgaGF2ZSB0byB0ZWxsIHlvdSB0aGF0IEkgaGFkIG1vcmUgZnVuIGhhbmdpbmcgb3V0IHdpdGggeW91IG9uIEhhaWdodCB0aGFuIEkgaGF2ZSBvbiBhbnkgbmlnaHQgc2luY2UuIE9mIGNvdXJzZSBpdCBpcyBlYXNpZXIgdG8gbGV0IG9uZXNlbGYgd2hlbiBzYXlpbmcgZ29vZGJ5ZS4gVGhlIGVmZm9ydCBoZXJlIGlzIG1pbmltYWwsIEkga25vdy4gSSBkZWxldGVkIHlvdXIgcGhvbmUgbnVtYmVyIGEgbG9uZyB0aW1lIGFnbywgdGhpbmtpbmcgaXQgY291bGQgaGVscCBtZSBtb3ZlIG9uLiBKdXN0IGtub3cgdGhhdCB3aGVuIHdlIGxhc3Qgc3Bva2UsIHRoZXJlIHdhcyBub3RoaW5nIG1vcmUgSSB3YW50ZWQgdG8gaGFwcGVuIHRoYXQgZGF5IHRoYW4gdG8gc2VlIHlvdS4gSSBob3BlIHlvdSBhcmUgaGFwcHksIGFuZCBzdGlsbCB1bmFmcmFpZCB0byBmbGF1bnQgeW91ciBiZWF1dGlmdWwgc21pbGUuIENoaWNhZ28tQXNzIE1pa2U8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWVlZDc4NjJjNDQ4NGI5MjllNTJkNmQ1MmQzNmNjN2Yuc2V0Q29udGVudChodG1sXzIzYTMwMDU1NGYzODQ5ZmU5NjRmOWQ3YWFlNWUxNWNiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYTgzYWQ2MzhhMTIxNDRkNjg3OGU4ZThjNzFkYWVjZTcuYmluZFBvcHVwKHBvcHVwXzFlZWQ3ODYyYzQ0ODRiOTI5ZTUyZDZkNTJkMzZjYzdmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMDcxNzcyMjU0ZTIzNGI0Yzg2ODIyMGE2ZjQ2ZGYwZWIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC4yMDE5NTMsLTEyMy4yMjcyOTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9jYjdhNjJjN2E4NmU0YWFjOTBjNzUxZTRjM2NlZWNhMSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMDcxNzcyMjU0ZTIzNGI0Yzg2ODIyMGE2ZjQ2ZGYwZWIuc2V0SWNvbihpY29uX2NiN2E2MmM3YTg2ZTRhYWM5MGM3NTFlNGMzY2VlY2ExKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOWRkMjVmNjc4ZDM4NDU5M2FiN2RmMzUyMDYzZjRmZDAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTVkMjk2MjBjYzI4NGZhMThhNWFiNjMyN2Q3MDVjOTIgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzk1ZDI5NjIwY2MyODRmYTE4YTVhYjYzMjdkNzA1YzkyIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBXaGF0Pz8/OiAgCUkgY2FuJiMzOTt0IGhlYXIgeW91PyBXaGVyZSBhcmUgeW91PyBXaGF0IGRpZCB5b3Ugc2F5PyBXaGF0Pz8/IEkgY2FuJiMzOTt0IGFzayBhZ2Fpbi4uLi4uLi4uLkxPTC4gV2hhdD8/PyBHb3QgY2hhIHlvdSBkb24mIzM5O3QgbWlzcyBtZSEgV2VsbCBndWVzcyBXSEFUIEkgbWlzcyB5b3UhPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzlkZDI1ZjY3OGQzODQ1OTNhYjdkZjM1MjA2M2Y0ZmQwLnNldENvbnRlbnQoaHRtbF85NWQyOTYyMGNjMjg0ZmExOGE1YWI2MzI3ZDcwNWM5Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzA3MTc3MjI1NGUyMzRiNGM4NjgyMjBhNmY0NmRmMGViLmJpbmRQb3B1cChwb3B1cF85ZGQyNWY2NzhkMzg0NTkzYWI3ZGYzNTIwNjNmNGZkMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2Y5Mjg4OWM3NWJlMjRhMDE4MjY4MmMwNDhiMjdlYzkwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzUwOSwtMTIyLjQxNTNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl83NjRiMWQyZGM1ZTY0MjE2ODMwODljMWRmOTI0MDJmOCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZjkyODg5Yzc1YmUyNGEwMTgyNjgyYzA0OGIyN2VjOTAuc2V0SWNvbihpY29uXzc2NGIxZDJkYzVlNjQyMTY4MzA4OWMxZGY5MjQwMmY4KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTI5OWJiNjJiN2Q3NDk1NDhiMzdiOGNjYTA2MWNjODQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjcyMDdhMzA2YWNhNDZmNjhhZmFjODY2ZWM3MzgxNmEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzI3MjA3YTMwNmFjYTQ2ZjY4YWZhYzg2NmVjNzM4MTZhIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBXZSBTaGFyZWQgYSBUYWJsZSBhdCBHcmFjaWFzIE1hZHJlOiAgCUhleSwgTXkgYnVkZHkgYW5kIEkgc2hhcmVkIGEgdGFibGUgd2l0aCB5b3UgYW5kIHlvdXIgZnJpZW5kIGFuZCB3ZSBhbGwgY2hhdHRlZCBhIGJpdCBiZWZvcmUgd2UgbGVmdCBhbmQgSSBwZXQgeW91ciBwdXAuIEkgZ2F2ZSB5b3UgbXkgbnVtYmVyLCBidXQgdGhpbmsgbWF5YmUgSSBwdXQgaXQgaW4gdGhlcmUgd3JvbmcgJiMzOTtjYXVzZSBJIGhhdmVuJiMzOTt0IGhlYXJkIGZyb20geW91IDooLiBZb3UgYm90aCBzZWVtZWQgcmVhbGx5IGF3ZXNvbWUgYW5kIEkmIzM5O2QgbG92ZSB0byBoYW5nLiBUZWxsIG1lIHNvbWV0aGluZyBhYm91dCBvdXIgY29udm8gaWYgeW91IGhhcHBlbiB0byBzZWUgdGhpcyBhbmQgbGV0JiMzOTtzIGhhbmcgb3V0ISAtRDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85Mjk5YmI2MmI3ZDc0OTU0OGIzN2I4Y2NhMDYxY2M4NC5zZXRDb250ZW50KGh0bWxfMjcyMDdhMzA2YWNhNDZmNjhhZmFjODY2ZWM3MzgxNmEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9mOTI4ODljNzViZTI0YTAxODI2ODJjMDQ4YjI3ZWM5MC5iaW5kUG9wdXAocG9wdXBfOTI5OWJiNjJiN2Q3NDk1NDhiMzdiOGNjYTA2MWNjODQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl83MDExYzQ5MWI4ZWI0M2Y1YTk5OTRlNzgzOWIxMWY2MCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc2OTI1NiwtMTIyLjQ1MzU0OV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzJlODVlNTQyOWQ5NzQyODNhMmE0Njk4ZDliNTZmZTQ4ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl83MDExYzQ5MWI4ZWI0M2Y1YTk5OTRlNzgzOWIxMWY2MC5zZXRJY29uKGljb25fMmU4NWU1NDI5ZDk3NDI4M2EyYTQ2OThkOWI1NmZlNDgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84OTM0ZmQ1NTZlZjM0Y2U5YmNhOGQ3YjlhM2Q1ODJmOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80NzM2OWE1NDBjNDk0NWM2YWYwN2ZlOWI0OGNlMjYxNyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNDczNjlhNTQwYzQ5NDVjNmFmMDdmZTliNDhjZTI2MTciICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEkgbGlrZWQgeW91ciBiYW5kIHNoaXJ0OiAgCVNvIHBlb3BsZSBzdGlsbCB1c2UgdGhpcz8gVGVjaCBHb2RzIG9mIHRoZSBCYXkgQXJlYSBwbGVhc2UgbGV0IHRoaXMgd29yay4gQW55d2F5LCB5b3Ugd2VyZSBvbiBvbmUgb2YgdGhvc2UgZG91YmxlIGRlY2tlciB0b3VyIGJ1c2VzLiBNeSBmcmllbmQgYW5kIEkgd2VyZSBjcm9zc2luZyB0aGUgc3RyZWV0LiBJIHNob3V0ZWQgdGhhdCBJIGxpa2VkIHlvdXIgc2hpcnQuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzg5MzRmZDU1NmVmMzRjZTliY2E4ZDdiOWEzZDU4MmY5LnNldENvbnRlbnQoaHRtbF80NzM2OWE1NDBjNDk0NWM2YWYwN2ZlOWI0OGNlMjYxNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzcwMTFjNDkxYjhlYjQzZjVhOTk5NGU3ODM5YjExZjYwLmJpbmRQb3B1cChwb3B1cF84OTM0ZmQ1NTZlZjM0Y2U5YmNhOGQ3YjlhM2Q1ODJmOSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzJlYjg0MWNkZTZkZjRhMTlhYTRmZWZiZGM3ZjM2M2NhID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzk4MDkyLC0xMjIuNDA0ODgzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYWFhMTZiMTNkOTYwNGZmZWFjZDhhZWE0ZTA0YWYzMTEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzJlYjg0MWNkZTZkZjRhMTlhYTRmZWZiZGM3ZjM2M2NhLnNldEljb24oaWNvbl9hYWExNmIxM2Q5NjA0ZmZlYWNkOGFlYTRlMDRhZjMxMSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzIwZmNjNzRhYzkzYjQxOTI5NGJhYmQ4M2QwZWY5MTVmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzljZDE4MDZlOTNlZTRlMTA5MDZlMTFhMDFhNzIxZmYxID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF85Y2QxODA2ZTkzZWU0ZTEwOTA2ZTExYTAxYTcyMWZmMSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSXNsYW5kIFNoaXJ0LCBGZWRvcmEsIENhdHMgJmFtcDsgQnVmZmFsb3MgYXQgQ29zbW86ICAJTGV0JiMzOTtzIHNlZSBpZiB0aGlzIHdvcmtzISBXZSBtZXQgYXQgQ29zbW8gYWZ0ZXIgaG91cnMgYW5kIGhhZCBhbiBhd2Vzb21lIGNvbm5lY3Rpb24uIFlvdSB3ZXJlIHdlYXJpbmcgYW4gaXNsYW5kIHNoaXJ0IGFuZCBhIGJsYWNrIHdpZGUtYnJpbW1lZCBmZWRvcmEuIFlvdSBoYWQgYSBsaXR0bGUgYml0IG9mIGZhY2lhbCBoYWlyLiBBdCBvbmUgcG9pbnQsIHlvdSB0cmllZCBvbiBteSBidWZmYWxvIHN3ZWF0ZXIsIHdoaWNoIGhvbmVzdGx5IGxvb2tlZCBzZXh5IG9uIHlvdS4gWW91JiMzOTtyZSBhIGJpdGVyLiBZb3UgYXNrZWQgbWUgd2h5IEkgZGlkbiYjMzk7dCBoYXZlIGEgYm95ZnJpZW5kLiBZb3UgaGFkIGEgbG90IG9mIGZyaWVuZHMgdGhlcmUsIG9uZSBvZiB3aG9tIHdhcyBhIHByZXR0eSBibGFjayBnaXJsLiBUaGVyZSB3YXMgYW5vdGhlciBndXkgb24gdGhlIGNvdWNoLCBidXQgSSBkb24mIzM5O3QgcmVtZW1iZXIgaGlzIG5hbWUuIFdlIGFncmVlZCB0byBoYW5nIG91dCBhZ2FpbiBpbiB0aGUgZnV0dXJlLiBNeSBuaWdodCBnb3QgY3V0IHNob3J0IHdoZW4gc29tZW9uZSBzdG9sZSBteSBjZWxsIHBob25lIChnb3QgaXQgcmVwbGFjZWQpLiBJIHRob3VnaHQgd2UgZXhjaGFuZ2VkIG51bWJlcnMgYnV0IEkgZ3Vlc3Mgd2UgZGlkbiYjMzk7dC4gSGVyZSYjMzk7cyBob3BpbmcgdGhhdCB0aGlzIHNvbWVob3cgcmVhY2hlcyB5b3UuIElmIHlvdSB0aGluayB0aGlzIGlzIHlvdSwgcGxlYXNlIHJlcGx5IHdpdGggd2hhdCBJIHdhcyB3ZWFyaW5nIChvdGhlciB0aGFuIHRoZSBzd2VhdGVyKSBhbmQvb3Igd2hhdCBteSBldGhuaWMgYmFja2dyb3VuZCBtaWdodCBiZS48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjBmY2M3NGFjOTNiNDE5Mjk0YmFiZDgzZDBlZjkxNWYuc2V0Q29udGVudChodG1sXzljZDE4MDZlOTNlZTRlMTA5MDZlMTFhMDFhNzIxZmYxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMmViODQxY2RlNmRmNGExOWFhNGZlZmJkYzdmMzYzY2EuYmluZFBvcHVwKHBvcHVwXzIwZmNjNzRhYzkzYjQxOTI5NGJhYmQ4M2QwZWY5MTVmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZWQzNmNmNjBmZjBiNDdjMThjZDQ4NWJkNTgzZWRkMGUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy42MTU1NjQsLTEyMi4zODUyOTJdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85NGNiOTg4NGE3ODQ0YzJjOWQ4MGRkNmFmNDYxOWYwYiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZWQzNmNmNjBmZjBiNDdjMThjZDQ4NWJkNTgzZWRkMGUuc2V0SWNvbihpY29uXzk0Y2I5ODg0YTc4NDRjMmM5ZDgwZGQ2YWY0NjE5ZjBiKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjhmMDVhZDFlOTViNDBlN2I1MTNlMTJkNTdkMDRlMjEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYmM3NWQ4NGRjMTBjNGM1MGEyNjAzMjRkNjMzZTQ3NjEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2JjNzVkODRkYzEwYzRjNTBhMjYwMzI0ZDYzM2U0NzYxIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBGcm9tIEJlcmxpbiB0byBTRk8uOiAgCUxhdXJhLCB3ZSB0YWxrZWQgaW4gQmVybGluIGFuZCBpbiBTRk8uIEl0IHdhcyByZWFsbHkgbmljZSBtZWV0aW5nIHlvdSBhbmQgSSBzaG91bGQgaGF2ZSBvZmZlcmVkIHRvIG1lZXQgYWdhaW4uIEhlcmUgSSBhbS4gSWYgeW91IGZpbmQgdGhpcywgbGV0JiMzOTtzIG1lZXQgYWdhaW4uPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY4ZjA1YWQxZTk1YjQwZTdiNTEzZTEyZDU3ZDA0ZTIxLnNldENvbnRlbnQoaHRtbF9iYzc1ZDg0ZGMxMGM0YzUwYTI2MDMyNGQ2MzNlNDc2MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2VkMzZjZjYwZmYwYjQ3YzE4Y2Q0ODViZDU4M2VkZDBlLmJpbmRQb3B1cChwb3B1cF82OGYwNWFkMWU5NWI0MGU3YjUxM2UxMmQ1N2QwNGUyMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzM1YjMwNDNiYWUxODRkYjVhNDY5MTgzZTZhMDE0ZTNjID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODAwMiwtMTIyLjQwOTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl83ZTNkZmNjMmQyYTk0YmExODZjOTM1MWYxMWY3MTZiNiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMzViMzA0M2JhZTE4NGRiNWE0NjkxODNlNmEwMTRlM2Muc2V0SWNvbihpY29uXzdlM2RmY2MyZDJhOTRiYTE4NmM5MzUxZjExZjcxNmI2KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjdhYzVkZDE1YmM2NDA5NzkwNmVjYzJjZmUzM2E2ZjAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWUyYjkwY2NkMWJkNDc3ODkwYTc0YjRlNWQ3NzI0YmYgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzllMmI5MGNjZDFiZDQ3Nzg5MGE3NGI0ZTVkNzcyNGJmIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBZb3Ugd2VyZSByZWFkaW5nIGEgYm9vayBvbiB0aGUgYmVuY2ggaW4gV2FzaGluZ3RvbiBzcXVhcmUgcGFyay46ICAJSXQgd2FzIGEgc3VubnkgbGF0ZSBhZnRlcm5vb24gb24gU3VuZGF5LCBKdWx5IDEwdGgsIDIwMTYuIEkgd2FzIHdpdGggbXkgYmVzdCBmcmllbmQgYW5kIHdlIHNhdCBiZXNpZGUgeW91IG9uIGEgYmVuY2ggaW4gV2FzaGluZ3RvbiBzcXVhcmUgcGFyay4gWW91IHdlcmUgYSBmcmllbmRseSwgZXh0cmVtZWx5IGhhbmRzb21lIG1hbiwgc2VlbWluZ2x5IGluIHlvdXIgNDAmIzM5O3Mgd2l0aCBzaG9ydCBzYWx0IGFuZCBwZXBwZXIgaGFpciwgYW5kIG1lbnRpb25lZCB5b3Ugd29ya2VkIGluIGNvbnN0cnVjdGlvbi4gSSBoYWQgYnJvd24gaGFpciwgc3VuZ2xhc3NlcyBhbmQgd2FzIHdlYXJpbmcgYSBncmV5IHNoYXdsLiBZb3Ugd2VyZSByZWFkaW5nIGEgYm9vaywgYW5kIGluZm9ybWVkIHVzIHRoYXQgd2Ugd2VyZSBpbiBOb3J0aCBCZWFjaCAod2UgdGhvdWdodCB3ZSB3ZXJlIGluIFBhY2lmaWMgSGVpZ2h0cy4pIFlvdSBhbHNvIG1lbnRpb25lZCB5b3UgbGl2ZWQgaW4gUnVzc2lhbiBoaWxsLiBZb3Uga2luZGx5IHJlY29tbWVuZGVkIHNvbWUgcmVzdGF1cmFudHMgLSBvbmUgd2FzIFRvbnkmIzM5O3MgUGl6emEuIFlvdSBhbmQgbXkgZnJpZW5kIGNoYXR0ZWQgYWJvdXQgZHJvbmVzIGFuZCBzZWVtZWQgdG8gYWdyZWUgdGhleSB3ZXJlIHVubmVjZXNzYXJ5IGdhZGdldHMuIEkgbm90aWNlZCB5b3Ugd2VyZW4mIzM5O3Qgd2VhcmluZyBhIHdlZGRpbmcgcmluZyBhbmQgbGVmdCBoYXZpbmcgd2lzaGVkIEkmIzM5O2QgYXNrZWQgaWYgeW91IHdvdWxkIGxpa2UgdG8gaGF2ZSBkaW5uZXIgdGhpcyBjb21pbmcgd2Vlay4gSSYjMzk7ZCBsb3ZlIHRvIGhlYXIgZnJvbSB5b3UgaWYgeW91IGhhdmUgYW4gaW50ZXJlc3QgaW4gY29ubmVjdGluZy4gS2luZGx5LCBUYW1hcmE8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjdhYzVkZDE1YmM2NDA5NzkwNmVjYzJjZmUzM2E2ZjAuc2V0Q29udGVudChodG1sXzllMmI5MGNjZDFiZDQ3Nzg5MGE3NGI0ZTVkNzcyNGJmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMzViMzA0M2JhZTE4NGRiNWE0NjkxODNlNmEwMTRlM2MuYmluZFBvcHVwKHBvcHVwXzI3YWM1ZGQxNWJjNjQwOTc5MDZlY2MyY2ZlMzNhNmYwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMzBmZDc5MTI0YzhlNDA2Y2IxYzIyNDU4YzA2ZGE3ZjAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzI1LC0xMjIuNDE0N10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzA4MjI0YzM1ZGJkODRmMzk4NGEwOWExZGQ3ZGM5YWVjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8zMGZkNzkxMjRjOGU0MDZjYjFjMjI0NThjMDZkYTdmMC5zZXRJY29uKGljb25fMDgyMjRjMzVkYmQ4NGYzOTg0YTA5YTFkZDdkYzlhZWMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iNGQwOGU5Y2M3OTA0OTgzOTU4NmY4MjE2ODBjYzUzZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zMTNlNmU2ZmZjNmQ0ZThjODU4YmM1MjViNTFmZTFiOCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMzEzZTZlNmZmYzZkNGU4Yzg1OGJjNTI1YjUxZmUxYjgiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEJlYXV0aWZ1bCBnaXJsIGluIE1PTUE6ICAJSSYjMzk7dmUgbmV2ZXIgZG9uZSBzb21ldGhpbmcgbGlrZSB0aGlzIGJlZm9yZSBidXQgSSBmZWVsIHRoYXQgSSBuZWVkIHRvLiBJZiB0aGVyZSYjMzk7cyBhbnkgY2hhbmNlIEkgY2FuIHNlZSB5b3UgYWdhaW4gaXQmIzM5O3Mgd29ydGggaXQuIEkgZmlyc3Qgc2F3IHlvdSBvbiB0aGUgc2Vjb25kIGZsb29yIG5leHQgdG8gdGhlIGdyZWVuIHdhbGwuIFdlIG1hZGUgZXllIGNvbnRhY3QgYSBjb3VwbGUgb2YgdGltZXMgaW4gdGhlIGdhbGxlcnkgd2l0aCBDYWxkZXImIzM5O3MgbW9iaWxlcy4gSSBjb3VsZG4mIzM5O3QgYmVsaWV2ZSBob3cgYmVhdXRpZnVsIHlvdSBhcmUgYW5kIEkgZmVsdCBzb21ldGhpbmcgYmV0d2VlbiB1cyBpbiB0aG9zZSBzaG9ydCBnbGFuY2VzLiBZb3Ugd2VyZSB3aXRoIHNvbWVvbmUgdGhhdCBhcHBlYXJlZCB0byBiZSBhIGZhbWlseSBtZW1iZXIsIHBlcmhhcHMgeW91ciBtb3RoZXIgb3IgYW4gYXVudCwgYW5kIGFub3RoZXIgbGFkeSB0aGF0IGRpZG4mIzM5O3QgbG9vayByZWxhdGVkIHRvIHlvdS4gWW91JiMzOTtyZSBvZiBBc2lhbiBkZWNlbnQuIElmIHlvdSBzZWUgdGhpcyBhbmQgdGhpbmsgaXQmIzM5O3MgeW91LCBwbGVhc2UgcmVzcG9uZCBhbmQgZGVzY3JpYmUgd2hhdCBJIGxvb2tlZCBsaWtlLiBQZXJoYXBzIGNvbG9ycyBvZiBhcnRpY2xlcyBvZiBjbG90aGluZyBJIHdhcyB3ZWFyaW5nIGFuZC9vciB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgcGVvcGxlIG9yIHBlcnNvbiBJIHdhcyB3aXRoLiBJZiB0aGlzIGRvZXMgZmluZCB5b3UsIHBsZWFzZSByZXNwb25kLiBJIHdvdWxkIGxvdmUgdG8gc3BlbmQgYSBjb3VwbGUgb2YgaG91cnMgd2l0aCB5b3UgYW5kIGdldCB0byBrbm93IHlvdS48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjRkMDhlOWNjNzkwNDk4Mzk1ODZmODIxNjgwY2M1M2Yuc2V0Q29udGVudChodG1sXzMxM2U2ZTZmZmM2ZDRlOGM4NThiYzUyNWI1MWZlMWI4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMzBmZDc5MTI0YzhlNDA2Y2IxYzIyNDU4YzA2ZGE3ZjAuYmluZFBvcHVwKHBvcHVwX2I0ZDA4ZTljYzc5MDQ5ODM5NTg2ZjgyMTY4MGNjNTNmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNGRlN2U3MTdkZjgzNDIxMzgyNDBhZmIzYmY5Yzk0ODIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43MTk1LC0xMjIuNDQxMV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2U0MDZiZDJhMTY0MTQ5MDRiMGVlYmEwZDcwNmJlNjNjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl80ZGU3ZTcxN2RmODM0MjEzODI0MGFmYjNiZjljOTQ4Mi5zZXRJY29uKGljb25fZTQwNmJkMmExNjQxNDkwNGIwZWViYTBkNzA2YmU2M2MpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85YjljM2NlNTdiMmY0NTJmYmIwYmI5ZjM2MGU4ZmZlMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84OTA4YzNjMjVhMjk0ZTRhOGMwZTUyNzYyN2FiMGM2YiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfODkwOGMzYzI1YTI5NGU0YThjMGU1Mjc2MjdhYjBjNmIiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEJpa2UgUmlkZXIgQXQgV2FsZ3JlZW5zIG9uIEdlbmV2YSBBdmUuOiAgCUkgc2F3IHlvdSBhbmQgeW91IHNhaWQgaGkgdG8gbWUgYW5kIEkgd291bGQgbGlrZSB0byBtZWV0LiBJJiMzOTttIHRoZSBBc2lhbiBndXkgaW4gYmxhY2suPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzliOWMzY2U1N2IyZjQ1MmZiYjBiYjlmMzYwZThmZmUwLnNldENvbnRlbnQoaHRtbF84OTA4YzNjMjVhMjk0ZTRhOGMwZTUyNzYyN2FiMGM2Yik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzRkZTdlNzE3ZGY4MzQyMTM4MjQwYWZiM2JmOWM5NDgyLmJpbmRQb3B1cChwb3B1cF85YjljM2NlNTdiMmY0NTJmYmIwYmI5ZjM2MGU4ZmZlMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzAzYmFiNTY2MDcwZDQ4NGJhM2M4MzhiMmI5OWYwMmM4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzY5NTYxLC0xMjIuNDY4MzMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZWQ5MzBhZWQ2MjQ4NDlkMzgzZWE5NDYwNGRhMTIwZjkgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzAzYmFiNTY2MDcwZDQ4NGJhM2M4MzhiMmI5OWYwMmM4LnNldEljb24oaWNvbl9lZDkzMGFlZDYyNDg0OWQzODNlYTk0NjA0ZGExMjBmOSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzk1ZDQyYjNhODg2MzQ1ZDFiZjQyNDUzMzAzMjlhNjVjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Y5ZjdiMDgxMWVhYTQwMWQ5ODM3MGUzMDVhOTNiNDAwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9mOWY3YjA4MTFlYWE0MDFkOTgzNzBlMzA1YTkzYjQwMCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgNy8xMCwgMnBtIC0gR29sZGVuIEdhdGUgUGFyayBCYW5kc2hlbGwgLSByZWFkaW5nOiAgCVlvdTogcmVhZGluZyBhIGJvb2ssIGxpc3RlbmluZyB0byB0aGUgR29sZGVuIEdhdGUgUGFyayBCYW5kIG9uIFN1bmRheSwgNy8xMC4gTWU6IHNpdHRpbmcgYXQgdGhlIG90aGVyIGVuZCBvZiB0aGUgc2FtZSBiZW5jaCwgYWxzbyByZWFkaW5nLiBXZSBleGNoYW5nZWQgZ2xhbmNlcyBhIGZldyB0aW1lcyBhbmQgSSB0aG91Z2h0IHlvdSB3ZXJlIGN1dGUuIFdhbnQgdG8gbWVldCBmb3IgYSBjb2ZmZWUgc29tZSBTdW5kYXkgYW5kIHRoZW4gbGlzdGVuIHRvIHRoZSBiYW5kIGFuZCByZWFkIHRvZ2V0aGVyPyBMZXQgbWUga25vdyB0aGUgYXV0aG9yIG9mIHRoZSBib29rIHlvdSB3ZXJlIHJlYWRpbmc7IHRoYXQmIzM5O3MgaG93IEkmIzM5O2xsIGtub3cgaXQmIzM5O3MgeW91LjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85NWQ0MmIzYTg4NjM0NWQxYmY0MjQ1MzMwMzI5YTY1Yy5zZXRDb250ZW50KGh0bWxfZjlmN2IwODExZWFhNDAxZDk4MzcwZTMwNWE5M2I0MDApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8wM2JhYjU2NjA3MGQ0ODRiYTNjODM4YjJiOTlmMDJjOC5iaW5kUG9wdXAocG9wdXBfOTVkNDJiM2E4ODYzNDVkMWJmNDI0NTMzMDMyOWE2NWMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl81OTMyZGVhYTkzMGQ0Y2ViODViODc4YTQ1YWFlNDhjZCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc2OTA3NCwtMTIyLjQxOTYwMl0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2VlOWY5ZTQyNTllZTRkZmViZGFlZmQ0ZjI4MzFiNjkwID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl81OTMyZGVhYTkzMGQ0Y2ViODViODc4YTQ1YWFlNDhjZC5zZXRJY29uKGljb25fZWU5ZjllNDI1OWVlNGRmZWJkYWVmZDRmMjgzMWI2OTApOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80OTMwNDg3ZTZiMDg0MGY2OGM0YzRiNGJmOTM0MjdmNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hN2UzMmIzMzhmNDE0YzQ0YWViOTUxNjVhMDk1NTBiYyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYTdlMzJiMzM4ZjQxNGM0NGFlYjk1MTY1YTA5NTUwYmMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIExhdXJlbiBhdCBTcGFjZSBDb3dib3lzIDcvOCB3aXRoIGFtYXppbmcgcG9wIG4mIzM5OyBsb2NrIGRhbmNlIG1vdmVzOiAgCU15IG5hbWUgaXMgSm9yZGFuLiBJIG1ldCB5b3UgYXQgUHVibGljIFdvcmtzIGRhbmNpbmcgdG8gU3BhY2UgQ293Ym95cy4gWW91ciBkYW5jZSBtb3ZlcyB3ZXJlIG1lc21lcml6aW5nIGFuZCBtYWRlIG15IG5pZ2h0ISBZb3Ugd2VyZSBkb2luZyBzb21lIG9mIHRoZSB0cmlwcGllc3QgcG9wIG4mIzM5OyBsb2NrIG1vdmVzIEkgaGF2ZSBldmVyIHNlZW4uIEkgd291bGQgbG92ZSB0byBtZWV0IHlvdSBhZ2FpbiBvciBwZXJoYXBzIHNlZSBhbnkgdmlkZW9zIHlvdSBtaWdodCBoYXZlIG9mIHlvdXIgd29yaywgaXQgd2FzIGV4dHJlbWVseSBjb29sLiBZb3UgbWV0IGEgZmV3IG9mIG15IGZyaWVuZHMgYW4gYm9ycm93ZWQgb25lIGZyaWVuZCYjMzk7cyBMRUQgZ2xvdmVzIGZvciBhIGJpdCBhcyB3ZWxsLiBNZTogU2hpcnRsZXNzIChmYXIgdG9vIHdhcm0pIHdpdGggc2hvcnQgaGFpciBhbmQgc2hvcnQgYmVhcmQuIEJsYWNrIGFuZCBncmV5IHBhbnRzIHcvIGEgeWVsbG93IGJlbHQgYW5kIG9yYW5nZSBzaGlydCB0aWVkIGFyb3VuZCBteSB3YWlzdC4gWW91IC0gUmVkIHNoaXJ0LCBibGFjayBwYW50cyBJIGJlbGlldmUgLSBEYW5jaW5nIHcvIDIgb3RoZXIgZ2lybHMgZm9yIGEgZ29vZCBwb3J0aW9uIG9mIHRoZSBuaWdodC4gSG9wZSB0byBoZWFyIGZyb20geW91LjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80OTMwNDg3ZTZiMDg0MGY2OGM0YzRiNGJmOTM0MjdmNi5zZXRDb250ZW50KGh0bWxfYTdlMzJiMzM4ZjQxNGM0NGFlYjk1MTY1YTA5NTUwYmMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl81OTMyZGVhYTkzMGQ0Y2ViODViODc4YTQ1YWFlNDhjZC5iaW5kUG9wdXAocG9wdXBfNDkzMDQ4N2U2YjA4NDBmNjhjNGM0YjRiZjkzNDI3ZjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8wNTk4NDM5ZWU4MTI0Y2I5YmU3NmU3NDg1YTYwNmI4NSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc2MTkyOCwtMTIyLjQ2NjEwMl0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2QzZTY1NmE2ODI4ZTQzN2NiNGNiMGFmZjI1OTYzMTFiID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8wNTk4NDM5ZWU4MTI0Y2I5YmU3NmU3NDg1YTYwNmI4NS5zZXRJY29uKGljb25fZDNlNjU2YTY4MjhlNDM3Y2I0Y2IwYWZmMjU5NjMxMWIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zNzUyYjYxMmViM2I0NmNmOTYxOGM0M2JkNGM4MTg0MSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82MmEwM2JmNjI4ZDM0N2E4OGYxNTRkYzViMjRlYWI3NCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNjJhMDNiZjYyOGQzNDdhODhmMTU0ZGM1YjI0ZWFiNzQiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIHlvdTogd2FudGVkIGEgcGlnZ3liYWNrIHJpZGU6ICAJWW91OiBiZWF1dGlmdWwgZ2lybC93b21hbiB3aXRoIGEgbm9zZSByaW5nLiBZb3Ugd2VyZSB3YWl0aW5nIGZvciBhbiBpbmJvdW5kIGJ1cyBvbiA5dGgsIGF0IEp1ZGFoLiBIYWlyIHB1bGxlZCB1cC9iYWNrLiBXZWFyaW5nIEplYW5zLiBNZTogYmxhY2sgaGF0IGFuZCBibGFjayBob29kaWUgd2l0aCBibGFjayBnbGFzc2VzLiBXYXMgY2Fycnlpbmcgc29tZW9uZSBvbiBteSBiYWNrLCBhbmQgeW91IHNhaWQgeW91IHdhbnRlZCB0byBiZSBuZXh0LiBQaW5nIG1lIGlmIHlvdSBzZWUgdGhpcywgSSBkaWQgbGlrZSB0byBleHBsb3JlLCBtYXliZSBnaXZlIHlvdSB0aGUgcmlkZSB5b3UgYXNrZWQgZm9yLi4uIDl0aGFuZGp1ZGFoIGFedCBnLW0tYS1pLWwgZG90IGMtby1tPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM3NTJiNjEyZWIzYjQ2Y2Y5NjE4YzQzYmQ0YzgxODQxLnNldENvbnRlbnQoaHRtbF82MmEwM2JmNjI4ZDM0N2E4OGYxNTRkYzViMjRlYWI3NCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzA1OTg0MzllZTgxMjRjYjliZTc2ZTc0ODVhNjA2Yjg1LmJpbmRQb3B1cChwb3B1cF8zNzUyYjYxMmViM2I0NmNmOTYxOGM0M2JkNGM4MTg0MSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2UwZTY3MjExY2Y1OTRiYmQ5YjMyNDExNzA4OGEyMTlkID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzcxMiwtMTIyLjQ0MTNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8zMWEzZjliY2Q3ODU0NTZhYjJiZTE3NTNhODMyNDRjOSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZTBlNjcyMTFjZjU5NGJiZDliMzI0MTE3MDg4YTIxOWQuc2V0SWNvbihpY29uXzMxYTNmOWJjZDc4NTQ1NmFiMmJlMTc1M2E4MzI0NGM5KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDViOTgyYjk4ZjAxNGJhY2JjNTQ0ZTUyYjk0NzkzNmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNjE5NWVlZTZjYTg2NGYzOTk2NmUyMWUzNmMzMGQ3ZmEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzYxOTVlZWU2Y2E4NjRmMzk5NjZlMjFlMzZjMzBkN2ZhIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBCb3JlZCBXYWxrOiAgCUJvcmVkIFdhbGsgU3VtbWVyIGRhemUgU2hha2Ugb2ZmIHRoZSBldmVuaW5nIHJ1c3QgSW50byB0aGUgaW5mZXJubyBPcmFuZ2UgYmxpbmQgRGVtb24gY2xpbWJpbmcgdXAgbXkgc3BpbmUgU3VuYnVyc3QgbW90aCBkZXNjZW5kaW5nJmFtcDsjMTk0OyZhbXA7IzE2MDsmYW1wOyMxOTQ7JmFtcDsjMTYwOyBNYWtlcyB0aGUgYmxvb2QgcnVzaCBpbiBhbmQgSSBzd2VsbCBIZXIgb2xpdmUgbGVncyBhdmFsYW5jaGUgZnJvbSBmcmF5ZWQgRGVuaW0gU28gSSBwaWNrIHVwIG15IHBhY2UmYW1wOyMxOTQ7JmFtcDsjMTYwOyBUaHVtYiBhIHJpZGUgaW5zaWRlIG9mIHlvdSBPdXIgZXllcyBtZWV0IFJlYWNoIGRvd24gdG8gc2hpZnQgZ2VhcnMgR2FzcGluZyBmb3IgYWlyIEkgYW0gcG9zc2Vzc2VkIFlvdSYjMzk7cmUgdW5kZXIgbXkga25pZmUgVGFraW5nIGV2ZXJ5IG1pbGUgV3JpdGhpbmcgZnJvbSBiZW5lYXRoPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q1Yjk4MmI5OGYwMTRiYWNiYzU0NGU1MmI5NDc5MzZlLnNldENvbnRlbnQoaHRtbF82MTk1ZWVlNmNhODY0ZjM5OTY2ZTIxZTM2YzMwZDdmYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2UwZTY3MjExY2Y1OTRiYmQ5YjMyNDExNzA4OGEyMTlkLmJpbmRQb3B1cChwb3B1cF9kNWI5ODJiOThmMDE0YmFjYmM1NDRlNTJiOTQ3OTM2ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzkwYzQ5ZjViNDZkNzQ3NGRiYzEwOGE2YWE4ZmY1MGYwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzYwMywtMTIyLjQxNDczMl0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzY5YjUwZDcwMzI0MTRkOWRhN2YzMmJjNjRkYTYxMTg1ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl85MGM0OWY1YjQ2ZDc0NzRkYmMxMDhhNmFhOGZmNTBmMC5zZXRJY29uKGljb25fNjliNTBkNzAzMjQxNGQ5ZGE3ZjMyYmM2NGRhNjExODUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kM2VlZGZkNDE0N2I0MTZlODA4YWIyMTRmMTYyN2Y4YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iMDllZjhkMzBiNDY0ODBhYTZmMmU3YmRiZjU5NDBjOSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYjA5ZWY4ZDMwYjQ2NDgwYWE2ZjJlN2JkYmY1OTQwYzkiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEhvbWVzdGVhZCBCYXIgKEZyaWRheSk6IE9yaWdpbmFsbHkgZnJvbSBWaXJnaW5pYSBCZWFjaDogIAlXZSBtZXQgYXQgdGhlIEhvbWVzdGVhZCBiYXIgb24gRnJpZGF5IG5pZ2h0LiBZb3UgYW5kIGEgZnJpZW5kIHdlcmUgb3JkZXJpbmcgZHJpbmtzIGJlZm9yZSBtb3ZpbmcgdG8gYSB0YWJsZSBuZWFyIHRoZSB3aW5kb3cuIFlvdSBoYWQgc2hvcnQoaXNoKSBoYWlyIGFuZCB3ZSBjaGF0dGVkIGJyaWVmbHkgYWJvdXQgd2hlcmUgd2Ugb3JpZ2luYWxseSBoYWlsZWQgZnJvbS4gWW91IHNlZW1lZCB2ZXJ5IGZyaWVuZGx5IGFuZCBuaWNlIGFuZCBJIHdhbnRlZCB0byBjaGF0IHdpdGggeW91IG1vcmUsIGJ1dCBkaWRuJiMzOTt0IHdhbnQgdG8gaW50ZXJydXB0IHlvdXIgdmlzaXQgd2l0aCB5b3VyIGZyaWVuZC4gQ2FyZSB0byBtZWV0IHVwIGFnYWluPyBTYW1lIHBsYWNlPyA6KSBDaGVlcnMhPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QzZWVkZmQ0MTQ3YjQxNmU4MDhhYjIxNGYxNjI3ZjhiLnNldENvbnRlbnQoaHRtbF9iMDllZjhkMzBiNDY0ODBhYTZmMmU3YmRiZjU5NDBjOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzkwYzQ5ZjViNDZkNzQ3NGRiYzEwOGE2YWE4ZmY1MGYwLmJpbmRQb3B1cChwb3B1cF9kM2VlZGZkNDE0N2I0MTZlODA4YWIyMTRmMTYyN2Y4Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2UzNDQwMGUwM2NiMTQ4OTE4ODJmZDZlMWNjNDU0YmUyID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzE5NSwtMTIyLjQ0MTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9hMTk1ZTM1YjBlOTc0NzViYjZlZWQ5OWQyZmU2NjM3NyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZTM0NDAwZTAzY2IxNDg5MTg4MmZkNmUxY2M0NTRiZTIuc2V0SWNvbihpY29uX2ExOTVlMzViMGU5NzQ3NWJiNmVlZDk5ZDJmZTY2Mzc3KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOWM4MGI0OGNmMzM3NGJkYmIwNjYwMTg5NWJhNGFkY2YgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTdmZmExNWM1ODhjNDUyNjljY2NiMzA2NGJmMmQ2ODYgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2E3ZmZhMTVjNTg4YzQ1MjY5Y2NjYjMwNjRiZjJkNjg2IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBULUxpbmUgRnVuICpBZ2FpbjogIAlJIGJvcmRlZCB0aGUgVC1MaW5lIGF0IEdpbGxtYW4gYW5kIHNhdCBpbiBmcm9udCBvZiB5b3UuIFlvdSB3ZXJlIHRoZSBzdXBlciBjdXRlIGFzaWFuIGdpcmwgd2l0aCB3aGl0ZSBwYW50cyBhbmQgYmlnIGJsdWUgY29mZmVlIG11ZyBpbmJldHdlZW4geW91ciBsZWdzLiBTZXJpb3VzbHksIGRpZCB5b3UgcHV0IHRoYXQgdGhlcmUgb24gcHVycG9zZT8gQmVjYXVzZSBpdCB3YXMgdGhlIGhvdHRlc3QgdGhpbmcgSSYjMzk7dmUgc2VlbiBpbiBhIGxvbmcgdGltZS4gSSYjMzk7bSB3YXkgb3V0IG9mIHlvdXIgbGVhZ3VlIGJ1dCBkbyBlbmpveSB0aGUgdGVhc2UuIFdhbm5hIG1lZXQgdXAgb24gdGhlIHdheSBob21lIHRvZGF5PzwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85YzgwYjQ4Y2YzMzc0YmRiYjA2NjAxODk1YmE0YWRjZi5zZXRDb250ZW50KGh0bWxfYTdmZmExNWM1ODhjNDUyNjljY2NiMzA2NGJmMmQ2ODYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9lMzQ0MDBlMDNjYjE0ODkxODgyZmQ2ZTFjYzQ1NGJlMi5iaW5kUG9wdXAocG9wdXBfOWM4MGI0OGNmMzM3NGJkYmIwNjYwMTg5NWJhNGFkY2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8zY2VmYjZjZTFlNmQ0Njg4ODZiNTk1MDc4YmY3Y2Y4NyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc2OTMyLC0xMjIuNDUxMTMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMWRhZTBlNTI5ZjRjNDAzNWFhNDNkZGYyYzE1N2VmY2MgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzNjZWZiNmNlMWU2ZDQ2ODg4NmI1OTUwNzhiZjdjZjg3LnNldEljb24oaWNvbl8xZGFlMGU1MjlmNGM0MDM1YWE0M2RkZjJjMTU3ZWZjYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM2NzVmYjY3ZTU2NzQ2ZDZhNzU5ZjIzMjVmMzdjMmZlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FjOTAwYjIxZTE2YTQxMmViNGIzNWIzNjEyN2RlZTk1ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9hYzkwMGIyMWUxNmE0MTJlYjRiMzViMzYxMjdkZWU5NSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTGFndW5hIGNhZmUuOiAgCUhleSBJIHdhcyBob3BpbmcgdG8gZ2V0IHlvdSBudW1iZXIuIFlvdSBkYW5jZWQgb24gbWUgYW5kIHlvdSBmcmllbmQgZGFuY2VkIG9uIG15IGZyaWVuZC4gWW91IGhhZCBvbiB0aGUgd2hpdGUgaGFsZiBzaGlydCBibGFjayBsYWdnaW5ncyBhbmQgYmxhY2sgYWRkaWFzIHdpdGggd2hpdGUgc3RyaXBlcyAuIEkgc2hvdWxkJiMzOTt2ZSBnb3R0ZW4geW91ciBudW1iZXIgYnV0IEkgd2FzbiYjMzk7dCB0aGlua2luZy4gSG9wZWZ1bGx5IHRoaXMgZ2V0cyB0byB5b3UgYW5kIHlvdSBoaXQgbWUgYmFjay4gWW91IHdlcmUgdmVyeSBiZWF1dGlmdWwgLiB3ZSBzaG91bGQgbGluayB1cCBzb21ldGltIC48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzY3NWZiNjdlNTY3NDZkNmE3NTlmMjMyNWYzN2MyZmUuc2V0Q29udGVudChodG1sX2FjOTAwYjIxZTE2YTQxMmViNGIzNWIzNjEyN2RlZTk1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfM2NlZmI2Y2UxZTZkNDY4ODg2YjU5NTA3OGJmN2NmODcuYmluZFBvcHVwKHBvcHVwXzM2NzVmYjY3ZTU2NzQ2ZDZhNzU5ZjIzMjVmMzdjMmZlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMmYwMjQ0ZTliZWM1NDFmMWEwZTQwNmUyYjQzZjRjNTcgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NDUsLTEyMi40MzgzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYTk1MTQxZTFiYTMyNGRkNDg0MmJkMDkyYmRhYzMzZTcgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzJmMDI0NGU5YmVjNTQxZjFhMGU0MDZlMmI0M2Y0YzU3LnNldEljb24oaWNvbl9hOTUxNDFlMWJhMzI0ZGQ0ODQyYmQwOTJiZGFjMzNlNyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzk4OGRhMmE5MTFkYjQ2NTVhNDQ5NjllMDc5YTI2ZDYzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzI0MWNiYTVjNTA0MzQ0NGU5MmU1NTdlMDg2MTIxNjI4ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8yNDFjYmE1YzUwNDM0NDRlOTJlNTU3ZTA4NjEyMTYyOCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgcmU6IGkgZ3Vlc3MgdGhhdCYjMzk7cyBob3cgd2UgaGFkIHRvIGVuZDogIAlpJiMzOTttIG5vdCB0aGUgb25lIHlvdSYjMzk7cmUgbG9va2luZyBmb3IuIGJ1dCBzb21ldGhpbmcgc2F5cyBtYXliZSB3ZSYjMzk7cmUgbG9va2luZyBmb3IgZWFjaCBvdGhlciBhbmQgd2UgZGlkbiYjMzk7dCBrbm93LCB3b3VsZG4mIzM5O3QgaGF2ZSBjb2xsaWRlZCBleGNlcHQgZm9yIHlvdXIgaGVhcnQgcG9zdGluZywgbXkgaGVhcnQgbG9va2luZywgaW4gdGhlIGRpcmVjdGlvbiBvZiBhbm90aGVyIGJ1dCBsYW5kaW5nIG5leHQgdG8gZWFjaCBvdGhlci4gaW4gdGhlIHZlcnkgbGVhc3QsIGl0IHdvdWxkIGJlIGEgZ3JlYXQgc3RvcnksIGEgcm9tYW50aWMgc3RhcnQuIHRvIGJlZ2luOiBzZW5kIG1lIGEgcGljdHVyZSBzbyBpIGNhbiBzZWUgdGhlIGZhY2UgdGhhdCBob2xkcyB0aGUgZ3JlZW4gZXllcy4gcGVyaGFwcyB0aGVyZSB3aWxsIGJlIGEgc3BhcmsuIGFuZCBkb24mIzM5O3QgdGhpbmsgaSYjMzk7bSBzdXBlcmZpY2lhbC4gaXQmIzM5O3MganVzdCBjYWxsZWQgYmVpbmcgaHVtYW4gYW5kIHdhbnRpbmcgdG8gc2VlIGlmIHRoZXJlJiMzOTtzIGZpcmUgbGl0IGNhbGxlZCBkZXNpcmUuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzk4OGRhMmE5MTFkYjQ2NTVhNDQ5NjllMDc5YTI2ZDYzLnNldENvbnRlbnQoaHRtbF8yNDFjYmE1YzUwNDM0NDRlOTJlNTU3ZTA4NjEyMTYyOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzJmMDI0NGU5YmVjNTQxZjFhMGU0MDZlMmI0M2Y0YzU3LmJpbmRQb3B1cChwb3B1cF85ODhkYTJhOTExZGI0NjU1YTQ0OTY5ZTA3OWEyNmQ2Myk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzQ4Mjc1YThlNWM4ZTQ5MDVhNDU2MzRjZTRiMzUwMjUyID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzg5NTM0LC0xMjIuNDI4OTA1XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZjc0YTRiZjJkYmQ3NGRjNGI2MGE4YTliMWI3N2Q2ZTUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzQ4Mjc1YThlNWM4ZTQ5MDVhNDU2MzRjZTRiMzUwMjUyLnNldEljb24oaWNvbl9mNzRhNGJmMmRiZDc0ZGM0YjYwYThhOWIxYjc3ZDZlNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2QwZjJiNjViZWM3NjQzYmQ5ODVjNjRmNjczMzE1NWZlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UxNjAwMGRlZTdiODQ3NmI5OGRjYjJkNDM0YjFhMWM4ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9lMTYwMDBkZWU3Yjg0NzZiOThkY2IyZDQzNGIxYTFjOCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTWVldCB5b3UgVG9kYXkgYXQgQ2FydGllciBBcm91bmQgMlBNIGp1bHk5OiAgCU1lbG9uZXkuLi4uLi4uLi4ud29tZW4gY2FuIGFuZCBkbyBzcGVsbCB0aGVpciBmaXJzdCBuYW1lIGFueXdheSB0aGV5IHdhbnQuIFdoaWNoIGlzIGdyZWFyISBJIGFtIHRoZSBBcmNoaXRlY3QgZnJvbSBWaXJnaW5pYS4gV2Ugc3Bva2UgZm9yIGZldyBtaW51dGVzIGF0IENhcnRpZXIgb24gUG9zdCBTdC4gYXJvdW5kIDJQTSB0b2RheSBKdWx5IDkgU2F0Li4gLllvdSBzYWlkIEdvb2QgQnkgQ2hhbmRsZXIuIElmIEkgYW0gbHVja3kgZW5vdWdoIGFuZCB5b3UgYXJlIGF2YWlsYWJsZSBQbGVhc2UgZS1tYWlsIG1lLiBJIGFtIGV4dHJlbWVseSBpbnRlcmVzdGVkIGluIGtub3dpbmcgeW91LjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kMGYyYjY1YmVjNzY0M2JkOTg1YzY0ZjY3MzMxNTVmZS5zZXRDb250ZW50KGh0bWxfZTE2MDAwZGVlN2I4NDc2Yjk4ZGNiMmQ0MzRiMWExYzgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl80ODI3NWE4ZTVjOGU0OTA1YTQ1NjM0Y2U0YjM1MDI1Mi5iaW5kUG9wdXAocG9wdXBfZDBmMmI2NWJlYzc2NDNiZDk4NWM2NGY2NzMzMTU1ZmUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9kZjhhM2UxOTFlYjk0NjdlYTdhYWE0NmQwNmNiZTUyYyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjYyMTYsLTEyMi4zOTI5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMDQ5MTZhN2Y3YzBkNGJjZDg0ZmQwMWEyOTZlYmU2YmIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2RmOGEzZTE5MWViOTQ2N2VhN2FhYTQ2ZDA2Y2JlNTJjLnNldEljb24oaWNvbl8wNDkxNmE3ZjdjMGQ0YmNkODRmZDAxYTI5NmViZTZiYik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ZmNThlZjVjNmNjYjQ3YTdiMWRlN2U4MmRmNzgwNzM0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NlYzg2ZmZmOTdjMzRjMTQ5YzdjMjVkM2U4MWUyNWI3ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9jZWM4NmZmZjk3YzM0YzE0OWM3YzI1ZDNlODFlMjViNyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgVW5pdGVkIGZsdCBDaGljYWdvIHRvIFNGIDYvMjk6ICAJWW91IDogR2xhc3NlcywgcG9ueSB0YWlsLCBwYXN0ZWwgZ3JlZW4gbmFpbCBwb2xpc2gsIHNhbmRhbHMsIHJlYWRpbmcgYSBib29rIHdpdGggUGFyaXMgaW4gdGhlIHRpdGxlLCBzaXR0aW5nIG9uIHRoZSBhaXNsZSBvbiBhIFVuaXRlZCBBaXIgZmxpZ2h0IGZyb20gQ2hpY2FnbyB0byBTYW4gRnJhbi4gSSBzYXQgYWNyb3NzIGZyb20geW91IChzaG9ydHMsIGJsYWNrIHQtc2hpcnQpLiBJIHdhcyB0cmF2ZWxpbmcgd2l0aCBteSBmYW1pbHkgd2hvIHNhdCBiZWhpbmQgeW91LiBJIGhhdmUgYSBiYWQgZXllIGFuZCBtb3JlIHRoYW4gb25jZSBJIHRoaW5rIHlvdSB0aG91Z2h0IEkgd2FzIGxvb2tpbmcgYXQgeW91IHdoZW4gSSB3YXMgbG9va2luZyBhdCBzb21ldGhpbmcgZWxzZS4gSSBsZXQgaXQgc2xpZGUgYmVjYXVzZSBpdCBoYXBwZW5zIG9jY2FzaW9uYWxseSwgYnV0IEkgbm90aWNlZCB5b3UgaG9sZGluZyBleWUgY29udGFjdCBhIGNvdXBsZSB0aW1lcyBhbmQgSSBiZWdhbiB0byBmZWVsIGEgY29ubmVjdGlvbi4gSSB3YW50ZWQgdG8gdGFsayB0byB5b3UgYnV0IGl0IGRpZG4mIzM5O3QgZmVlbCByaWdodCBhdCB0aGUgdGltZS4gV2UgZXhjaGFuZ2VkIGJyaWVmIGNvbW1lbnRzIG5lYXIgdGhlIGVuZCBvZiB0aGUgZmxpZ2h0IGFuZCBJIHdpc2hlZCB3ZSBoYWQgdGFsa2VkIG1vcmUuIEkgbGV0IHlvdSBnbyBhaGVhZCBvZiBtZSBhbmQgeW91IGRpc2FwcGVhcmVkIGludG8gdGhlIGNyb3dkLiBJIGRvdWJ0IHRoaXMgd2lsbCBmaW5kIHlvdSwgYnV0IEkgd2FudGVkIHRvIGdldCB0aGlzIG91dCB0aGVyZSBhbmQgb2ZmIG15IGNoZXN0LiBJZiB5b3UgdGhpbmsgdGhpcyBpcyB5b3UgcmVwbHkgd2l0aCB0aGUgZnVsbCB0aXRsZSBvZiB0aGUgYm9vayB5b3Ugd2VyZSByZWFkaW5nLjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mZjU4ZWY1YzZjY2I0N2E3YjFkZTdlODJkZjc4MDczNC5zZXRDb250ZW50KGh0bWxfY2VjODZmZmY5N2MzNGMxNDljN2MyNWQzZTgxZTI1YjcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9kZjhhM2UxOTFlYjk0NjdlYTdhYWE0NmQwNmNiZTUyYy5iaW5kUG9wdXAocG9wdXBfZmY1OGVmNWM2Y2NiNDdhN2IxZGU3ZTgyZGY3ODA3MzQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85ZTQ2NzlmMTdkYzI0MDE3YmIyNGMyOGZkY2U5OWI0OCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc5MTcsLTEyMi40MTg2XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYjVkMjBjMWEyMWVkNGU0Mjk4ZDE4MDE4NTZmZDBhNWEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzllNDY3OWYxN2RjMjQwMTdiYjI0YzI4ZmRjZTk5YjQ4LnNldEljb24oaWNvbl9iNWQyMGMxYTIxZWQ0ZTQyOThkMTgwMTg1NmZkMGE1YSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzlkYmNhMzZkMDNhOTQ3OTRiZWY5NTZmNWJjYTQzMTZlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzkzODFjNjRkNmQzYjQ5NTY5ODMyYTQ5MGIxNGMzYzNhID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF85MzgxYzY0ZDZkM2I0OTU2OTgzMmE0OTBiMTRjM2MzYSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgU2FsLCB0aGUgZG9vcjogIAlhbXVzaW5nIG9uZXNlbGYgZG9lc24mIzM5O3QgdGFrZSBhIG11c2UgdG8gd2FsayB0aHJ1IGEgbXVzZXVtIHRob3NlIHBhaW50aW5ncyBhcmVuJiMzOTt0IHlvdXIgZm9lIG5vIG5lZWQgdG8gY3VzcyBmb2N1cyBmb2N1cyBldmVyeXRoaW5nIGluIGZvY3VzIGl0JiMzOTtzIHBhaW50LCBqdXN0IHBhaW50IGFuZCBhaW50IGl0IG5pY2UgaXQgYWludCBwYWluIGFuZCBpZiB5b3UgY2FudCBnZXQgbGFpZCB0aGVyZSBpcyBhIFNhbHZhZG9yIERhbGk8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOWRiY2EzNmQwM2E5NDc5NGJlZjk1NmY1YmNhNDMxNmUuc2V0Q29udGVudChodG1sXzkzODFjNjRkNmQzYjQ5NTY5ODMyYTQ5MGIxNGMzYzNhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfOWU0Njc5ZjE3ZGMyNDAxN2JiMjRjMjhmZGNlOTliNDguYmluZFBvcHVwKHBvcHVwXzlkYmNhMzZkMDNhOTQ3OTRiZWY5NTZmNWJjYTQzMTZlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZTllOTZhMjExODM4NGVlNGFhZjllODQ5ZWUxMjVjNDAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NjY1NCwtMTIyLjQyMjA0NF0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzAzNzBlYjNlNDc5MzRhNzk5OWE2NmRhNThjN2IwYTBjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9lOWU5NmEyMTE4Mzg0ZWU0YWFmOWU4NDllZTEyNWM0MC5zZXRJY29uKGljb25fMDM3MGViM2U0NzkzNGE3OTk5YTY2ZGE1OGM3YjBhMGMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lNDBlMjMzZTkyZTk0N2MwODE5NzJiMzk3MmFmOGRkMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82MjgyMWJlMWRkZjE0NmM4ODNjZjVhNjNiNDg4ZmMwMyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNjI4MjFiZTFkZGYxNDZjODgzY2Y1YTYzYjQ4OGZjMDMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEJlYXV0aWZ1bCB3b21hbiBhdCBGb3VyIEJhcnJlbGwgd2l0aCBiYWNrcGFjazogIAlJdCB3YXMgYXJvdW5kIDExQU0gdG8gbm9vbiBvbiBTYXR1cmRheSBhdCB0aGUgRm91ciBCYXJyZWxsIG9uIFZhbGVuY2lhIGFuZCAxNHRoLiBZb3UgaGFkIGEgYmFja3BhY2sgb24sIEksIGEgcHVycGxlIHNoaXJ0LiBFeWUgY29udGFjdCB3YXMgbWFkZSwgbXVsdGlwbGUgdGltZXMuIFRoZSBtYW4gbmV4dCB0byB5b3Ugc2VlbWVkIGxpa2UgYSBwcmVzdW1wdGl2ZSBTTyB3aGljaCBpcyB3aHkgSSBkaWRuJiMzOTt0IGFwcHJvYWNoLiBNYXliZSBoZSB3YXNuJiMzOTt0IHRob3VnaC4gWW91IGdvdCB5b3VyIGNvZmZlZSB0byBnbyBhbmQgbGVmdCBiZWZvcmUgSSBjb3VsZCBmaW5kIG91dC4gV2hvIGtub3dzLCBtYXliZSB0aGlzIG1lc3NhZ2UgaXMgc3VwcG9zZWQgdG8gZmluZCB5b3UuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U0MGUyMzNlOTJlOTQ3YzA4MTk3MmIzOTcyYWY4ZGQyLnNldENvbnRlbnQoaHRtbF82MjgyMWJlMWRkZjE0NmM4ODNjZjVhNjNiNDg4ZmMwMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2U5ZTk2YTIxMTgzODRlZTRhYWY5ZTg0OWVlMTI1YzQwLmJpbmRQb3B1cChwb3B1cF9lNDBlMjMzZTkyZTk0N2MwODE5NzJiMzk3MmFmOGRkMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzIwMmQ4YWExZTczOTQ2NTdiMWMxYWM5YzY5MWFkNTlhID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuOTg4MywtMTIyLjU5MzddLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9mN2JiYjhiNzU1YzA0NGI4YjQ1YjRhZTUwMWFhMDc3MSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMjAyZDhhYTFlNzM5NDY1N2IxYzFhYzljNjkxYWQ1OWEuc2V0SWNvbihpY29uX2Y3YmJiOGI3NTVjMDQ0YjhiNDViNGFlNTAxYWEwNzcxKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOGJkOWQ3M2QzZmE3NDgxMmJhMmQ5ZTI2NmY4ZTlhYjQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmI4NzFkODFhOTMyNDUyODg1OTk4YjAxYjkwNmU1ZDggPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzJiODcxZDgxYTkzMjQ1Mjg4NTk5OGIwMWI5MDZlNWQ4IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBCZWF1dGlmdWwgQWZyaWNhbiBBbWVyaWNhbiBIb3N0ZXNzIGF0IEFic2ludGhlPzogIAlTdWNoIGEgYmVhdXRpZnVsIHdvbWFuLCB5b3UgbWFkZSBteSBkYXkhIEhvcGUgdG8gc2VlIHlvdSBhZ2Fpbiwgc2luZ2xlPyBUcnVseSBhIGxvdmVseSB3b21hbjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84YmQ5ZDczZDNmYTc0ODEyYmEyZDllMjY2ZjhlOWFiNC5zZXRDb250ZW50KGh0bWxfMmI4NzFkODFhOTMyNDUyODg1OTk4YjAxYjkwNmU1ZDgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8yMDJkOGFhMWU3Mzk0NjU3YjFjMWFjOWM2OTFhZDU5YS5iaW5kUG9wdXAocG9wdXBfOGJkOWQ3M2QzZmE3NDgxMmJhMmQ5ZTI2NmY4ZTlhYjQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl80OGNlOTkyNmUyY2E0MGNkYWEyZTQwNjg1Y2RkZmI3MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MDcxNSwtMTIyLjQxMjY1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzJkZTI1MGU2NjEzZDQ5NzNhYmI2Njg0Y2NhNmQ5NWU5ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl80OGNlOTkyNmUyY2E0MGNkYWEyZTQwNjg1Y2RkZmI3My5zZXRJY29uKGljb25fMmRlMjUwZTY2MTNkNDk3M2FiYjY2ODRjY2E2ZDk1ZTkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMjBmZjllY2NjNTk0MTk0OTQ2OWRlMDY4ZDYxOWE0YyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84NGU5YTg5Mzk5ZjI0YTkzYWZiMDU0NDUxNGRmNjc4MyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfODRlOWE4OTM5OWYyNGE5M2FmYjA1NDQ1MTRkZjY3ODMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIExhdXJlbiBhdCB0aGUgRE5BIExvdW5nZTogIAlZb3Ugc2FpZCB5b3UgbGlrZWQgbXkgYmVhcmQgYW5kIHlvdSB3ZXJlIG9uZSBhIGRhdGUgYW5kIGhlIGxvb2tlZCBsYW1lIGFuZCB5b3UgbG9va2VkIGJvcmVkLiBCdXQgeW91IGFsc28gbG9va2VkIGFtYXppbmcuIFdlIHRhbGtlZCBhYm91dCB5b3UgYmVpbmcgYW4gZXZlbnQgcGxhbm5lciBmcm9tIEdpbHJveSBidXQgbGl2ZSBpbiBNYXJpbi4gSSBsb3ZlZCB5b3VyIGhhaXJjdXQgYW5kIHNob3VsZCBoYXZlIHNhaWQgc29tZXRoaW5nIGJ1dCB3YXNuJiMzOTt0IGRydW5rIGVub3VnaC4uLjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kMjBmZjllY2NjNTk0MTk0OTQ2OWRlMDY4ZDYxOWE0Yy5zZXRDb250ZW50KGh0bWxfODRlOWE4OTM5OWYyNGE5M2FmYjA1NDQ1MTRkZjY3ODMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl80OGNlOTkyNmUyY2E0MGNkYWEyZTQwNjg1Y2RkZmI3My5iaW5kUG9wdXAocG9wdXBfZDIwZmY5ZWNjYzU5NDE5NDk0NjlkZTA2OGQ2MTlhNGMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8xZDVjODdlMTcxOGY0MjkyYTk4ZTZhNmRmNjBlMzBkYSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc2NzMyMiwtMTIyLjQyOTIzN10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2YwM2M0Yjc2MjY4MzQ1NjZhOTRkMGY2ZDM2Mzk2ZWFiID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xZDVjODdlMTcxOGY0MjkyYTk4ZTZhNmRmNjBlMzBkYS5zZXRJY29uKGljb25fZjAzYzRiNzYyNjgzNDU2NmE5NGQwZjZkMzYzOTZlYWIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83OWZhM2RiNDcxYzU0NmU3YTZmODYxYWM3ZDU4M2RjNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kYWFkYjkxOGNlNDU0Zjk1ODU4MGZjMGU3YWE5ODkzOCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZGFhZGI5MThjZTQ1NGY5NTg1ODBmYzBlN2FhOTg5MzgiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIE91dGJvdW5kIEotQ2h1cmNoLCAxMHBtIEZyaWRheTogIAlZb3UgY2F1Z2h0IG15IGV5ZSB3aGVuIEkgYm9hcmRlZCB0aGUgb3V0Ym91bmQgSi1DaHVyY2ggYXQgVmFuIE5lc3MgbGFzdCBuaWdodCAoRnJpZGF5KSBhcm91bmQgMTBwbS4gWW91IGdvdCBvZmYgYXQgTWFya2V0IGJ1dCBub3QgYmVmb3JlIGxvdHMgb2Ygc2V4eSBnbGFuY2VzIGFuZCBhIGZpbmFsIGhlYWQgbm9kLiBZb3UmIzM5O3JlIGEgc2hvcnRlciB3aGl0ZSBndXkgd2l0aCBhIGJlYXJkLiBJJiMzOTttIGEgdGFsbGVyIHdoaXRlIGd1eSB3aXRoIGEgYmVhcmQuIFdlIHdlcmUgYm90aCB3ZWFyaW5nIGNhcHMuIEkga25vdyB0aGF0JiMzOTtzIG5vdCBtdWNoIHRvIGdvIG9uLCBidXQgaXQmIzM5O3Mgd29ydGggYSBzaG90LjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83OWZhM2RiNDcxYzU0NmU3YTZmODYxYWM3ZDU4M2RjNS5zZXRDb250ZW50KGh0bWxfZGFhZGI5MThjZTQ1NGY5NTg1ODBmYzBlN2FhOTg5MzgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8xZDVjODdlMTcxOGY0MjkyYTk4ZTZhNmRmNjBlMzBkYS5iaW5kUG9wdXAocG9wdXBfNzlmYTNkYjQ3MWM1NDZlN2E2Zjg2MWFjN2Q1ODNkYzUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl80MTkxNDllMjBkMWM0NjBmYjM1YjA5NDgzMGJkOTU4MCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MjUsLTEyMi40MTQ3XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fODg5MjY3NGJjMDRkNDNkOGFiYWEzZjY2NzkxYzFhYjkgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzQxOTE0OWUyMGQxYzQ2MGZiMzViMDk0ODMwYmQ5NTgwLnNldEljb24oaWNvbl84ODkyNjc0YmMwNGQ0M2Q4YWJhYTNmNjY3OTFjMWFiOSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZmNzNjYjE4NWRkMzRiZGI4ZDZjMWY4ZDljNGEzN2EzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2E4MTljNzAxYzQyZjQ5OGQ4N2U0MzY3NDJjYjEzMDA3ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9hODE5YzcwMWM0MmY0OThkODdlNDM2NzQyY2IxMzAwNyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAga2F0aGVyaW5lIC0gbTR0OiAgCU9tZyBzbyB5b3UgYXJlIGEgY2FzaGllciBhbmQgdW5iZWxpZXZhYmx5IHNleHkhIE9tZyB3b3cuIFNvIHNleHkgdSBqdXN0IG1ha2UgbWUgbmVydm91cy4gSSBkb3VidCB5b3UmIzM5O2xsIHNlZSB0aGlzIGJ1dCBJIHdvcmsgZG93bnN0YWlycyBmcm9tIHlvdS4gQSBmcmllbmQgb2YgbWluZSB0aGF0IHVzZWQgdG8gd2VlayB3aGVyZSB5b3UgYXJlIGVtcGxveWVkIHRvbGQgbWUgeW91IGFyZSB0cmFucz8gSSB0aGluayB0aGFzIHNvIGZ1Y2tpbmcgaG90IHRoYXMgbXkgbnVtYmVyIG9uZSBmYW50YXN5IGxvbC48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmY3M2NiMTg1ZGQzNGJkYjhkNmMxZjhkOWM0YTM3YTMuc2V0Q29udGVudChodG1sX2E4MTljNzAxYzQyZjQ5OGQ4N2U0MzY3NDJjYjEzMDA3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNDE5MTQ5ZTIwZDFjNDYwZmIzNWIwOTQ4MzBiZDk1ODAuYmluZFBvcHVwKHBvcHVwXzZmNzNjYjE4NWRkMzRiZGI4ZDZjMWY4ZDljNGEzN2EzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNzU5NzBhMDFhYzI0NDI4ODgxNWM3YTAwMjZhN2ZkMjUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NjIxLC0xMjIuMzk3MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzQwZDUzMjFjZWNlYTQ4YWE4NmFjZGYzYzVkZDNiN2I1ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl83NTk3MGEwMWFjMjQ0Mjg4ODE1YzdhMDAyNmE3ZmQyNS5zZXRJY29uKGljb25fNDBkNTMyMWNlY2VhNDhhYTg2YWNkZjNjNWRkM2I3YjUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yZDgzMTZhMzcxOWI0MmFmYWEyYzQwZDIyYTdiNGI2MSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85ZTU0NGFhNjg2Zjg0YWE1OThjYTQ4MjI4ZDc1YzE2MSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOWU1NDRhYTY4NmY4NGFhNTk4Y2E0ODIyOGQ3NWMxNjEiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIE1hcmxvdzogIAlBbHRob3VnaCBvdXIgY29udmVyc2F0aW9uIHdhcyBzaG9ydCAtIGl0IHdhcyBncmVhdCBtZWV0aW5nLiBEaWQgeW91IGdldCB0aGUgYnVyZ2VyPyBXaXNoIEkgaGFkIGJlZW4gc29sbyBhbmQgd291bGQgaGF2ZSBqb2luZWQgeW91IGF0IHRoZSBiYXIuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJkODMxNmEzNzE5YjQyYWZhYTJjNDBkMjJhN2I0YjYxLnNldENvbnRlbnQoaHRtbF85ZTU0NGFhNjg2Zjg0YWE1OThjYTQ4MjI4ZDc1YzE2MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzc1OTcwYTAxYWMyNDQyODg4MTVjN2EwMDI2YTdmZDI1LmJpbmRQb3B1cChwb3B1cF8yZDgzMTZhMzcxOWI0MmFmYWEyYzQwZDIyYTdiNGI2MSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2VhMDNlMWMyNjllZDQ5ZGNhMDNhMDI5ZGNhNzg5YWE2ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgwNjIsLTEyMi40NzIzMjRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9jYTFkNzIxZWRiMTE0Y2U3YTZkOTFlZDZlZDIzMWI4ZCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZWEwM2UxYzI2OWVkNDlkY2EwM2EwMjlkY2E3ODlhYTYuc2V0SWNvbihpY29uX2NhMWQ3MjFlZGIxMTRjZTdhNmQ5MWVkNmVkMjMxYjhkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMDJkY2IxOWIyYTAyNDMxZTk0MzIwN2JjYmU3MzgyYTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2U0NjE4MWExZWMxNGM2OTg2NTBmM2Q4ZjM3NjNmZDkgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzdlNDYxODFhMWVjMTRjNjk4NjUwZjNkOGYzNzYzZmQ5IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBJIGd1ZXNzIHRoYXQmIzM5O3MgaG93IHdlIGhhZCB0byBlbmQ6ICAJV2Ugd2VyZSBzbyBjb21idXN0aWJsZSwgaXQganVzdCBoYWQgdG8gZW5kIHRoYXQgd2F5LCBkaWRuJiMzOTt0IGl0PyBZZWFycyBhZ28gdGhlcmUgd2FzIGEgZGF5IGFmdGVyIHdvcmsgd2UgaGFkIGRyaW5rcyBhdCB0aGUgTGF0aW4gQW1lcmljYW4gQ2x1Yi4gSSB0aGluayBpdCB3YXMgZm9sbG93aW5nIGEgZGlubmVyLCBidXQgSSYjMzk7bSBub3Qgc3VyZS4gSSB3YXMgc28gaGFwcHkgd2l0aCB5b3UuIFRoYXQgd2FzIGEgdmVyeSB1bmRlcnJhdGVkIG1lbW9yeSBpbiBteSBsaWZlLiBJIHdpc2ggSSBjb3VsZCBnbyBiYWNrIHRvIHRoYXQgbW9tZW50LiBUaGF0IG1vbWVudCwgYW5kIGRvemVucyBvdGhlcnMgd2l0aCB5b3UuIEkgd291bGQgZ2l2ZSB1cCB0aGUgc2lnaHQgaW4gbXkgcmlnaHQgZXllIGlmIHRoZSBjb250cmFjdCB3ZXJlIG9mZmVyZWQuIFdoYXQmIzM5O3MgeW91ciBmYXZvcml0ZSwgb2Z0LW92ZXJsb29rZWQgbWVtb3J5IG9mIHVzPyBJIHdhcyBzbyBvdmVyLXRoZS10b3AgaW4gbG92ZSB3aXRoIHlvdS4gUmlnaHQgdG8gdGhlIHZlcnkgZW5kLCB3aGVuIHdlIHRocmFzaGVkIGF0IGVhY2ggb3RoZXIgbGlrZSB0aWdlcnMuIEkgbWlzcyB5b3UgYW5kIHlvdSYjMzk7cmUgYWx3YXlzIGluIG15IHRob3VnaHRzLiBJIGhvcGUgd2hlcmV2ZXIgeW91IGFyZSB0aGF0IHlvdSYjMzk7cmUgaGFwcHkgYW5kIG5vdCB0aGlua2luZyBvZiBtZSBhcyBtdWNoLiBUaGUgZW1wdGluZXNzIGlzIHNvIGludGVuc2UuIFRoZSBwbGFpbnMgaGF2ZSBnb25lIGJhcnJlbi4gU29tZSBkYXlzIEkganVzdCB3YW50IHRvIGRyb3duLiBGaXR0aW5nbHksIHlvdSBjb3VsZG4mIzM5O3Qgc3dpbSBmb3Igc2hpdCBpZiBJIG5lZWRlZCBzYXZpbmcuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzAyZGNiMTliMmEwMjQzMWU5NDMyMDdiY2JlNzM4MmE3LnNldENvbnRlbnQoaHRtbF83ZTQ2MTgxYTFlYzE0YzY5ODY1MGYzZDhmMzc2M2ZkOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2VhMDNlMWMyNjllZDQ5ZGNhMDNhMDI5ZGNhNzg5YWE2LmJpbmRQb3B1cChwb3B1cF8wMmRjYjE5YjJhMDI0MzFlOTQzMjA3YmNiZTczODJhNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzg2OGRhMzc3ZjAzYjQzNTY4ZGY5ZjRmYmZmNmYwNTU4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzg1OTExLC0xMjIuNDA0MTc1XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOGM5YThjYmIwNjM2NGJhMzg2Y2EyZGY5ZDVhNTJiYjAgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzg2OGRhMzc3ZjAzYjQzNTY4ZGY5ZjRmYmZmNmYwNTU4LnNldEljb24oaWNvbl84YzlhOGNiYjA2MzY0YmEzODZjYTJkZjlkNWE1MmJiMCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Q4OWIwOWExM2M1NzQ2NmVhZjZjZWIwM2M1OTM5YjYwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQ5MWI1ZWYwNDM1ZTQyYzdiNDVkZmY1ZTBmYjI0ZDBmID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF80OTFiNWVmMDQzNWU0MmM3YjQ1ZGZmNWUwZmIyNGQwZiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgWW91IGdvdCBvZmYgYXQgdGhlIFdlc3QgT2FrbGFuZCBCYXJ0IFN0b3A6ICAJVGhlIGRheSB3YXMgVGh1cnNkYXksIEp1bHkgN3RoLCB0aGUgdGltZSB3YXMgYXJvdW5kIDQ6MzAvNDo0NS4gSSB0aGluayB3ZSBib3RoIGVudGVyZWQgdGhlIEVtYmFyY2FkZXJvIHRyYWluLiBXZSBsb2NrZWQgZXllcyBmb3IgYXdoaWxlIGluIHRoZSBCQVJUIHRyYWluLiBJIGhhZCBhIHNpbGx5IGZsaXAgcGhvbmUgYW5kIGFuc3dlcmVkIGEgcGhvbmUgY2FsbCBhbmQgeW91IHdlcmUgd2F0Y2hpbmcgbWUuIEkgc2F0IG9uIHRoZSBzZWF0cyBhc3NpZ25lZCBmb3IgdGhlIGVsZGVybHksIGRpc2FibGVkLCBhbmQgcHJlZ25hbnQgcGVvcGxlLiAoRG9uJiMzOTt0IHdvcnJ5LCBjdXJpb3VzIHJlYWRlcnMsIG5vIG9uZSB0aGF0IGZpdHMgdGhhdCBkZXNjcmlwdGlvbiB3YXMgaW4gdGhlIHRyYWluLikgWW91IHN0b29kIHRoZSBlbnRpcmUgdGltZSBqdXN0IGZpdmUgZmVldCBhd2F5IGZyb20gbWUuIFlvdSBhcmUgc28gY3V0ZS4gWW91IGhhdmUgYnJvd24gaGFpciBhbmQgbGFyZ2UgYnJvd24gZXllcy4gWW91IHdvcmUgZ2xhc3NlcyBhbmQgaGFkIHlvdXIgZWFyYnVkcyBpbiBhbmQgYSBiYWNrcGFjayBzdHJhcHBlZCB0byB5b3VyIGJhY2suIFlvdSB3b3JlIGplYW5zIGFuZCBhIG5pY2Ugc2hpcnQsIHlvdXIgc3RvbWFjaCB3YXMgc2hvd2luZyBhIGJpdCBiZWNhdXNlIHlvdSBoYWQgeW91ciBhcm1zIHVwIGhvbGRpbmcgdGhlIGJhcnMuIEkgd2FzIG5lcnZvdXMgYW5kIGxvb2tlZCBhd2F5IGF0IGZpcnN0LCBidXQgdGhlbiBnYWluZWQgc29tZSBjb3VyYWdlIGFuZCBsb29rZWQgYmFjay4gSSBkZWZpbml0ZWx5IHdhcyBnaXZpbmcgeW91IHRoZSBleWVzLiBBcyB5b3Ugd2VyZSB3YWxraW5nIG91dCwgSSBzbWlsZWQgYXQgeW91IGFuZCBzYWlkIGJ5ZSBmbGlydGF0aW91c2x5LiBZb3UgcHJvYmFibHkgaGF2ZSBhIGdpcmxmcmllbmQgYmVjYXVzZSB5b3UgbG9vayBzbyBwdXQgdG9nZXRoZXIuIFRoaXMgaXMgYSBsb25nIHNob3QuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q4OWIwOWExM2M1NzQ2NmVhZjZjZWIwM2M1OTM5YjYwLnNldENvbnRlbnQoaHRtbF80OTFiNWVmMDQzNWU0MmM3YjQ1ZGZmNWUwZmIyNGQwZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzg2OGRhMzc3ZjAzYjQzNTY4ZGY5ZjRmYmZmNmYwNTU4LmJpbmRQb3B1cChwb3B1cF9kODliMDlhMTNjNTc0NjZlYWY2Y2ViMDNjNTkzOWI2MCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2U5NjkwZDAzZTU3MjQzNTQ4NzMyMDUxMjJjOTM4NzBlID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzUyMzc3LC0xMjIuNDE0MjM4XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNWU3MjE4ODIyNjRiNGYzYjkzNzM4MWJhYjIyYjQ3MWUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2U5NjkwZDAzZTU3MjQzNTQ4NzMyMDUxMjJjOTM4NzBlLnNldEljb24oaWNvbl81ZTcyMTg4MjI2NGI0ZjNiOTM3MzgxYmFiMjJiNDcxZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdiNjcxNDAwNzY4MzRkYjY5MDU5M2RhMGFlMTc5NDAyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA1MmQ5OTUyNTZiNzQ3YmI5MDFjZTQ4MDE0ODQ3ZDVhID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wNTJkOTk1MjU2Yjc0N2JiOTAxY2U0ODAxNDg0N2Q1YSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG90LCB5b3VuZyBibG9uZGUgZ3V5IGF0IFBoaWx6IENvZmZlZSAtIDI0dGggYW5kIEZvbHNvbTogIAlUb2RheSAoRnJpZGF5KSBhcm91bmQgMTAtMTFBTSB3ZSB3ZXJlIGJvdGggc2l0dGluZyBhdCBhIHRhYmxlIG5leHQgdG8gZWFjaCBvdGhlci4gWW91IHdlcmUgdGhpcyBoYW5kc29tZSBibG9uZGUgZ3V5IHdpdGggYSBNYWNib29rIHRoYXQgaGFkIGEgYmVhY2ggcGhvdG8gb24gdGhlIGJhY2sgYW5kIGFuIGV4dGVybmFsIEhEIHBsdWdnZWQgaW4uIFlvdSB3ZXJlIHdlYXJpbmcgYSBibHVlIGJ1dHRvbi1kb3duLiBJIHdhcyB3ZWFyaW5nIHRoZSBicm93biBzaGlydCBuZWFyIHlvdSBhbmQgaGFkIHRoZSBncmVlbiBjb2F0LiBXZSBsb29rZWQgYXQgZWFjaCBvdGhlciBzZXZlcmFsIHRpbWVzIGFuZCBzbWlsZWQuIEkgZG9uJiMzOTt0IGtub3cgaWYgeW91IGFyZSBnYXkgYnV0IEkgd291bGQgbG92ZSB0byBoYW5nIG91dCBzb21ldGltZS4gSXQmIzM5O3MgcmFyZSB0byBidW1wIGludG8gc29tZW9uZSBhcyBoYW5kc29tZSBhcyB5b3UuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdiNjcxNDAwNzY4MzRkYjY5MDU5M2RhMGFlMTc5NDAyLnNldENvbnRlbnQoaHRtbF8wNTJkOTk1MjU2Yjc0N2JiOTAxY2U0ODAxNDg0N2Q1YSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2U5NjkwZDAzZTU3MjQzNTQ4NzMyMDUxMjJjOTM4NzBlLmJpbmRQb3B1cChwb3B1cF83YjY3MTQwMDc2ODM0ZGI2OTA1OTNkYTBhZTE3OTQwMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2JiZjVkMjUzMGU2ZjRjNzQ4MTFiNGQ0MDI1MWQ5NmYwID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzcyNSwtMTIyLjQxNDddLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9jYjJmNTg5MWVjYmI0Njk0YjhkNzUzYWM1YmUzZTQwMSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYmJmNWQyNTMwZTZmNGM3NDgxMWI0ZDQwMjUxZDk2ZjAuc2V0SWNvbihpY29uX2NiMmY1ODkxZWNiYjQ2OTRiOGQ3NTNhYzViZTNlNDAxKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYWVjZWRiZWE1ODJkNGI5ODgxYmQ3ZWIyNTA1NzhlZmMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjQ4MjdjZWI4OGQ3NDMxNjljNzNmMzBjZDc2ZDZhNDkgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2I0ODI3Y2ViODhkNzQzMTY5YzczZjMwY2Q3NmQ2YTQ5IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBndXkgcmVhZGluZyBhIGJvb2sgYnkgaGltc2VsZiBLb3JldCByb29tIE1PTUE6ICAJSXQgd2FzIGFyb3VuZCA2cG0uIEkgY291bGRuJiMzOTt0IHRlbGwgd2hhdCB5b3Ugd2VyZSByZWFkaW5nLiBJIHdhbnRlZCB0byBzYXkgc29tZXRoaW5nLiBJIHRoaW5rIHlvdSBzYXcgbWUgdG9vLiBJJiMzOTt2ZSBuZXZlciBkb25lIHRoaXMgYmVmb3JlLiBJZiBzb21laG93IHlvdSBzZWUgdGhpcywgbGV0IG1lIGtub3cgaXQmIzM5O3MgeW91LjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hZWNlZGJlYTU4MmQ0Yjk4ODFiZDdlYjI1MDU3OGVmYy5zZXRDb250ZW50KGh0bWxfYjQ4MjdjZWI4OGQ3NDMxNjljNzNmMzBjZDc2ZDZhNDkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iYmY1ZDI1MzBlNmY0Yzc0ODExYjRkNDAyNTFkOTZmMC5iaW5kUG9wdXAocG9wdXBfYWVjZWRiZWE1ODJkNGI5ODgxYmQ3ZWIyNTA1NzhlZmMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl84MGU1ZTE2Mzk1Mjc0MWE4YTcyNGU4ODQ0N2Y0NTczOCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3ODYsLTEyMi40ODkyXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZWJhMDAyMjNmZjM3NGJkNWJiYTFkOWEwNDRiNGFlYzMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzgwZTVlMTYzOTUyNzQxYThhNzI0ZTg4NDQ3ZjQ1NzM4LnNldEljb24oaWNvbl9lYmEwMDIyM2ZmMzc0YmQ1YmJhMWQ5YTA0NGI0YWVjMyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNiYzFhNjdiZDkxMTQxYjk5ZmIzZTQ2NGFiYjljZDNlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2MwYWQ4MjMwYzYyOTQxZmE4MGM5ZDVkOTcxNWFkNTgwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9jMGFkODIzMGM2Mjk0MWZhODBjOWQ1ZDk3MTVhZDU4MCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgQ3V0aWUgaW4gbXkgdWJlciBwb29sLi4gTWFyaW8/OiAgCUkmIzM5O3ZlIG5ldmVyIGRvbmUgb25lIG9mIHRoZXNlIGFuZCBJIGZlZWwgbGlrZSBhIGNyZWVwIGJ1dCB0aXBzeSBtZSBpcyBmZWVsaW5nIHByZXR0eSBicmF2ZSEgSXQmIzM5O3Mgbm90IGxpa2UgeW91JiMzOTtsbCBzZWUgdGhpcyBhbnl3YXkgYnV0IGluIHRoZSBzbGlnaHQgY2hhbmNlIHlvdSBkbywgbGV0JiMzOTtzIGhhbmcgb3V0IGJlZm9yZSB5b3UgbGVhdmUgZm9yIFNhbiBEaWVnbyA6KSBUaGlzIGlzIHNvIHdlaXJkLi4gJmFtcDsjNjU1MzM7PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNiYzFhNjdiZDkxMTQxYjk5ZmIzZTQ2NGFiYjljZDNlLnNldENvbnRlbnQoaHRtbF9jMGFkODIzMGM2Mjk0MWZhODBjOWQ1ZDk3MTVhZDU4MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzgwZTVlMTYzOTUyNzQxYThhNzI0ZTg4NDQ3ZjQ1NzM4LmJpbmRQb3B1cChwb3B1cF8zYmMxYTY3YmQ5MTE0MWI5OWZiM2U0NjRhYmI5Y2QzZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2VjYjYwYzhmZWY0MTRiYTNiZGYwMmM5MmI4YjE1NDNiID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzg3MDI0LC0xMjIuNDAzMDI4XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYjY3OTY4ODM1NDA5NGYwMThiOGJhYTdlN2NmN2I1MGUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2VjYjYwYzhmZWY0MTRiYTNiZGYwMmM5MmI4YjE1NDNiLnNldEljb24oaWNvbl9iNjc5Njg4MzU0MDk0ZjAxOGI4YmFhN2U3Y2Y3YjUwZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQ5ZGI5YTU2YjQzYzQ4MzQ4MDkzZjliZWZmYjNhMjEzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc3ZTRiZjM2NzM5MjRlNjA4MzY4YWFlYTFkZDhkZjFkID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF83N2U0YmYzNjczOTI0ZTYwODM2OGFhZWExZGQ4ZGYxZCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgVGhlIGVsZXZhdG9yIGluIFBhcmsgQ2VudHJhbCBob3RlbCBhcm91bmQgMTI6NDU6ICAJV2UgYm90aCBnb3QgaW4gdGhlIGVsZXZhdG9yIGFyb3VuZCAwMDo0NSBUaHVyc2RheSBuaWdodCAvRnJpZGF5IG1vcm5pbmcgYXQgdGhlIFBhcmsgQ2VudHJhbCBIb3RlbCBhbmQgc29vbiByZWFsaXplZCB3ZSB3ZXJlIGJvdGggZnJvbSBPaGlvLiBZb3UgZ290IG9mZiBvbiB0aGUgMjB0aCBmbG9vci4gSXQgd291bGQgYmUgZnVuIHRvIGNvbnRpbnVlIG91ciBjb252ZXJzYXRpb24hIElmIHlvdSBzZWUgdGhpcywgcGxlYXNlIHNlbmQgYSBtZXNzYWdlITwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80OWRiOWE1NmI0M2M0ODM0ODA5M2Y5YmVmZmIzYTIxMy5zZXRDb250ZW50KGh0bWxfNzdlNGJmMzY3MzkyNGU2MDgzNjhhYWVhMWRkOGRmMWQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9lY2I2MGM4ZmVmNDE0YmEzYmRmMDJjOTJiOGIxNTQzYi5iaW5kUG9wdXAocG9wdXBfNDlkYjlhNTZiNDNjNDgzNDgwOTNmOWJlZmZiM2EyMTMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9hMDIzZjQ2M2IxZTE0ZDFkYTk4ODVjMmY0ZTlhYjFlMCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTMsLTEyMi40MTY3XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZDY5NTkwYTk2NTRkNGE0NWFlN2RkZGVlZDhlYTE0ZTYgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2EwMjNmNDYzYjFlMTRkMWRhOTg4NWMyZjRlOWFiMWUwLnNldEljb24oaWNvbl9kNjk1OTBhOTY1NGQ0YTQ1YWU3ZGRkZWVkOGVhMTRlNik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Y4Njg1ODE2NTM3YzQwNzNiMDI5YWE4YTU2Njg5MDZlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA3ODRkMWMzZmUxNjQyZGVhNTQ3NGJjNjA3ZWJiZjY2ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wNzg0ZDFjM2ZlMTY0MmRlYTU0NzRiYzYwN2ViYmY2NiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgQ3V0ZSBJbmRpYW4gZ3V5ICg/KSBhdCBNaWtrZWxsZXI6ICAJSSBqdXN0IHNhdyB5b3UgYXQgTWlra2VsbGVyLiBJIHRoaW5rIHlvdSB3ZXJlIG9uIGEgZGF0ZS4gSSB3YXMgd2l0aCBhIGNvdXBsZSBvZiBteSBnaXJsIGZyaWVuZHMuIFdlIG1hZGUgYSBsb3Qgb2YgZXllIGNvbnRhY3QuIEkmIzM5O2QgbG92ZSB0byBnZXQgdG8ga25vdyB5b3UgbW9yZS4uLiBQaHlzaWNhbGx5LiBJIGRpc2NyZWV0bHkgdG9vayBhIHBob3RvIG9mIHlvdS4gU2VuZCBtZSBhIHBob3RvIHNvIEkga25vdyBpdCYjMzk7cyB5b3UuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Y4Njg1ODE2NTM3YzQwNzNiMDI5YWE4YTU2Njg5MDZlLnNldENvbnRlbnQoaHRtbF8wNzg0ZDFjM2ZlMTY0MmRlYTU0NzRiYzYwN2ViYmY2Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2EwMjNmNDYzYjFlMTRkMWRhOTg4NWMyZjRlOWFiMWUwLmJpbmRQb3B1cChwb3B1cF9mODY4NTgxNjUzN2M0MDczYjAyOWFhOGE1NjY4OTA2ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2E3OTY5NmJjODU1MzQzYmQ5ODEwMWRkZmVmMjk0NWJjID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgxMywtMTIyLjQxNjddLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8zZWI4Y2I5ZmRhZmE0MGJjYWY0NTYyNGZmMmQ4YWVlMCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYTc5Njk2YmM4NTUzNDNiZDk4MTAxZGRmZWYyOTQ1YmMuc2V0SWNvbihpY29uXzNlYjhjYjlmZGFmYTQwYmNhZjQ1NjI0ZmYyZDhhZWUwKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZGVkZWNlMTUzMGMyNDY2MDkwZDFmMTljY2NjZWJhNWEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNjExNTE4OGQwMDIwNDFiYThmY2Y2YTE3YjIwY2Y0ODIgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzYxMTUxODhkMDAyMDQxYmE4ZmNmNmExN2IyMGNmNDgyIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBDdXRlIEluZGlhbiBndXkgKD8pIGF0IE1pa2tlbGxlciAtIHQ0bTogIAlJIGp1c3Qgc2F3IHlvdSBhdCBNaWtrZWxsZXIuIEkgdGhpbmsgeW91IHdlcmUgb24gYSBkYXRlLiBJIHdhcyB3aXRoIGEgY291cGxlIG9mIG15IGdpcmwgZnJpZW5kcy4gV2UgbWFkZSBhIGxvdCBvZiBleWUgY29udGFjdC4gSSYjMzk7ZCBsb3ZlIHRvIGdldCB0byBrbm93IHlvdSBtb3JlLi4uIFBoeXNpY2FsbHkuIEkgZGlzY3JlZXRseSB0b29rIGEgcGhvdG8gb2YgeW91LiBTZW5kIG1lIGEgcGhvdG8gc28gSSBrbm93IGl0JiMzOTtzIHlvdS48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGVkZWNlMTUzMGMyNDY2MDkwZDFmMTljY2NjZWJhNWEuc2V0Q29udGVudChodG1sXzYxMTUxODhkMDAyMDQxYmE4ZmNmNmExN2IyMGNmNDgyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYTc5Njk2YmM4NTUzNDNiZDk4MTAxZGRmZWYyOTQ1YmMuYmluZFBvcHVwKHBvcHVwX2RlZGVjZTE1MzBjMjQ2NjA5MGQxZjE5Y2NjY2ViYTVhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYjVhY2Y1NzE0OWI0NGExMzg1NjZjNjFmOTJkMGJlMGUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODEzLC0xMjIuNDE2N10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2IzMDAyNzU4MTVhNjQ2NDI5MzhjYTMyNWFiOTAxZTI4ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9iNWFjZjU3MTQ5YjQ0YTEzODU2NmM2MWY5MmQwYmUwZS5zZXRJY29uKGljb25fYjMwMDI3NTgxNWE2NDY0MjkzOGNhMzI1YWI5MDFlMjgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iZjJkZTRlM2RmY2E0ZTAyODk1ZTQyYjdjYzk0ODkwYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yNzY4MDc0MzFlNGI0MWQ2ODhhZGIxNWM3Mzk2MjY5MiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMjc2ODA3NDMxZTRiNDFkNjg4YWRiMTVjNzM5NjI2OTIiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEN1dGUgSW5kaWFuIGd1eSAoPykgYXQgTWlra2VsbGVyOiAgCUkganVzdCBzYXcgeW91IGF0IE1pa2tlbGxlci4gSSB0aGluayB5b3Ugd2VyZSBvbiBhIGRhdGUuIEkgd2FzIHdpdGggYSBjb3VwbGUgb2YgbXkgZ2lybCBmcmllbmRzLiBXZSBtYWRlIGEgbG90IG9mIGV5ZSBjb250YWN0LiBJJiMzOTtkIGxvdmUgdG8gZ2V0IHRvIGtub3cgeW91IG1vcmUuLi4gUGh5c2ljYWxseS4gSSBkaXNjcmVldGx5IHRvb2sgYSBwaG90byBvZiB5b3UuIFNlbmQgbWUgYSBwaG90byBzbyBJIGtub3cgaXQmIzM5O3MgeW91LjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iZjJkZTRlM2RmY2E0ZTAyODk1ZTQyYjdjYzk0ODkwYy5zZXRDb250ZW50KGh0bWxfMjc2ODA3NDMxZTRiNDFkNjg4YWRiMTVjNzM5NjI2OTIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iNWFjZjU3MTQ5YjQ0YTEzODU2NmM2MWY5MmQwYmUwZS5iaW5kUG9wdXAocG9wdXBfYmYyZGU0ZTNkZmNhNGUwMjg5NWU0MmI3Y2M5NDg5MGMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9mNTRhMzE2YmZkZmU0OTc5YWEzNDBhOGI4MWUzZWMzYiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjcxOTUsLTEyMi40NDExXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOTYxYmMwYzA1NzUwNDgyODk1ZjEwOWE4ZjE4YmE4MzEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Y1NGEzMTZiZmRmZTQ5NzlhYTM0MGE4YjgxZTNlYzNiLnNldEljb24oaWNvbl85NjFiYzBjMDU3NTA0ODI4OTVmMTA5YThmMThiYTgzMSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzlkNGVjYWRiNTk2ZTQ1ZTE4MWRkMGY4ZWVkMGU2ZWI0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Y3YjE4MjhhZDA2MTQ5M2M4MTAzMzI2Mjc0Njg3YjJjID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9mN2IxODI4YWQwNjE0OTNjODEwMzMyNjI3NDY4N2IyYyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTSBUcmFpbiAtIEV2YW5nZWxpb246ICAJSSBwdWxsZWQgb3V0IG15IE1hYyBhbmQgeW91IHNhdyBteSBFdmFuZ2VsaW9uIGJhY2tncm91bmQuIExlYWQgdG8gYSBwcmV0dHkgZG9wZSBjb252ZXJzYXRpb24uIFlvdSYjMzk7cmUgZnJvbSBTbyBDYWwsIGxpdmUgaW4gUGFyayBNZXJjZWQgYW5kIG1vdmluZyB0byBJbmdsZXNpZGUgc29vbi4gRG9uJiMzOTt0IHdhbnQgdG8gZHJvcCB5b3VyIG5hbWUgYnV0IGl0IHN0YXJ0cyB3aXRoIGEgRy4gSSB3YXMgd2l0aCB0d28gb2YgbXkgZnJpZW5kcyBha2EgbWVtYmVycyBvZiBteSAmIzM0O2JveSBiYW5kLiYjMzQ7IFRob3VnaHQgeW91IHdlcmUgaGVsbGEgY3V0ZSwgc3VwZXIgY2hpbGwgYW5kIGxpa2VkIHlvdXIgc3R5bGUgYSBsb3QuIERpZG4mIzM5O3Qgd2FudCB0byBiZSB0aGlyc3R5IGFuZCBhc2sgZm9yIHlvdXIgbnVtYmVyIGJ1dCBJIHNob3VsZCBoYXZlIGdpdmVuIHlvdSBtaW5lLiBUaGlzIGlzIGEgbG9uZyBzaG90IGZvciBzdXJlLCBidXQgd29ydGggdGhlIHRyeS4gSG9wZWZ1bGx5IGl0IHdvcmtzISBIaXQgbWUgdXA/PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzlkNGVjYWRiNTk2ZTQ1ZTE4MWRkMGY4ZWVkMGU2ZWI0LnNldENvbnRlbnQoaHRtbF9mN2IxODI4YWQwNjE0OTNjODEwMzMyNjI3NDY4N2IyYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2Y1NGEzMTZiZmRmZTQ5NzlhYTM0MGE4YjgxZTNlYzNiLmJpbmRQb3B1cChwb3B1cF85ZDRlY2FkYjU5NmU0NWUxODFkZDBmOGVlZDBlNmViNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzE1NDU3MmU5N2QwODQwNzViM2FlMDdjNGMyMzQyYTQ4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNjU4MDA0LC0xMjIuNDEzNDQ1XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMTg3NjBkNDMyYTFiNGNkOThkYmUwNTEwOGMwM2ZiMmYgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzE1NDU3MmU5N2QwODQwNzViM2FlMDdjNGMyMzQyYTQ4LnNldEljb24oaWNvbl8xODc2MGQ0MzJhMWI0Y2Q5OGRiZTA1MTA4YzAzZmIyZik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2UwZDM4MDU2Nzg0YzQ1MWJhNGI0ZTliYTA2MTIwMTQwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Y0ZDA1YmM2YjMzNzRhMWY4YzA4ZTc0ZWU2OWFjNGNiID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9mNGQwNWJjNmIzMzc0YTFmOGMwOGU3NGVlNjlhYzRjYiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTWV0IG9uIGZsaWdodCBmcm9tIFNGTyB0byBMQVg6ICAJWW91IGhlbHBlZCBtZSBzd2FwIHRoZSBwZWFudXRzIGZvciBteSBiYWcgYW5kIHNhdmVkIG1lIGZyb20gaGF2aW5nIHRvIGNoZWNrIGl0IChtYW55IHRoYW5rcykuIEkgc2VudCB5b3UgYSBiZWVyIHRoYXQgeW91IGFwcGFyZW50bHkgbmV2ZXIgcmVjZWl2ZWQuIFlvdXIgZnJpZW5kIHdpdGggdGhlIHdvbWFuJiMzOTtzIGhhdCBhc2tlZCBtZSBob3cgbXVjaCBJIHRob3VnaHQgaGlzIGNyYXp5IHNoaXJ0IGNvc3QgYW5kIEkgcmVwbGllZCB1bmZvcnR1bmF0ZWx5IHdpdGggdGhlIG11Y2ggbG93ZXIgb3B0aW9uLiBZb3Ugc2VlbWVkIHByZXR0eSBjb29sIGFuZCBmdW5ueSBidXQgSSBndWVzcyBJIGRpZG4mIzM5O3QgdGhpbmsgdG8gYXNrIHlvdXIgbmFtZSBvciBhbnl0aGluZyB3aGljaCBJIHJlZ3JldC4gTWVzc2FnZSBtZSB3aXRoIHNvbWV0aGluZyB0aGF0IHNob3dzIHRoYXQgaXQmIzM5O3MgeW91LCBpbiB0aGUgb2ZmIGNhc2UgYW55b25lIG5vcm1hbCBhY3R1YWxseSBsb29rcyBhdCBtaXNzZWQgY29ubmVjdGlvbnMuIENhbiYjMzk7dCBiZWxpZXZlIEkmIzM5O20gcG9zdGluZyB0aGlzLjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lMGQzODA1Njc4NGM0NTFiYTRiNGU5YmEwNjEyMDE0MC5zZXRDb250ZW50KGh0bWxfZjRkMDViYzZiMzM3NGExZjhjMDhlNzRlZTY5YWM0Y2IpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8xNTQ1NzJlOTdkMDg0MDc1YjNhZTA3YzRjMjM0MmE0OC5iaW5kUG9wdXAocG9wdXBfZTBkMzgwNTY3ODRjNDUxYmE0YjRlOWJhMDYxMjAxNDApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8yODUzMDc0MGQyNTA0YTRhYjc2ZWU1YzJjYmM1MjdjMSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc5MTUsLTEyMi40MDE4XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYTRlMzYyOTA3Yjk3NDFkMjkwOTViNWIwZmU2MmVmZGQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzI4NTMwNzQwZDI1MDRhNGFiNzZlZTVjMmNiYzUyN2MxLnNldEljb24oaWNvbl9hNGUzNjI5MDdiOTc0MWQyOTA5NWI1YjBmZTYyZWZkZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzVjNjY5ZWFmZGE1YTQ4ZGZiOGY2ZTM0YzE2NGNjYzcyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q3MTViM2U5MmFmODRlODU5MzM2NGIxNDk1NWQ0ZGU1ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9kNzE1YjNlOTJhZjg0ZTg1OTMzNjRiMTQ5NTVkNGRlNSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTWF0dXJlIGJ1c2luZXNzIGd1eSAtIFdlc3RpbiBMb2JieTogIAlZb3Ugd2VyZSB0aGUgYXR0cmFjdGl2ZSBzdWl0ZWQgYnVzaW5lc3MgZ3V5IGluIHRoZSBsb2JieSBvZiB0aGUgV2VzdGluIG9uIHdoYXQgbG9va2VkIGxpa2UgY29uZHVjdGluZyBhbiBpbnRlcnZpZXcuIEkgd2FzIHRoZSB5b3VuZ2VyIGJ1ZCBjaGVja2luZyB5b3Ugb3V0LiBXb3VsZCBsaWtlIHRvIHNlcnZpY2UgeW91LiBIb3BlIHlvdSBzZWUgdGhpcy48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNWM2NjllYWZkYTVhNDhkZmI4ZjZlMzRjMTY0Y2NjNzIuc2V0Q29udGVudChodG1sX2Q3MTViM2U5MmFmODRlODU5MzM2NGIxNDk1NWQ0ZGU1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMjg1MzA3NDBkMjUwNGE0YWI3NmVlNWMyY2JjNTI3YzEuYmluZFBvcHVwKHBvcHVwXzVjNjY5ZWFmZGE1YTQ4ZGZiOGY2ZTM0YzE2NGNjYzcyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNGNhOTkxOTNjMjYyNGI2YWEwNzM5MjczNGVjMzFmMGMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NTg3LC0xMjIuNDMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMTFiMTQzOTJkYWJjNDgzODk4YTZiNjc5MmZkYTg1YjkgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzRjYTk5MTkzYzI2MjRiNmFhMDczOTI3MzRlYzMxZjBjLnNldEljb24oaWNvbl8xMWIxNDM5MmRhYmM0ODM4OThhNmI2NzkyZmRhODViOSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MxNDRjZGU0NGU0YTRiY2E5NGU2MWQ1ZmU0MzMxODk1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFkMGM4Y2I0MGJhYzQ4ZmU5NWIxMWUyYmY1ZThiYTgwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xZDBjOGNiNDBiYWM0OGZlOTViMTFlMmJmNWU4YmE4MCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgV2hpdGUtaGFpcmVkIGdlbnRsZW1hbi9DYXN0cm8gaW5ib3VuZCAxMjo0MHBtLWlzaDogIAlIaSB0aGVyZS4gVGhpcyBpcyBhIGxvbmcgc2hvdCwgYnV0IHlvdSBuZXZlciBrbm93LiBZb3UgYXJlIHRoZSB3aGl0ZS1oYWlyZWQsIGhhbmRzb21lIGdlbnRsZW1hbiB0aGF0IGdvdCBvbiB0aGUgaW5ib3VuZCB0cmFpbiBmcm9tIENhc3RybyBzdGF0aW9uIHRvZGF5IChUaHVyc2RheSwgMDcvMDcpIGFib3V0IDEyOjQwcG0uIFNvIGRpZCBJLiBXZSBnb3Qgb24gdGhlIHNhbWUgY2FyLiBZb3Ugc2F0IGRvd24gcmlnaHQgbmV4dCB0byB0aGUgZG9vciwgYW5kIEkgc3Rvb2QgbmV4dCB0byB0aGUgZG9vci4gSSBnb3Qgb2ZmIGF0IE1vbnRnb21lcnkuIEkgdGhvdWdodCB5b3Ugd2VyZSBzbWlsaW5nIGF0IG1lLCBidXQgSSBjYW4gbmV2ZXIgdGVsbCB3aXRoIHRoZXNlIHRoaW5ncy4gSWYgc28sIEkgYW0gZGVmaW5pdGVseSBpbnRlcmVzdGVkLiBJIHdhcyBvbiBteSB3YXkgYmFjayB0byB3b3JrLiBXZWFyaW5nIGJsYWNrIHBhbnRzLCBsaWdodCBwdXJwbGlzaCBzaGlydCwgc2xlZXZlcyByb2xsZWQgdXAgKHRhdHRvbyBvbiBteSBsZWZ0IGFybSkuIFNob3J0IGhhaXIgKGFsbW9zdCBzaGF2ZWQpLCBncmV5aW5nIGJlYXJkLCBkYXJraXNoIGNvbXBsZXhpb24uIEFueXdheSwgaWYgeW91IHNlZSB0aGlzICh3aGljaCB3b3VsZCBiZSBhIG1pcmFjbGUpLCBhbmQgeW91IGFyZSBpbnRlcmVzdGVkLCBwbGVhc2UgY29udGFjdCBtZS4gSSYjMzk7ZCBsb3ZlIHRvIG1lZXQgeW91LiA6KTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMTQ0Y2RlNDRlNGE0YmNhOTRlNjFkNWZlNDMzMTg5NS5zZXRDb250ZW50KGh0bWxfMWQwYzhjYjQwYmFjNDhmZTk1YjExZTJiZjVlOGJhODApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl80Y2E5OTE5M2MyNjI0YjZhYTA3MzkyNzM0ZWMzMWYwYy5iaW5kUG9wdXAocG9wdXBfYzE0NGNkZTQ0ZTRhNGJjYTk0ZTYxZDVmZTQzMzE4OTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl81MzQ4NDIzZTY4MzU0ODEyYTVkMmMwMjE3ZDE1YmNlZiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc1MDgzMywtMTIyLjQwOTMyNV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzNlZGUwYzM2ZTQ0MzQzNmE5NDdlMDY4ZDdhNWMyYjg1ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl81MzQ4NDIzZTY4MzU0ODEyYTVkMmMwMjE3ZDE1YmNlZi5zZXRJY29uKGljb25fM2VkZTBjMzZlNDQzNDM2YTk0N2UwNjhkN2E1YzJiODUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xNTU0ODQ5NTdiZWY0OWI0YWI4MjlkMzYwNjI3NjgxZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yZjMwY2RhNGQxYjc0OTExOGZmOGFjY2ZkZmYwODE3ZiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMmYzMGNkYTRkMWI3NDkxMThmZjhhY2NmZGZmMDgxN2YiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIG9yYWxseSBtb2xlc3RlZCBwb3N0aW5nIGdvdCBuaXhlZDogIAl5b3Ugd2VyZSBnb2luZyB0byBjb21lIG92ZXIgYnV0IHlvdXIgb3JnaW5hbCBnb3QgZmxhZ2dlZCwsIGdldCBiYWNrIHRvIG1lIGFuZCBJJiMzOTtsbCBzZW5kIG15IG51bWJlciBvciB5b3Ugc2VuZCB5b3Vycy4gbXlmcmllbmQgYW5kIEkgYm90aCB3YW50IHRvIGxpY2sgeW91ciBhc3M8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTU1NDg0OTU3YmVmNDliNGFiODI5ZDM2MDYyNzY4MWQuc2V0Q29udGVudChodG1sXzJmMzBjZGE0ZDFiNzQ5MTE4ZmY4YWNjZmRmZjA4MTdmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNTM0ODQyM2U2ODM1NDgxMmE1ZDJjMDIxN2QxNWJjZWYuYmluZFBvcHVwKHBvcHVwXzE1NTQ4NDk1N2JlZjQ5YjRhYjgyOWQzNjA2Mjc2ODFkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfOThjYjFmYzg5MmRjNDY3MjljZDBhZWVkMDQ5MGEwODUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy41NjAwOTIsLTEyMi4yNzU2XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZTUzYzdjMGMxNGRiNDM5MGFkNjhmZDY0MDQyYmIwYzQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzk4Y2IxZmM4OTJkYzQ2NzI5Y2QwYWVlZDA0OTBhMDg1LnNldEljb24oaWNvbl9lNTNjN2MwYzE0ZGI0MzkwYWQ2OGZkNjQwNDJiYjBjNCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ZkZjcwMWUwY2Q1NzQ3YjdiNmFlN2ZiMmM4ZWIwNjdjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzlkMGQwYzExZDNlYjRmMzJiZmZmZWFmMTIxMzNiMWIxID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF85ZDBkMGMxMWQzZWI0ZjMyYmZmZmVhZjEyMTMzYjFiMSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgRmFybSBHaXJsOiAgCUkgbWlzcyB5b3UuIEkgY2FuJiMzOTt0IGhlbHAgYnV0IHRoaW5rIG9mIHRoZSB0aW1lcyB3ZSBoYWQgYW5kIHRoZSBjb25uZWN0aW9uIHdlIGhhZC4gSSB3aXNoIHlvdSB3ZXJlIHN0aWxsIGluIG15IGxpZmUuIFNoZSBrbm93cyBhYm91dCB0aGlzIHNpdGUgbm93LCBhbmQgSSB3aXNoIHlvdSBhbmQgSSBjb3VsZCBjb21tdW5pY2F0ZSBzb21laG93IHdpdGhvdXQgaGVyIGtub3dpbmcgYWJvdXQgaXQuIERvbiYjMzk7dCB0aGluayB0aGF0IEkgaGF2ZW4mIzM5O3QgbWlzc2VkIHlvdSwgZXNwZWNpYWxseSBEZWNlbWJlciAyMDEyIHdoZW4gd2UgbGFzdCBzYXcgZWFjaCBvdGhlci4gSXQmIzM5O3MgYmVlbiBmb3VyIHllYXJzIGFuZCBJIGtlZXAgdGhpbmtpbmcgb2YgeW91LiBJIGRvbiYjMzk7dCBrbm93IHRoYXQgbXkgY29ubmVjdGlvbiB3aXRoIGhlciB3aWxsIGV2ZXIgYmUgdGhhdCBlbGVjdHJpYywgd2l0aCB0aGF0IHNleHVhbCBlbmVyZ3kgYW5kIHBhc3Npb24gdGhhdCB5b3UgYW5kIEkgaGFkLiBJIGhvcGUgeW91IGFyZSB3ZWxsLiBJJiMzOTt2ZSB0cmllZCB0byBlbWFpbCB5b3VyIG9sZCBhZGRyZXNzIGJ1dCBpdCBib3VuY2VkIGJhY2suIFNvcnJ5IHdlIGNvdWxkbiYjMzk7dCBnZXQgbWFycmllZCwgb3IgY2Fycnkgb3VyIHJlbGF0aW9uc2hpcCBmb3J3YXJkLiBJIGhvcGUgeW91IHVuZGVyc3RhbmQuIElmIHRoZXJlJiMzOTtzIGFueSBkb3VidCBhcyB0byB3aG8gSSBhbSwgeW91IGFuZCBJIGRyb3ZlIHNpbWlsYXIgY2FycyBhbmQgd2UgbWV0IGluIFNlcHRlbWJlciBvZiAyMDEyIGF0IG15IHBsYWNlICh0aHJvdWdoIE9LIEN1cGlkKS4gSSB3aXNoIHRoZSBiZXN0IGZvciB5b3UsIEkmIzM5O2xsIHNlZSB5b3UgaW4gbXkgZHJlYW1zLiBZb3UgaGF2ZSBteSBlbWFpbDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mZGY3MDFlMGNkNTc0N2I3YjZhZTdmYjJjOGViMDY3Yy5zZXRDb250ZW50KGh0bWxfOWQwZDBjMTFkM2ViNGYzMmJmZmZlYWYxMjEzM2IxYjEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl85OGNiMWZjODkyZGM0NjcyOWNkMGFlZWQwNDkwYTA4NS5iaW5kUG9wdXAocG9wdXBfZmRmNzAxZTBjZDU3NDdiN2I2YWU3ZmIyYzhlYjA2N2MpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9mN2VjNzc5OTgzZWY0NjA1YmNlMjVkYzlmOGYxYjUwZiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NTg0LC0xMjIuNDA1ODE2XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYjEwZGM2M2E2NGZhNGU0YmFhMDBjMDZmMjdkODM3MzQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Y3ZWM3Nzk5ODNlZjQ2MDViY2UyNWRjOWY4ZjFiNTBmLnNldEljb24oaWNvbl9iMTBkYzYzYTY0ZmE0ZTRiYWEwMGMwNmYyN2Q4MzczNCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I2M2I4NTNjMWIxYjRhMDdiY2Y3OTY0NzUwYzYyNDZkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2VlMGEyMjhhOWNiODRkNTY4MDM5MjViNzkzZjhmYTEwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9lZTBhMjI4YTljYjg0ZDU2ODAzOTI1Yjc5M2Y4ZmExMCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgR29sZGVuIGxvY2tzIEJydW5ldHRlIHRvb2sgbXkgYnJlYXRoLjogIAlJIGRvIG5vdCBsaWtlIHRvIGJlIHNjYXJlZCwgd2l0aG91dCBicmVhdGguIEEgc3R1dHRlciBpbiBteSByZXNwaXJhdGlvbiBhcyBsb3NzIG9mIG94eWdlbiBjcmlwcGxlZCBtZSBtb21lbnRhcmlseS4gWW91OyBzbyBwaWN0dXJlc3F1ZSB3aXRob3V0IGEgc3RpdGNoIG9mIG1ha2V1cCBvbiB0aGF0IGhlaWdodGVuZWQgdGhlIGJlYXV0eSBvZiB5b3VyIGJydW5ldHRlIGhhaXIgd2l0aCBnb2xkZW4gbG9ja3MuIEkgaGFkIG15IG1pcnJvcnMgb24sIGxpa2UgYWx3YXlzIGVpdGhlciBuaWdodCBvciB0aGUgZGF3bmluZywgc28geW91IGNvdWxkIG5vdCB0ZWxsIG15IHRlbGwtdGFsZSBnYXdraW5nIGFzIEkgcHJhdHRsZWQgZm9ydGggYWJvdXQgYSBzdWljaWRlIGJ5IGNvcC4gSSBwb3N0IHRoaXMganVzdCB0byBsZXQgeW91LCBCcnVuZXR0ZSBHb2xkaWxvY2tzLCBrbm93IHlvdXIgYmVhdXR5IHdhcyBhY2tub3dsZWRnZWQgYW5kIGFwcHJlY2lhdGVkLiBNb3N0IHdvbWVuIGRvbiYjMzk7dCBoZWFyIHRoYXQgZW5vdWdoLiBObyByZXBsaWVzIHdpbGwgYmUgYWNrbm93bGVkZ2VkPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2I2M2I4NTNjMWIxYjRhMDdiY2Y3OTY0NzUwYzYyNDZkLnNldENvbnRlbnQoaHRtbF9lZTBhMjI4YTljYjg0ZDU2ODAzOTI1Yjc5M2Y4ZmExMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2Y3ZWM3Nzk5ODNlZjQ2MDViY2UyNWRjOWY4ZjFiNTBmLmJpbmRQb3B1cChwb3B1cF9iNjNiODUzYzFiMWI0YTA3YmNmNzk2NDc1MGM2MjQ2ZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzQ1ZTNkOWUyZmFlYzRlOGQ4MzE3Mzc4ZWRjODVkOTA4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzk5OSwtMTIyLjQzNDJdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl84NWFjNzc3YjQzNWY0YTE2ODcxZjM0YzVmM2Q2NWQ4OSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNDVlM2Q5ZTJmYWVjNGU4ZDgzMTczNzhlZGM4NWQ5MDguc2V0SWNvbihpY29uXzg1YWM3NzdiNDM1ZjRhMTY4NzFmMzRjNWYzZDY1ZDg5KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNmZjMWYzZWU1ZDcwNDMwNDgwMGIxN2ZlODRmNzZhOTkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDllODViZDFlNjc4NDE4ZDkwNzA1M2E3ZGNlNjFiZTUgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2Q5ZTg1YmQxZTY3ODQxOGQ5MDcwNTNhN2RjZTYxYmU1IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBFcXVpbm94IGd5bSA2cG0gV2VkbmVzZGF5OiAgCVNhdyB5b3Ugd29ya2luZyBvdXQgb24gdGhlIGZsb29yIGFuZCB0aGVuIGFnYWluIGluIHRoZSBsb2NrZXIgcm9vbSBhZnRlcndhcmRzLiBZb3UgYXJlIGEgdGFsbCwgY3V0ZSBBc2lhbiBvciBBc2lhbiBtaXguIFdlIGhhZCBvdXIgbG9ja2VycyBuZWFyIGVhY2ggb3RoZXIuIFdvdWxkIGxvdmUgdG8gZ3JhYiBhIGRyaW5rIG9yIGNvZmZlZSBhZnRlciB5b3VyIG5leHQgd29ya291dC4gSG11PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZmYzFmM2VlNWQ3MDQzMDQ4MDBiMTdmZTg0Zjc2YTk5LnNldENvbnRlbnQoaHRtbF9kOWU4NWJkMWU2Nzg0MThkOTA3MDUzYTdkY2U2MWJlNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzQ1ZTNkOWUyZmFlYzRlOGQ4MzE3Mzc4ZWRjODVkOTA4LmJpbmRQb3B1cChwb3B1cF82ZmMxZjNlZTVkNzA0MzA0ODAwYjE3ZmU4NGY3NmE5OSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzkwNmM5YWEyZDYxMDQxMDQ4ZTE5YjBiNDc2YzYxYjc1ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzcxMiwtMTIyLjQ0MTNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85YTA5MDU3MjgzZGI0YWI2OTI3ZjU1YzVlNDljNDI1YiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfOTA2YzlhYTJkNjEwNDEwNDhlMTliMGI0NzZjNjFiNzUuc2V0SWNvbihpY29uXzlhMDkwNTcyODNkYjRhYjY5MjdmNTVjNWU0OWM0MjViKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjdmOTQzNzUwYTQ2NGMwMmEyMGRlZTFiNmZlNTFmNGEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMTUzZDQxMmJjZmI4NGFjYjkxMzVjMzBiOThhZjhmNGQgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzE1M2Q0MTJiY2ZiODRhY2I5MTM1YzMwYjk4YWY4ZjRkIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBhc2lhbiBib3kgb24gb3V0Ym91bmQgMjQgYnVzOiB0dWVzZGF5IDEyOjMwcG06ICAJV2UgY3J1aXNlZCBlYWNoIG90aGVyIHdoaWxlIHdhaXRpbmcgdG8gYm9hcmQgdGhlIG91dGJvdW5kIDI0IGJ1cyBhdCBPYWsgJmFtcDsgRGl2aXNhZGVybyB5ZXN0ZXJkYXkgKFR1ZXNkYXksIEp1bHkgNXRoKSBhcm91bmQgMTI6MzBwbS4gVGhlIGxvb2tzIGNvbnRpbnVlZCB1bnRpbCB5b3UgZ290IG9mZiBhdCAxNnRoIFN0LiBDb250YWN0IG1lIHdpdGggZGV0YWlscyBpZiB5b3Ugc2VlIHRoaXMgbWVzc2FnZS48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjdmOTQzNzUwYTQ2NGMwMmEyMGRlZTFiNmZlNTFmNGEuc2V0Q29udGVudChodG1sXzE1M2Q0MTJiY2ZiODRhY2I5MTM1YzMwYjk4YWY4ZjRkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfOTA2YzlhYTJkNjEwNDEwNDhlMTliMGI0NzZjNjFiNzUuYmluZFBvcHVwKHBvcHVwXzI3Zjk0Mzc1MGE0NjRjMDJhMjBkZWUxYjZmZTUxZjRhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMTE1YjNhOGQ5NTAzNDczZDg0OTFlZGIyNjI4ZDJkYTkgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43OTE3LC0xMjIuNDE4Nl0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzQ4YjU4NzczYTE0ODRhYThiN2IyODFhNGI4ZGY4YjlkID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xMTViM2E4ZDk1MDM0NzNkODQ5MWVkYjI2MjhkMmRhOS5zZXRJY29uKGljb25fNDhiNTg3NzNhMTQ4NGFhOGI3YjI4MWE0YjhkZjhiOWQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83ZGExYTkyYTkwNmM0YmQ3YjNhZDFiNTE2YWRiODI4ZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iODZiZjdkZjM4ZjI0Y2EzYmQwYzU2Y2ExNDljNjhlZCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYjg2YmY3ZGYzOGYyNGNhM2JkMGM1NmNhMTQ5YzY4ZWQiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDVSIG11bmkgdGhhdCByZS1yb3V0ZWQgZHVlIHRvIHNob290aW5nOiAgCVlvdSB3ZXJlIGluIGFsbCByZWQgc2hpcnQgc2hvcnRzIHNvY2tzIHNvY2tlciBqb2NrIHdobyBqdXN0IG1vdmVkIGhlcmUgZnJvbSBOZXcgSmVyc2V5LiBJIHNhdCBhY3Jvc3MgZnJvbSB5b3Ugd2l0aCBUYXJnZXQgc2hvcHBpbmcgYmFncyBhbmQgam9rZWQgd2Ugd2VyZSBiZWluZyBoaS1qYWNrZWQuIEkmIzM5O2QgbGlrZSB0byBzaG93IHlvdSBhcm91bmQgU2FuIEZyYW5jaXNjb2FuZCBJJiMzOTt2ZSBsaXZlZCBoZXJlIDIwIHllYXJzLiBZb3Ugc2VlbSBsaWtlIGEgbmljZSBndXkgSSYjMzk7ZCBsaWtlIHRvIGJlIHlvdXIgZnJpZW5kITwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ZGExYTkyYTkwNmM0YmQ3YjNhZDFiNTE2YWRiODI4ZC5zZXRDb250ZW50KGh0bWxfYjg2YmY3ZGYzOGYyNGNhM2JkMGM1NmNhMTQ5YzY4ZWQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8xMTViM2E4ZDk1MDM0NzNkODQ5MWVkYjI2MjhkMmRhOS5iaW5kUG9wdXAocG9wdXBfN2RhMWE5MmE5MDZjNGJkN2IzYWQxYjUxNmFkYjgyOGQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8xNjZkMGNkMDllMDM0NjYzYWQ4ZjEwNDQyODlhNzA5MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM4LjY4MjMxNywtMTIxLjUyNTg5OV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzgwNDliOTNjODk2ZDRiNmU4NGFmOWUxNDAxODUyZTU5ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xNjZkMGNkMDllMDM0NjYzYWQ4ZjEwNDQyODlhNzA5My5zZXRJY29uKGljb25fODA0OWI5M2M4OTZkNGI2ZTg0YWY5ZTE0MDE4NTJlNTkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jZjFkMjJiNjUzNWQ0MDg1YjVhNmUyNWJkYjIzOTIzYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jOGU0NGRhNjliMGY0ODEyOTc1M2JhNzAwOWZjOWIxMyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYzhlNDRkYTY5YjBmNDgxMjk3NTNiYTcwMDlmYzliMTMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFdhbnQgdG8gZmluZCBKb2U/IE1ldCAxOTU5IHdoZW4gaGUgd2FzIGluIE1vdW50YWluIEhvbWU6ICAJdzRtIEpvZSwgSSBoYXZlbiYjMzk7dCBzZWVuIHlvdSBzaW5jZSBTYW4gRnJhbmNpc2NvLCAxOTYwLTYxIFlvdSB3ZW50IG9mZiB0byBTeXJhY3VzZSBVIChBcmNoaXRlY3R1cmUpIGFuZCBJIG1vdmVkIHRvIE5ldyBKZXJzZXkuIFdvdWxkIGxvdmUgdG8gY2F0Y2ggdXAuIENhbiYjMzk7dCByZW1lbWJlciB5b3VyIGxhc3QgbmFtZS48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfY2YxZDIyYjY1MzVkNDA4NWI1YTZlMjViZGIyMzkyM2Muc2V0Q29udGVudChodG1sX2M4ZTQ0ZGE2OWIwZjQ4MTI5NzUzYmE3MDA5ZmM5YjEzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMTY2ZDBjZDA5ZTAzNDY2M2FkOGYxMDQ0Mjg5YTcwOTMuYmluZFBvcHVwKHBvcHVwX2NmMWQyMmI2NTM1ZDQwODViNWE2ZTI1YmRiMjM5MjNjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfOTY2YzQ4NTg2ODczNDM5NWE4NWI3ZjdiZWE4MzE5ZmQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NTA5LC0xMjIuNDE1M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzkyZjcyOTNhMmY4ZDQ4YTZhZjJlN2EzOGMyNzAwZjMxID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl85NjZjNDg1ODY4NzM0Mzk1YTg1YjdmN2JlYTgzMTlmZC5zZXRJY29uKGljb25fOTJmNzI5M2EyZjhkNDhhNmFmMmU3YTM4YzI3MDBmMzEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yZWJhMjA2NDkyNmI0MGRiODRjYTE4NmViMDY1NGYwYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85ZTNmMTA2YmFmNzY0MzBmYTkwZjBhYzNhOWVhOTk4ZiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOWUzZjEwNmJhZjc2NDMwZmE5MGYwYWMzYTllYTk5OGYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEhhcHB5IEJpcnRoZGF5LCBETTogIAlIYXBweSBCaXJ0aGRheSwgSSBob3BlIHRoYXQgeW91IGFyZSB3ZWxsIGFuZCB5b3UgYXJlIGVuam95aW5nIHlvdXIgZGF5LiBJIHRoaW5rIG9mIHlvdSBvZnRlbi4gVGFrZSBjYXJlPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJlYmEyMDY0OTI2YjQwZGI4NGNhMTg2ZWIwNjU0ZjBiLnNldENvbnRlbnQoaHRtbF85ZTNmMTA2YmFmNzY0MzBmYTkwZjBhYzNhOWVhOTk4Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzk2NmM0ODU4Njg3MzQzOTVhODViN2Y3YmVhODMxOWZkLmJpbmRQb3B1cChwb3B1cF8yZWJhMjA2NDkyNmI0MGRiODRjYTE4NmViMDY1NGYwYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2VmNjk1MzQ4NjE3MzQ1YWQ4OTg3YTBiZjQ1MDA2NWZlID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzAuMDA0MiwtOTUuMTcyOF0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzIxZmY0OWJmYTY2ZDQ5MzFhMDY3OWQ0YWQ2MTNhNTc2ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9lZjY5NTM0ODYxNzM0NWFkODk4N2EwYmY0NTAwNjVmZS5zZXRJY29uKGljb25fMjFmZjQ5YmZhNjZkNDkzMWEwNjc5ZDRhZDYxM2E1NzYpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ODkyOGQ0ZWE4NmU0YjBmOWNlMTEwOGE1ZDU5YjU0ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wNDI4ODFhYTI0MmE0YThjOWVlZGZhZWQ5YTM1NjViNSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMDQyODgxYWEyNDJhNGE4YzllZWRmYWVkOWEzNTY1YjUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIExvb2tpbmcgZm9yIG15IEZsaWdodCBBdHRlbmRhbnQgd2hvJiMzOTtzIGFib3V0IHRvIGJlIGEgbnVyc2U6ICAJSSYjMzk7bSBpbiBIb3VzdG9uLiBHdWVzcyB0aGV5IGRpZG4mIzM5O3QgZ2l2ZSB5b3UgYSBuZXcgcGhvbmUuIFNob3QgaW4gdGhlIGRhcmssIGJ1dCB3aGF0IHRoZSBoZWxsPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY4OTI4ZDRlYTg2ZTRiMGY5Y2UxMTA4YTVkNTliNTRlLnNldENvbnRlbnQoaHRtbF8wNDI4ODFhYTI0MmE0YThjOWVlZGZhZWQ5YTM1NjViNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2VmNjk1MzQ4NjE3MzQ1YWQ4OTg3YTBiZjQ1MDA2NWZlLmJpbmRQb3B1cChwb3B1cF82ODkyOGQ0ZWE4NmU0YjBmOWNlMTEwOGE1ZDU5YjU0ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzFkNGM1M2VlODc4OTQwYzBiYThlNTQyMDE3ZjliMjljID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzg2NCwtMTIyLjM4OTJdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9kYjUzZTllNzc2YTQ0ZWIwYWZiM2M1YWQ3NGRhNGRmMSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMWQ0YzUzZWU4Nzg5NDBjMGJhOGU1NDIwMTdmOWIyOWMuc2V0SWNvbihpY29uX2RiNTNlOWU3NzZhNDRlYjBhZmIzYzVhZDc0ZGE0ZGYxKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzljNDljYTM0YjQ2NDMwOGE4ZmFlZDMyNWY4NWI3NmIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZWE1MWZkNjI3OGIxNDIxNTk4ZTc2M2E0NjhhN2RkM2QgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2VhNTFmZDYyNzhiMTQyMTU5OGU3NjNhNDY4YTdkZDNkIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBTYXcgZWFjaCBvdGhlciBvbiBCYXJ0IHllc3RlcmRheSAtIEVtYmFyY2FkZXJvOiAgCUhpLCBKdXN0IHRocm93aW5nIHRoaXMgb3V0IHRoZXJlLCBidXQgd2UgbWFkZSBleWUgY29udGFjdCBvbiBCYXJ0IGF0IGVpdGhlciBsYWtlIE1lcnJpdHQgb3Igd2VzdCBPYWtsYW5kIHN0YXRpb24uIFlvdSB3ZXJlIGluIGEgd2hpdGUgYmxvdXNlLiBBcyBJIGdvdCBvZmYgb24gRW1iYXJjYWRlcm8sIHdlIGxvY2tlZCBleWVzIGFnYWluLiBJdHMgYSBsb25nIHNob3QgYnV0IGhvcGluZyB5b3Ugc2VlIHRoaXMuIEkmIzM5O2QgbG92ZSB0byBzZWUgeW91IGFnYWluLiAtIGJsYWNrIHNoaXJ0LCBtYXJvb24gaG9vZGllPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2M5YzQ5Y2EzNGI0NjQzMDhhOGZhZWQzMjVmODViNzZiLnNldENvbnRlbnQoaHRtbF9lYTUxZmQ2Mjc4YjE0MjE1OThlNzYzYTQ2OGE3ZGQzZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzFkNGM1M2VlODc4OTQwYzBiYThlNTQyMDE3ZjliMjljLmJpbmRQb3B1cChwb3B1cF9jOWM0OWNhMzRiNDY0MzA4YThmYWVkMzI1Zjg1Yjc2Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2EzYTg3ZWQyZDA0YTQyN2I4YTk3MTJiNzNhYmUwMWI3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzkxNjQyLC0xMjIuNDI4NTA4XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNjNkNDg4YzllMzg0NGMwNjhlYmNkM2UzN2U0OWMwNzAgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2EzYTg3ZWQyZDA0YTQyN2I4YTk3MTJiNzNhYmUwMWI3LnNldEljb24oaWNvbl82M2Q0ODhjOWUzODQ0YzA2OGViY2QzZTM3ZTQ5YzA3MCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzYyYTdiMjA1YzJhYjQyYTI5OTcwNzZjOTNkYjUzYjgxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM2NmVkZGQ4NDEyODQ2Yjk4ZmQ0MGVjMWZmZmU3Y2ViID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8zNjZlZGRkODQxMjg0NmI5OGZkNDBlYzFmZmZlN2NlYiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgWW91IHBsYXkgdGhpcyBmdW5ueSBnYW1lIHdpdGggeW91ciBkb2cgaW4gTGFmYXlldHRlIFBhcms6ICAJWW91IGhhdmUgdGhlIGN1dGVzdCBkb2cuIFlvdSB3ZXJlIHNpdHRpbmcgb24gYSBiZW5jaCBpbiBMYWZheWV0dGUgUGFyayB0aHJvd2luZyB0aW55IHRyZWF0cyBpbiB0aGUgZ3Jhc3MgZm9yIHlvdXIgZG9nIHRvIGh1bnQuIEl0IHdhcyBoaWxhcmlvdXMuIEF0IGZpcnN0IGFsbCBJIG5vdGljZWQgd2FzIHlvdXIgZG9nLiBCdXQgdGhlbiwgYXMgSSB3YXMgbGF1Z2hpbmcsIEkgbm90aWNlZCB5b3UuIERvIHlvdSB3YW50IHRvIGhhbmcgb3V0IHNvbWV0aW1lPyBOb3RoaW5nIHNvdW5kcyBtb3JlIHJlbGF4aW5nIHRoYW4gam9pbmluZyB5b3UgaW4gdGhlIHN1bnNoaW5lLjwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82MmE3YjIwNWMyYWI0MmEyOTk3MDc2YzkzZGI1M2I4MS5zZXRDb250ZW50KGh0bWxfMzY2ZWRkZDg0MTI4NDZiOThmZDQwZWMxZmZmZTdjZWIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9hM2E4N2VkMmQwNGE0MjdiOGE5NzEyYjczYWJlMDFiNy5iaW5kUG9wdXAocG9wdXBfNjJhN2IyMDVjMmFiNDJhMjk5NzA3NmM5M2RiNTNiODEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9mZGJhMjc5NjVkOTQ0YjJlYTAwZDMwMzlmZDRkZjQxYiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjcyMTEsLTEyMi40NzU0XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYjNkMzgzOTE4MjBkNGI2MThkOTI2YzY0YTFjM2NlNmQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fM2IxOWM5NmFkZTk1NDY0ZWI3OWFiZGEzOWFiM2MyOGIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdoZWFydC1lbXB0eScsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2ZkYmEyNzk2NWQ5NDRiMmVhMDBkMzAzOWZkNGRmNDFiLnNldEljb24oaWNvbl8zYjE5Yzk2YWRlOTU0NjRlYjc5YWJkYTM5YWIzYzI4Yik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VkZWM1NmU0YjljYTQ1MjY5MjBiNWM3YWQzOGFhMzZkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAwZWZiZDMxODcwNTRiNGRhZTZmM2YwNTQ2YjAwNjhhID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wMGVmYmQzMTg3MDU0YjRkYWU2ZjNmMDU0NmIwMDY4YSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgQ3V0ZSBHdXkgb24gSyBUcmFpbjogIAlTYXcgeW91IHR3aWNlIHRvZGF5LCBvbmNlIGluIHRoZSBtb3JuaW5nIGFuZCBvbmNlIGFnYWluIGluIHRoZSBldmVuaW5nLiBBcyBJIGRyb3BwZWQgbXkgY2FyIGF0IGEgYm9keSBzaG9wIHRoaXMgbW9ybmluZyByaWdodCBhcm91bmQgNzozMCBhbmQgbG9va2VkIGFjcm9zcyB0aGUgc3RyZWV0LCB0aGVyZSB5b3Ugd2VyZSB3YWl0aW5nIGZvciB0aGUgSyB0cmFpbi4gQ3Jvc3NlZCB0aGUgc3RyZWV0IGFuZCBjbGltYmVkIHVwIHRoZSBzdGVwcywgdGhlcmUgeW91IHdlcmUsIHlvdXIgY3V0ZSBidXR0IHdhcyByaWdodCBpbiBteSBmYWNlICh5b3Ugd2VyZSBzdGFuZGluZyBhdCB0aGUgc3RlcHMgYXNraW5nIHRoZSBkcml2ZXIgc29tZXRoaW5nIGFib3V0IHlvdXIgTVVOSSBwYXNzKS4gQXMgSSB3YXMgaGVhZGluZyBob21lIGluIHRoZSBldmVuaW5nIG5vdCBldmVuIGV4cGVjdGluZyB0byBzZWUgb24gdGhlIHNhbWUgdHJhaW4gYWdhaW4sIGJ1dCB0aGVyZSB5b3Ugd2VyZSBzaXR0aW5nIGFjcm9zcyB0aGUgYWlzbGUgZnJvbSBtZSAoeW91IGdvdCBvbiBhdCBXZXN0IFBvcnRhbCkgYnVzeSByZWFkaW5nIHlvdXIgYm9vayBvciB0ZXh0aW5nIHdoaWxlIGludGVybWl0dGVudGx5IGdsYW5jaW5nIGF0IG1lICh5b3UgdGhvdWdodCBJIHdvdWxkbiYjMzk7dCBub3RpY2UsIGRpZCB5b3U/IEJ1dCBJIGRpZC4gQ3V0ZSB0aG91Z2guKSBXZSBnb3Qgb2ZmIGF0IHRoZSBzYW1lIHN0YXRpb24gKE9jZWFuICZhbXA7YW1wOyBEb3JhZG8gVGVycmFjZSkuIEkga2VlcCBzZWVpbmcgeW91IHNvIG1hbnkgdGltZXMgb24gdGhlIHNhbWUgdHJhaW4gb3Igc3RhdGlvbnMuIEV2ZXJ5IHRpbWUgSSBzYXcgeW91LCB5b3Ugc2VudCBtZSBvbiBhIGRyZWFtIGxhbmQsIGN1dGllLiBJdCYjMzk7cyBhbHdheXMgYSBwbGVhc2FudCBzZWVpbmcgeW91LiBJdCYjMzk7cyByaWRpY3Vsb3VzIHRoYXQgd2UgbGl2ZSBzbyBuZWFyIGFuZCBjcm9zc2VkIGVhY2ggb3RoZXImIzM5O3MgcGF0aCBzbyBtYW55IHRpbWVzLCBhbmQgc3RpbGwsIHdlIGhhdmVuJiMzOTt0IGdvdCBhIGNoYW5jZSB0byBzYXkgaGVsbG8gb3IgaHVnIGdvb2RieWUuIEhvdyBzYWQgaXMgdGhhdD8hIDooLi4uLi5XaXNoIGZhdGUgd2lsbCBqb2luIHVzIG9uZSBkYXkgc29vbi4gWW91OiBWZXJ5IGN1dGUgZ3V5IHdpdGggc2hvcnQgYnJvd24gKG9yIGRhcmsgYmxvbmQpIGhhaXIsIGdsYXNzZXMgKHNvbWV0aW1lcyB3aXRob3V0KSwgZGFyayBzaG9lcywgZGFyayBwYW50cywgNSYjMzk7NyBvciBzby4gTWU6IEFsd2F5cyB3aXRoIGJhbGwgY2FwICZhbXA7YW1wOyBtZXNzZW5nZXIgYmFnLCBzYW1lIGhlaWdodCBhcyB5b3VyLCBjdXRlIGFsc28gOikuLi4uLiBJZiB5b3UgZXZlciByZXBseSwgdGVsbCBtZSBtb3JlIGFib3V0IHlvdSBvciBtZSwgc28gSSBrbm93IGl0JiMzOTtzIHlvdS4gSG9wZSB5b3Ugd2lsbC48L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZWRlYzU2ZTRiOWNhNDUyNjkyMGI1YzdhZDM4YWEzNmQuc2V0Q29udGVudChodG1sXzAwZWZiZDMxODcwNTRiNGRhZTZmM2YwNTQ2YjAwNjhhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfZmRiYTI3OTY1ZDk0NGIyZWEwMGQzMDM5ZmQ0ZGY0MWIuYmluZFBvcHVwKHBvcHVwX2VkZWM1NmU0YjljYTQ1MjY5MjBiNWM3YWQzOGFhMzZkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZWZjNjI2ZmFmNDlhNDcyMjkxYzE2MjkxNmMzMzZkZmQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODY0LC0xMjIuMzg5Ml0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2IzZDM4MzkxODIwZDRiNjE4ZDkyNmM2NGExYzNjZTZkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzUzNmYyOGVkMDQwNzQwNDk5MTQ2MWZkMmE4NTZiM2IzID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaGVhcnQtZW1wdHknLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9lZmM2MjZmYWY0OWE0NzIyOTFjMTYyOTE2YzMzNmRmZC5zZXRJY29uKGljb25fNTM2ZjI4ZWQwNDA3NDA0OTkxNDYxZmQyYTg1NmIzYjMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lYTZhODI3ZTBiMWU0MzQxOGExMmU1MzljNjlmOWE2NCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84MjM2MWMzNThjZDE0N2NmOTI5MjYwN2JkNWYyNzhjOCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfODIzNjFjMzU4Y2QxNDdjZjkyOTI2MDdiZDVmMjc4YzgiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFRoZSBmYWxjb24gY2Fubm90IGhlYXIgdGhlIGZhbGNvbmVyOiAgCVBlcmVncmluZSBmYWxjb25zOiBUaGUgb2xkIG1hbiBzZWVzIHRoZSBsb25lIHBhaXIgT3V0c2lkZSBoaXMgd2luZG93LiBBIG1vbWVudCB0byBzaGFyZTogSGUgdHVybnMgYXdheSBmcm9tIHRoZSBsaWdodCBUbyBmZXRjaCBoaXMgY2FtZXJhLiBCdXQgdGhlIG1hdGUgdGFrZXMgZmxpZ2h0IC0mYW1wOyMxNjA7IEFuZCB0aGVuIHRoZXJlIGlzIGp1c3QgdGhlIG9uZSZhbXA7IzE2MDsgQWxvbmUsIG1pc3NpbmcgaGVyLiBIZSBzZW5kcyB0aGUgcGljdHVyZSwgJmFtcDsjMTYwOyBUdXJuaW5nLCB0aGUgd2lkZW5pbmcgZ3lyZSAtIFdvbmRlcmluZyB3cml0IGNhc3QuIEZhbGNvbmVyIGFtaXNzOiBBIGRlZXBlciBpbnNpZ2h0IHRyYW5zbWl0cywmYW1wOyMxNjA7IFRvbyBhYnN0cmFjdCBmb3Igd29yZHMuPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2VhNmE4MjdlMGIxZTQzNDE4YTEyZTUzOWM2OWY5YTY0LnNldENvbnRlbnQoaHRtbF84MjM2MWMzNThjZDE0N2NmOTI5MjYwN2JkNWYyNzhjOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2VmYzYyNmZhZjQ5YTQ3MjI5MWMxNjI5MTZjMzM2ZGZkLmJpbmRQb3B1cChwb3B1cF9lYTZhODI3ZTBiMWU0MzQxOGExMmU1MzljNjlmOWE2NCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzliYjIwMTcyZjA5YjQwNWI4YWU0ZTFmZjM2NzQyZjI3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODM2MSwtMTIyLjI2MzddLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iM2QzODM5MTgyMGQ0YjYxOGQ5MjZjNjRhMWMzY2U2ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl83ZTM3NTczNWFkYzk0MzM5YTU5ZGQxOWQ4ODgyZWViNSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2hlYXJ0LWVtcHR5JywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfOWJiMjAxNzJmMDliNDA1YjhhZTRlMWZmMzY3NDJmMjcuc2V0SWNvbihpY29uXzdlMzc1NzM1YWRjOTQzMzlhNTlkZDE5ZDg4ODJlZWI1KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOWUyN2YyZjExNTAzNDk0Y2E3YTI4MmY4NDM0MTQ2YTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDdjZjU2OTk4MWU0NGNjYmEzZDM3ZGRmNDk5NWVkMzEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2Q3Y2Y1Njk5ODFlNDRjY2JhM2QzN2RkZjQ5OTVlZDMxIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBCaWcgVGhpZWY6ICAJVG8gdGhlIGJlYXV0aWZ1bCBnaXJsIHdpdGggc291bGZ1bCBleWVzLi4uIEkgbmV2ZXIgZG8gdGhpcywgYnV0IGZlbHQgY29tcGVsbGVkLiBXZSBjcm9zc2VkIHBhdGhzIGluIHRoZSBCQVJUIHN0YXRpb24gYWZ0ZXIgdGhlIHNob3cuIEkgd2FzIHRvdGluZyBhIGJyb2tlbiBiaWtlIGFuZCBzaG9vdGluZyAocG9zc2libHkgYXdrd2FyZCkgZ2xhbmNlcywgYW5kIHdoZW4geW91IHdhdmVkIGFzIHlvdSBleGl0ZWQgdGhlIHRyYWluLCBJIGtpY2tlZCBteXNlbGYgaW4gdGhlIGFzcyBmb3Igbm90IHNheWluZyBtb3JlLiBXaG8gYXJlIHlvdT8/PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzllMjdmMmYxMTUwMzQ5NGNhN2EyODJmODQzNDE0NmEzLnNldENvbnRlbnQoaHRtbF9kN2NmNTY5OTgxZTQ0Y2NiYTNkMzdkZGY0OTk1ZWQzMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzliYjIwMTcyZjA5YjQwNWI4YWU0ZTFmZjM2NzQyZjI3LmJpbmRQb3B1cChwb3B1cF85ZTI3ZjJmMTE1MDM0OTRjYTdhMjgyZjg0MzQxNDZhMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L3NjcmlwdD4KICAgICAgICA=" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After playing with this Missed Connections set, we can upload it to our Postgres database with the <code>update_db(df)</code> function from <code>manage_db.py</code>. We can also grab a DataFrame of everything in our database to play with using <code>db_to_df()</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">update_db</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">df_all</span> <span class="o">=</span> <span class="n">db_to_df</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now we can move on to NLP and clustering!</p>
<p>First, we tokenize the words in our posts and vectorize each post based on its word content using TF-IDF. TF-IDF stands for Term Frequency-Inverse Document Frequency. I found this nomenclature a little annoying- "frequency" was misleading to me since it makes me think about dividing by some cycle length. It's more like Term Count - Inverse Document Count. You count how many times a word has occured in a specific document, and divide it by the number of times a word has occured in all documents. This tells you how important a word is within a specific post compared to all posts.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With vectorized posts, we can calculate which posts are most similar to each other by cosine similarity. Since each post is represented as a vector, we can compare them pairwise to find which two are most "aligned". The cosine similarities range from 0 to 1, since we have no negative values in our vectors (term frequency and document frequency can't be negative).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">print_most_cos_sim</span><span class="p">(</span><span class="n">df_all</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Posts with highest cosine similarity (0.611):

Post 11:
Until we meet again! I do miss you! I miss the walks on the beach. I hope all is well with you.        

Post 482:
I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU. I MISS YOU.
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Heh. I think my function works. There is a lot of "missing" going on in these two posts.</p>
<p>Lastly, I used k-means clustering to try to group similar posts together and looked at what words were the most representative of each cluster.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[87]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">print_clustered_words</span><span class="p">(</span><span class="n">df_all</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Cluster 0: wish, like, time, heart, love, just, want, know, miss, don
Cluster 1: contact, like, know, hey, guy, man, just, meet, love, looking
Cluster 2: looked, know, just, saw, work, hope, did, said, time, maybe
Cluster 3: color, like, shorts, tell, white, know, hair, shirt, black, wearing
Cluster 4: hope, talk, cute, friend, didn, like, say, really, wanted, hi
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Meh. I looked at the actual posts too- this time for a smaller number of clusters in the interest of getting a digestible output.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[90]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">print_clustered_posts</span><span class="p">(</span><span class="n">df_all</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Cluster 0:
    We were talking until you were ordered to work. I was about to ask you for your phone number, but we were intercepted by a hater. You have two girls, live in Salinas, and I was mesmerized. Hit me up.
------------------------
    Hello, I seen the corners of your mouth start and smile but couldn&apos;t tell if they were 100 percent directed at me? You have silver rimmed sunglasses on and were eating a bagel across from me. You were very pretty Asian girl and I a whiteguy with facial hair. If that smile was for me, I&apos;d love to talk over coffee and a bagel. Just tell me what I was wearing and send a pic of you don&apos;t mind. Have a nice day.
------------------------
    You sat next to me with your son Kevin. You were a beautiful woman having white wine and driving me crazy as I sat next to you. If you see this did you feel the same?
------------------------

Cluster 1:
    Laura, we talked in Berlin and in SFO. It was really nice meeting you and I should have offered to meet again. Here I am. If you find this, let&apos;s meet again.
------------------------
    we both got on the 38 R on geary and Leavenworth and we got off on filmore and geary.. let me tell you, you are so beautiful and hot ... i was gonna say hi , but we both runaway... I hope you see this , I&apos;ll love to see you again...
------------------------
    I told you about a Raichu you already knew about, and you were wearing an awesome green dress. Beer, chat, and a lure on me if you like. I&apos;ll be at Cinebar tonight.
------------------------

Cluster 2:
    My relationship has declined slowly from fun, passion and hope to mechanical without feelings. We never seem to have meaningful conversations anymore. I wouldn&apos;t let myself cross the line for a long time, I felt guilty at first but now, I know that releasing sexual tension would help clear my mind. I&apos;m not looking for penetration, but rather being able to relax with a pretty woman and talk. I completely understand why someone would want to have an affair. We all need basic things: love, affection, attention, sex. I&apos;m not looking for a &quot;friends with benefits&quot;. I&apos;d like to connect with someone who has the flexibility and understanding to nurture a relationship. Intimacy goes way beyond sex. I am most compatible with highly educated, ambitious, fit, tall, attractive women. No STDs, no smokers, drug users or heavy drinkers. I am seeking a fun connection not just sex.
------------------------
    the thought of you soothes me, I am having a really horrible year, but I am sure you don&apos;t ever think of me. thank you for leaving me unscathed because if you hadn&apos;t I don&apos;t know what memory I would cling to now. I don&apos;t know if I should seek you out because that summer was fun and a long time ago and I really don&apos;t have anything that isn&apos;t tarnished. I am changed and it is not a good look. I miss myself with you: carefree and tan. thank you for being there in that period of my life and I am sorry for using your memory as solace today. merry christmas and happy birthday
------------------------
    We met up a few times a few years ago, but then lost touch. I&apos;d love to get together and start seeing you sometimes again, if you still check here. I miss filling you up. ;)
------------------------
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>My clustering results weren't that interesting- the underlying themes for each cluster weren't clear to me. Looks like I need 1) a larger corpus to work with, and 2) a different vectorizing method that doesn't strictly compare individual words. I'll explore word2vec to look at word embeddings- it can capture relationships between words that are used in similar contexts.</p>

</div>
</div>
</div>